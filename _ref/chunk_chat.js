(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,470049,113427,631625,e=>{"use strict";var n=e.i(50389),t=e.i(690877),a=e.i(759622),r=e.i(54567);let i="get-coin",o=({mintId:e,enabled:n,onSuccess:o})=>{let s=(0,a.useClientServerApiClient)();return(0,t.useQuery)({queryKey:[i,e],queryFn:async()=>{try{let n=await s.get(`coins-v2/${e}`).json();return r.logger.debug("[useGetCoin] Fetch coin data successful",{mintId:e,coinName:n?.name,hasData:!!n}),o?.(n),n}catch(t){let n=t instanceof Error?t.message:String(t);throw r.logger.error("[useGetCoin] Fetch coin data failed",{mintId:e,error:n}),t}},enabled:n,refetchInterval:25e3,refetchIntervalInBackground:!0})};e.s(["GET_COIN_QUERY_KEY",0,i,"useGetCoin",0,o],113427);let s=(e,n)=>{let t={style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0,...n,minimumFractionDigits:0,maximumFractionDigits:0};try{return new Intl.NumberFormat("en-US",t).format(e)}catch(n){return e?.toString()??"0"}};e.s(["formatNumberAsUsd",0,s],631625),e.s(["useLivestreamCoinInfo",0,e=>{let t,a,i,l=(0,n.c)(17),{mintId:c,enabled:u,onSuccess:d}=e,m=u&&!!c;l[0]!==c||l[1]!==d||l[2]!==m?(t={mintId:c,enabled:m,onSuccess:d},l[0]=c,l[1]=d,l[2]=m,l[3]=t):t=l[3];let{data:p}=o(t);e:{let e,n;if(!p){a=void 0;break e}r.logger.debug("[useLivestreamCoinInfo] Recalculating coinInfo",{mintId:c,hasCoinQueryData:!!p});let t=p.name||"",i=p.symbol||"",o=p.usd_market_cap||0;l[4]!==o?(e=s(o),l[4]=o,l[5]=e):e=l[5];let u=!!p.king_of_the_hill_timestamp;l[6]!==p.creator||l[7]!==p.profile_image||l[8]!==p.usd_market_cap||l[9]!==p.username||l[10]!==t||l[11]!==i||l[12]!==e||l[13]!==u?(n={coinName:t,coinSymbol:i,marketCap:e,usdMarketCap:p.usd_market_cap,creatorAddress:p.creator,creatorUsername:p.username,creatorAvatar:p.profile_image,isKingOfTheHill:u},l[6]=p.creator,l[7]=p.profile_image,l[8]=p.usd_market_cap,l[9]=p.username,l[10]=t,l[11]=i,l[12]=e,l[13]=u,l[14]=n):n=l[14],a=n}let f=a;return l[15]!==f?(i={coinInfo:f},l[15]=f,l[16]=i):i=l[16],i}],470049)},89085,852687,305288,525665,249437,93336,305407,e=>{"use strict";let n,t,a,r,i;var o=((a0={}).HOST="host",a0.CO_HOST="co-host",a0.VIEWER="viewer",a0),s=((a1={}).HOST_COMMAND="HOST_COMMAND",a1),l=((a2={}).STOP_YOUR_SCREENSHARE="STOP_YOUR_SCREENSHARE",a2);function c(e,n){if(!e)throw Error(n)}function u(e){if("number"!=typeof e)throw Error("invalid int 32: "+typeof e);if(!Number.isInteger(e)||e>0x7fffffff||e<-0x80000000)throw Error("invalid int 32: "+e)}function d(e){if("number"!=typeof e)throw Error("invalid uint 32: "+typeof e);if(!Number.isInteger(e)||e>0xffffffff||e<0)throw Error("invalid uint 32: "+e)}function m(e){if("number"!=typeof e)throw Error("invalid float 32: "+typeof e);if(Number.isFinite(e)&&(e>34028234663852886e22||e<-34028234663852886e22))throw Error("invalid float 32: "+e)}e.s(["DataMessageType",()=>s,"LIVEKIT_COMMANDS",()=>l,"LivekitRole",()=>o],89085);let p=Symbol("@bufbuild/protobuf/enum-type");function f(e,n,t,a){e[p]=g(n,t.map(n=>({no:n.no,name:n.name,localName:e[n.no]})),a)}function g(e,n,t){let a=Object.create(null),r=Object.create(null),i=[];for(let e of n){let n=T(e);i.push(n),a[e.name]=n,r[e.no]=n}return{typeName:e,values:i,findName:e=>a[e],findNumber:e=>r[e]}}function T(e){return"localName"in e?e:Object.assign(Object.assign({},e),{localName:e.name})}class h{equals(e){return this.getType().runtime.util.equals(this.getType(),this,e)}clone(){return this.getType().runtime.util.clone(this)}fromBinary(e,n){let t=this.getType().runtime.bin,a=t.makeReadOptions(n);return t.readMessage(this,a.readerFactory(e),e.byteLength,a),this}fromJson(e,n){let t=this.getType(),a=t.runtime.json,r=a.makeReadOptions(n);return a.readMessage(t,e,r,this),this}fromJsonString(e,n){let t;try{t=JSON.parse(e)}catch(e){throw Error(`cannot decode ${this.getType().typeName} from JSON: ${e instanceof Error?e.message:String(e)}`)}return this.fromJson(t,n)}toBinary(e){let n=this.getType().runtime.bin,t=n.makeWriteOptions(e),a=t.writerFactory();return n.writeMessage(this,a,t),a.finish()}toJson(e){let n=this.getType().runtime.json,t=n.makeWriteOptions(e);return n.writeMessage(this,t)}toJsonString(e){var n;return JSON.stringify(this.toJson(e),null,null!=(n=null==e?void 0:e.prettySpaces)?n:0)}toJSON(){return this.toJson({emitDefaultValues:!0})}getType(){return Object.getPrototypeOf(this).constructor}}var k=e.i(568321);function v(){let e=0,n=0;for(let t=0;t<28;t+=7){let a=this.buf[this.pos++];if(e|=(127&a)<<t,(128&a)==0)return this.assertBounds(),[e,n]}let t=this.buf[this.pos++];if(e|=(15&t)<<28,n=(112&t)>>4,(128&t)==0)return this.assertBounds(),[e,n];for(let t=3;t<=31;t+=7){let a=this.buf[this.pos++];if(n|=(127&a)<<t,(128&a)==0)return this.assertBounds(),[e,n]}throw Error("invalid varint")}function y(e,n,t){for(let a=0;a<28;a+=7){let r=e>>>a,i=r>>>7!=0||0!=n,o=(i?128|r:r)&255;if(t.push(o),!i)return}let a=e>>>28&15|(7&n)<<4,r=n>>3!=0;if(t.push((r?128|a:a)&255),r){for(let e=3;e<31;e+=7){let a=n>>>e,r=a>>>7!=0,i=(r?128|a:a)&255;if(t.push(i),!r)return}t.push(n>>>31&1)}}function _(e){let n="-"===e[0];n&&(e=e.slice(1));let t=0,a=0;function r(n,r){let i=Number(e.slice(n,r));a*=1e6,(t=1e6*t+i)>=0x100000000&&(a+=t/0x100000000|0,t%=0x100000000)}return r(-24,-18),r(-18,-12),r(-12,-6),r(-6),n?S(t,a):b(t,a)}function E(e,n){if({lo:e,hi:n}={lo:e>>>0,hi:n>>>0},n<=2097151)return String(0x100000000*n+e);let t=0xffffff&e,a=(e>>>24|n<<8)&0xffffff,r=n>>16&65535,i=t+6777216*a+6710656*r,o=a+8147497*r,s=2*r;return i>=1e7&&(o+=Math.floor(i/1e7),i%=1e7),o>=1e7&&(s+=Math.floor(o/1e7),o%=1e7),s.toString()+w(o)+w(i)}function b(e,n){return{lo:0|e,hi:0|n}}function S(e,n){return n=~n,e?e=~e+1:n+=1,b(e,n)}let w=e=>{let n=String(e);return"0000000".slice(n.length)+n};function I(e,n){if(e>=0){for(;e>127;)n.push(127&e|128),e>>>=7;n.push(e)}else{for(let t=0;t<9;t++)n.push(127&e|128),e>>=7;n.push(1)}}function A(){let e=this.buf[this.pos++],n=127&e;if((128&e)==0||(n|=(127&(e=this.buf[this.pos++]))<<7,(128&e)==0)||(n|=(127&(e=this.buf[this.pos++]))<<14,(128&e)==0)||(n|=(127&(e=this.buf[this.pos++]))<<21,(128&e)==0))return this.assertBounds(),n;n|=(15&(e=this.buf[this.pos++]))<<28;for(let n=5;(128&e)!=0&&n<10;n++)e=this.buf[this.pos++];if((128&e)!=0)throw Error("invalid varint");return this.assertBounds(),n>>>0}let R=function(){let e=new DataView(new ArrayBuffer(8));if("function"==typeof BigInt&&"function"==typeof e.getBigInt64&&"function"==typeof e.getBigUint64&&"function"==typeof e.setBigInt64&&"function"==typeof e.setBigUint64&&("object"!=typeof k.default||"object"!=typeof k.default.env||"1"!==k.default.env.BUF_BIGINT_DISABLE)){let n=BigInt("-9223372036854775808"),t=BigInt("9223372036854775807"),a=BigInt("0"),r=BigInt("18446744073709551615");return{zero:BigInt(0),supported:!0,parse(e){let a="bigint"==typeof e?e:BigInt(e);if(a>t||a<n)throw Error(`int64 invalid: ${e}`);return a},uParse(e){let n="bigint"==typeof e?e:BigInt(e);if(n>r||n<a)throw Error(`uint64 invalid: ${e}`);return n},enc(n){return e.setBigInt64(0,this.parse(n),!0),{lo:e.getInt32(0,!0),hi:e.getInt32(4,!0)}},uEnc(n){return e.setBigInt64(0,this.uParse(n),!0),{lo:e.getInt32(0,!0),hi:e.getInt32(4,!0)}},dec:(n,t)=>(e.setInt32(0,n,!0),e.setInt32(4,t,!0),e.getBigInt64(0,!0)),uDec:(n,t)=>(e.setInt32(0,n,!0),e.setInt32(4,t,!0),e.getBigUint64(0,!0))}}let n=e=>c(/^-?[0-9]+$/.test(e),`int64 invalid: ${e}`),t=e=>c(/^[0-9]+$/.test(e),`uint64 invalid: ${e}`);return{zero:"0",supported:!1,parse:e=>("string"!=typeof e&&(e=e.toString()),n(e),e),uParse:e=>("string"!=typeof e&&(e=e.toString()),t(e),e),enc:e=>("string"!=typeof e&&(e=e.toString()),n(e),_(e)),uEnc:e=>("string"!=typeof e&&(e=e.toString()),t(e),_(e)),dec:(e,n)=>{let t,a,r;return(a=0x80000000&(t=b(e,n)).hi)&&(t=S(t.lo,t.hi)),r=E(t.lo,t.hi),a?"-"+r:r},uDec:(e,n)=>E(e,n)}}();function P(e,n,t){if(n===t)return!0;if(e==a8.BYTES){if(!(n instanceof Uint8Array)||!(t instanceof Uint8Array)||n.length!==t.length)return!1;for(let e=0;e<n.length;e++)if(n[e]!==t[e])return!1;return!0}switch(e){case a8.UINT64:case a8.FIXED64:case a8.INT64:case a8.SFIXED64:case a8.SINT64:return n==t}return!1}function N(e,n){switch(e){case a8.BOOL:return!1;case a8.UINT64:case a8.FIXED64:case a8.INT64:case a8.SFIXED64:case a8.SINT64:return 0==n?R.zero:"0";case a8.DOUBLE:case a8.FLOAT:return 0;case a8.BYTES:return new Uint8Array(0);case a8.STRING:return"";default:return 0}}function O(e,n){switch(e){case a8.BOOL:return!1===n;case a8.STRING:return""===n;case a8.BYTES:return n instanceof Uint8Array&&!n.byteLength;default:return 0==n}}function M(e){let n=e.field.localName,t=Object.create(null);return t[n]=function(e){let n=e.field;if(n.repeated)return[];if(void 0!==n.default)return n.default;switch(n.kind){case"enum":return n.T.values[0].no;case"scalar":return N(n.T,n.L);case"message":let t=n.T,a=new t;return t.fieldWrapper?t.fieldWrapper.unwrapField(a):a;case"map":throw"map fields are not allowed to be extensions"}}(e),[t,()=>t[n]]}(a3=a8||(a8={}))[a3.DOUBLE=1]="DOUBLE",a3[a3.FLOAT=2]="FLOAT",a3[a3.INT64=3]="INT64",a3[a3.UINT64=4]="UINT64",a3[a3.INT32=5]="INT32",a3[a3.FIXED64=6]="FIXED64",a3[a3.FIXED32=7]="FIXED32",a3[a3.BOOL=8]="BOOL",a3[a3.STRING=9]="STRING",a3[a3.BYTES=12]="BYTES",a3[a3.UINT32=13]="UINT32",a3[a3.SFIXED32=15]="SFIXED32",a3[a3.SFIXED64=16]="SFIXED64",a3[a3.SINT32=17]="SINT32",a3[a3.SINT64=18]="SINT64",(a9=a7||(a7={}))[a9.BIGINT=0]="BIGINT",a9[a9.STRING=1]="STRING";let C="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),L=[];for(let e=0;e<C.length;e++)L[C[e].charCodeAt(0)]=e;L[45]=C.indexOf("+"),L[95]=C.indexOf("/");let x={dec(e){let n=3*e.length/4;"="==e[e.length-2]?n-=2:"="==e[e.length-1]&&(n-=1);let t=new Uint8Array(n),a=0,r=0,i,o=0;for(let n=0;n<e.length;n++){if(void 0===(i=L[e.charCodeAt(n)]))switch(e[n]){case"=":r=0;case"\n":case"\r":case"	":case" ":continue;default:throw Error("invalid base64 string.")}switch(r){case 0:o=i,r=1;break;case 1:t[a++]=o<<2|(48&i)>>4,o=i,r=2;break;case 2:t[a++]=(15&o)<<4|(60&i)>>2,o=i,r=3;break;case 3:t[a++]=(3&o)<<6|i,r=0}}if(1==r)throw Error("invalid base64 string.");return t.subarray(0,a)},enc(e){let n="",t=0,a,r=0;for(let i=0;i<e.length;i++)switch(a=e[i],t){case 0:n+=C[a>>2],r=(3&a)<<4,t=1;break;case 1:n+=C[r|a>>4],r=(15&a)<<2,t=2;break;case 2:n+=C[r|a>>6],n+=C[63&a],t=0}return t&&(n+=C[r],n+="=",1==t&&(n+="=")),n}};function U(e,n){let t=e.getType();return n.extendee.typeName===t.typeName&&!!t.runtime.bin.listUnknownFields(e).find(e=>e.no==n.field.no)}function D(e,n){c(e.extendee.typeName==n.getType().typeName,`extension ${e.typeName} can only be applied to message ${e.extendee.typeName}`)}function F(e,n){let t=e.localName;if(e.repeated)return n[t].length>0;if(e.oneof)return n[e.oneof.localName].case===t;switch(e.kind){case"enum":case"scalar":if(e.opt||e.req)return void 0!==n[t];if("enum"==e.kind)return n[t]!==e.T.values[0].no;return!O(e.T,n[t]);case"message":return void 0!==n[t];case"map":return Object.keys(n[t]).length>0}}function B(e,n){let t=e.localName,a=!e.opt&&!e.req;if(e.repeated)n[t]=[];else if(e.oneof)n[e.oneof.localName]={case:void 0};else switch(e.kind){case"map":n[t]={};break;case"enum":n[t]=a?e.T.values[0].no:void 0;break;case"scalar":n[t]=a?N(e.T,e.L):void 0;break;case"message":n[t]=void 0}}function j(e,n){if(null===e||"object"!=typeof e||!Object.getOwnPropertyNames(h.prototype).every(n=>n in e&&"function"==typeof e[n]))return!1;let t=e.getType();return null!==t&&"function"==typeof t&&"typeName"in t&&"string"==typeof t.typeName&&(void 0===n||t.typeName==n.typeName)}function V(e,n){return j(n)||!e.fieldWrapper?n:e.fieldWrapper.wrapField(n)}a8.DOUBLE,a8.FLOAT,a8.INT64,a8.UINT64,a8.INT32,a8.UINT32,a8.BOOL,a8.STRING,a8.BYTES;let H={ignoreUnknownFields:!1},G={emitDefaultValues:!1,enumAsInteger:!1,useProtoFieldName:!1,prettySpaces:0},$=Symbol(),J=Symbol();function Y(e){if(null===e)return"null";switch(typeof e){case"object":return Array.isArray(e)?"array":"object";case"string":return e.length>100?"string":`"${e.split('"').join('\\"')}"`;default:return String(e)}}function q(e,n,t,a,r){let i=t.localName;if(t.repeated){if(c("map"!=t.kind),null===n)return;if(!Array.isArray(n))throw Error(`cannot decode field ${r.typeName}.${t.name} from JSON: ${Y(n)}`);let o=e[i];for(let e of n){if(null===e)throw Error(`cannot decode field ${r.typeName}.${t.name} from JSON: ${Y(e)}`);switch(t.kind){case"message":o.push(t.T.fromJson(e,a));break;case"enum":let n=K(t.T,e,a.ignoreUnknownFields,!0);n!==J&&o.push(n);break;case"scalar":try{o.push(W(t.T,e,t.L,!0))}catch(a){let n=`cannot decode field ${r.typeName}.${t.name} from JSON: ${Y(e)}`;throw a instanceof Error&&a.message.length>0&&(n+=`: ${a.message}`),Error(n)}}}}else if("map"==t.kind){if(null===n)return;if("object"!=typeof n||Array.isArray(n))throw Error(`cannot decode field ${r.typeName}.${t.name} from JSON: ${Y(n)}`);let o=e[i];for(let[e,i]of Object.entries(n)){let s;if(null===i)throw Error(`cannot decode field ${r.typeName}.${t.name} from JSON: map value null`);try{s=function(e,n){if(e===a8.BOOL)switch(n){case"true":n=!0;break;case"false":n=!1}return W(e,n,a7.BIGINT,!0).toString()}(t.K,e)}catch(a){let e=`cannot decode map key for field ${r.typeName}.${t.name} from JSON: ${Y(n)}`;throw a instanceof Error&&a.message.length>0&&(e+=`: ${a.message}`),Error(e)}switch(t.V.kind){case"message":o[s]=t.V.T.fromJson(i,a);break;case"enum":let l=K(t.V.T,i,a.ignoreUnknownFields,!0);l!==J&&(o[s]=l);break;case"scalar":try{o[s]=W(t.V.T,i,a7.BIGINT,!0)}catch(a){let e=`cannot decode map value for field ${r.typeName}.${t.name} from JSON: ${Y(n)}`;throw a instanceof Error&&a.message.length>0&&(e+=`: ${a.message}`),Error(e)}}}}else switch(t.oneof&&(e=e[t.oneof.localName]={case:i},i="value"),t.kind){case"message":let o=t.T;if(null===n&&"google.protobuf.Value"!=o.typeName)return;let s=e[i];j(s)?s.fromJson(n,a):(e[i]=s=o.fromJson(n,a),o.fieldWrapper&&!t.oneof&&(e[i]=o.fieldWrapper.unwrapField(s)));break;case"enum":let l=K(t.T,n,a.ignoreUnknownFields,!1);switch(l){case $:B(t,e);break;case J:break;default:e[i]=l}break;case"scalar":try{let a=W(t.T,n,t.L,!1);a===$?B(t,e):e[i]=a}catch(a){let e=`cannot decode field ${r.typeName}.${t.name} from JSON: ${Y(n)}`;throw a instanceof Error&&a.message.length>0&&(e+=`: ${a.message}`),Error(e)}}}function W(e,n,t,a){if(null===n)return a?N(e,t):$;switch(e){case a8.DOUBLE:case a8.FLOAT:if("NaN"===n)return NaN;if("Infinity"===n)return 1/0;if("-Infinity"===n)return-1/0;if(""===n||"string"==typeof n&&n.trim().length!==n.length||"string"!=typeof n&&"number"!=typeof n)break;let r=Number(n);if(Number.isNaN(r)||!Number.isFinite(r))break;return e==a8.FLOAT&&m(r),r;case a8.INT32:case a8.FIXED32:case a8.SFIXED32:case a8.SINT32:case a8.UINT32:let i;if("number"==typeof n?i=n:"string"==typeof n&&n.length>0&&n.trim().length===n.length&&(i=Number(n)),void 0===i)break;return e==a8.UINT32||e==a8.FIXED32?d(i):u(i),i;case a8.INT64:case a8.SFIXED64:case a8.SINT64:if("number"!=typeof n&&"string"!=typeof n)break;let o=R.parse(n);return t?o.toString():o;case a8.FIXED64:case a8.UINT64:if("number"!=typeof n&&"string"!=typeof n)break;let s=R.uParse(n);return t?s.toString():s;case a8.BOOL:if("boolean"!=typeof n)break;return n;case a8.STRING:if("string"!=typeof n)break;try{encodeURIComponent(n)}catch(e){throw Error("invalid UTF8")}return n;case a8.BYTES:if(""===n)return new Uint8Array(0);if("string"!=typeof n)break;return x.dec(n)}throw Error()}function K(e,n,t,a){if(null===n)return"google.protobuf.NullValue"==e.typeName?0:a?e.values[0].no:$;switch(typeof n){case"number":if(Number.isInteger(n))return n;break;case"string":let r=e.findName(n);if(void 0!==r)return r.no;if(t)return J}throw Error(`cannot decode enum ${e.typeName} from JSON: ${Y(n)}`)}function Q(e,n,t){if("map"==e.kind){c("object"==typeof n&&null!=n);let a={},r=Object.entries(n);switch(e.V.kind){case"scalar":for(let[n,t]of r)a[n.toString()]=z(e.V.T,t);break;case"message":for(let[e,n]of r)a[e.toString()]=n.toJson(t);break;case"enum":let i=e.V.T;for(let[e,n]of r)a[e.toString()]=X(i,n,t.enumAsInteger)}return t.emitDefaultValues||r.length>0?a:void 0}if(e.repeated){c(Array.isArray(n));let a=[];switch(e.kind){case"scalar":for(let t=0;t<n.length;t++)a.push(z(e.T,n[t]));break;case"enum":for(let r=0;r<n.length;r++)a.push(X(e.T,n[r],t.enumAsInteger));break;case"message":for(let e=0;e<n.length;e++)a.push(n[e].toJson(t))}return t.emitDefaultValues||a.length>0?a:void 0}switch(e.kind){case"scalar":return z(e.T,n);case"enum":return X(e.T,n,t.enumAsInteger);case"message":return V(e.T,n).toJson(t)}}function X(e,n,t){var a;if(c("number"==typeof n),"google.protobuf.NullValue"==e.typeName)return null;if(t)return n;let r=e.findNumber(n);return null!=(a=null==r?void 0:r.name)?a:n}function z(e,n){switch(e){case a8.INT32:case a8.SFIXED32:case a8.SINT32:case a8.FIXED32:case a8.UINT32:return c("number"==typeof n),n;case a8.FLOAT:case a8.DOUBLE:if(c("number"==typeof n),Number.isNaN(n))return"NaN";if(n===1/0)return"Infinity";if(n===-1/0)return"-Infinity";return n;case a8.STRING:return c("string"==typeof n),n;case a8.BOOL:return c("boolean"==typeof n),n;case a8.UINT64:case a8.FIXED64:case a8.INT64:case a8.SFIXED64:case a8.SINT64:return c("bigint"==typeof n||"string"==typeof n||"number"==typeof n),n.toString();case a8.BYTES:return c(n instanceof Uint8Array),x.enc(n)}}(a4=re||(re={}))[a4.Varint=0]="Varint",a4[a4.Bit64=1]="Bit64",a4[a4.LengthDelimited=2]="LengthDelimited",a4[a4.StartGroup=3]="StartGroup",a4[a4.EndGroup=4]="EndGroup",a4[a4.Bit32=5]="Bit32";class Z{constructor(e){this.stack=[],this.textEncoder=null!=e?e:new TextEncoder,this.chunks=[],this.buf=[]}finish(){this.chunks.push(new Uint8Array(this.buf));let e=0;for(let n=0;n<this.chunks.length;n++)e+=this.chunks[n].length;let n=new Uint8Array(e),t=0;for(let e=0;e<this.chunks.length;e++)n.set(this.chunks[e],t),t+=this.chunks[e].length;return this.chunks=[],n}fork(){return this.stack.push({chunks:this.chunks,buf:this.buf}),this.chunks=[],this.buf=[],this}join(){let e=this.finish(),n=this.stack.pop();if(!n)throw Error("invalid state, fork stack empty");return this.chunks=n.chunks,this.buf=n.buf,this.uint32(e.byteLength),this.raw(e)}tag(e,n){return this.uint32((e<<3|n)>>>0)}raw(e){return this.buf.length&&(this.chunks.push(new Uint8Array(this.buf)),this.buf=[]),this.chunks.push(e),this}uint32(e){for(d(e);e>127;)this.buf.push(127&e|128),e>>>=7;return this.buf.push(e),this}int32(e){return u(e),I(e,this.buf),this}bool(e){return this.buf.push(+!!e),this}bytes(e){return this.uint32(e.byteLength),this.raw(e)}string(e){let n=this.textEncoder.encode(e);return this.uint32(n.byteLength),this.raw(n)}float(e){m(e);let n=new Uint8Array(4);return new DataView(n.buffer).setFloat32(0,e,!0),this.raw(n)}double(e){let n=new Uint8Array(8);return new DataView(n.buffer).setFloat64(0,e,!0),this.raw(n)}fixed32(e){d(e);let n=new Uint8Array(4);return new DataView(n.buffer).setUint32(0,e,!0),this.raw(n)}sfixed32(e){u(e);let n=new Uint8Array(4);return new DataView(n.buffer).setInt32(0,e,!0),this.raw(n)}sint32(e){return u(e),I(e=(e<<1^e>>31)>>>0,this.buf),this}sfixed64(e){let n=new Uint8Array(8),t=new DataView(n.buffer),a=R.enc(e);return t.setInt32(0,a.lo,!0),t.setInt32(4,a.hi,!0),this.raw(n)}fixed64(e){let n=new Uint8Array(8),t=new DataView(n.buffer),a=R.uEnc(e);return t.setInt32(0,a.lo,!0),t.setInt32(4,a.hi,!0),this.raw(n)}int64(e){let n=R.enc(e);return y(n.lo,n.hi,this.buf),this}sint64(e){let n=R.enc(e),t=n.hi>>31;return y(n.lo<<1^t,(n.hi<<1|n.lo>>>31)^t,this.buf),this}uint64(e){let n=R.uEnc(e);return y(n.lo,n.hi,this.buf),this}}class ee{constructor(e,n){this.varint64=v,this.uint32=A,this.buf=e,this.len=e.length,this.pos=0,this.view=new DataView(e.buffer,e.byteOffset,e.byteLength),this.textDecoder=null!=n?n:new TextDecoder}tag(){let e=this.uint32(),n=e>>>3,t=7&e;if(n<=0||t<0||t>5)throw Error("illegal tag: field no "+n+" wire type "+t);return[n,t]}skip(e,n){let t=this.pos;switch(e){case re.Varint:for(;128&this.buf[this.pos++];);break;case re.Bit64:this.pos+=4;case re.Bit32:this.pos+=4;break;case re.LengthDelimited:let a=this.uint32();this.pos+=a;break;case re.StartGroup:for(;;){let[e,t]=this.tag();if(t===re.EndGroup){if(void 0!==n&&e!==n)throw Error("invalid end group tag");break}this.skip(t,e)}break;default:throw Error("cant skip wire type "+e)}return this.assertBounds(),this.buf.subarray(t,this.pos)}assertBounds(){if(this.pos>this.len)throw RangeError("premature EOF")}int32(){return 0|this.uint32()}sint32(){let e=this.uint32();return e>>>1^-(1&e)}int64(){return R.dec(...this.varint64())}uint64(){return R.uDec(...this.varint64())}sint64(){let[e,n]=this.varint64(),t=-(1&e);return e=(e>>>1|(1&n)<<31)^t,n=n>>>1^t,R.dec(e,n)}bool(){let[e,n]=this.varint64();return 0!==e||0!==n}fixed32(){return this.view.getUint32((this.pos+=4)-4,!0)}sfixed32(){return this.view.getInt32((this.pos+=4)-4,!0)}fixed64(){return R.uDec(this.sfixed32(),this.sfixed32())}sfixed64(){return R.dec(this.sfixed32(),this.sfixed32())}float(){return this.view.getFloat32((this.pos+=4)-4,!0)}double(){return this.view.getFloat64((this.pos+=8)-8,!0)}bytes(){let e=this.uint32(),n=this.pos;return this.pos+=e,this.assertBounds(),this.buf.subarray(n,n+e)}string(){return this.textDecoder.decode(this.bytes())}}let en=Symbol("@bufbuild/protobuf/unknown-fields"),et={readUnknownFields:!0,readerFactory:e=>new ee(e)},ea={writeUnknownFields:!0,writerFactory:()=>new Z};function er(e,n,t,a,r){let{repeated:i,localName:o}=t;switch(t.oneof&&((e=e[t.oneof.localName]).case!=o&&delete e.value,e.case=o,o="value"),t.kind){case"scalar":case"enum":let s="enum"==t.kind?a8.INT32:t.T,l=es;if("scalar"==t.kind&&t.L>0&&(l=eo),i){let t=e[o];if(a==re.LengthDelimited&&s!=a8.STRING&&s!=a8.BYTES){let e=n.uint32()+n.pos;for(;n.pos<e;)t.push(l(n,s))}else t.push(l(n,s))}else e[o]=l(n,s);break;case"message":let c=t.T;i?e[o].push(ei(n,new c,r,t)):j(e[o])?ei(n,e[o],r,t):(e[o]=ei(n,new c,r,t),!c.fieldWrapper||t.oneof||t.repeated||(e[o]=c.fieldWrapper.unwrapField(e[o])));break;case"map":let[u,d]=function(e,n,t){let a,r,i=n.uint32(),o=n.pos+i;for(;n.pos<o;){let[i]=n.tag();switch(i){case 1:a=es(n,e.K);break;case 2:switch(e.V.kind){case"scalar":r=es(n,e.V.T);break;case"enum":r=n.int32();break;case"message":r=ei(n,new e.V.T,t,void 0)}}}if(void 0===a&&(a=N(e.K,a7.BIGINT)),"string"!=typeof a&&"number"!=typeof a&&(a=a.toString()),void 0===r)switch(e.V.kind){case"scalar":r=N(e.V.T,a7.BIGINT);break;case"enum":r=e.V.T.values[0].no;break;case"message":r=new e.V.T}return[a,r]}(t,n,r);e[o][u]=d}}function ei(e,n,t,a){let r=n.getType().runtime.bin,i=null==a?void 0:a.delimited;return r.readMessage(n,e,i?a.no:e.uint32(),t,i),n}function eo(e,n){let t=es(e,n);return"bigint"==typeof t?t.toString():t}function es(e,n){switch(n){case a8.STRING:return e.string();case a8.BOOL:return e.bool();case a8.DOUBLE:return e.double();case a8.FLOAT:return e.float();case a8.INT32:return e.int32();case a8.INT64:return e.int64();case a8.UINT64:return e.uint64();case a8.FIXED64:return e.fixed64();case a8.BYTES:return e.bytes();case a8.FIXED32:return e.fixed32();case a8.SFIXED32:return e.sfixed32();case a8.SFIXED64:return e.sfixed64();case a8.SINT64:return e.sint64();case a8.UINT32:return e.uint32();case a8.SINT32:return e.sint32()}}function el(e,n,t,a){c(void 0!==n);let r=e.repeated;switch(e.kind){case"scalar":case"enum":let i="enum"==e.kind?a8.INT32:e.T;if(r)if(c(Array.isArray(n)),e.packed)!function(e,n,t,a){if(!a.length)return;e.tag(t,re.LengthDelimited).fork();let[,r]=ed(n);for(let n=0;n<a.length;n++)e[r](a[n]);e.join()}(t,i,e.no,n);else for(let a of n)eu(t,i,e.no,a);else eu(t,i,e.no,n);break;case"message":if(r)for(let r of(c(Array.isArray(n)),n))ec(t,a,e,r);else ec(t,a,e,n);break;case"map":for(let[r,i]of(c("object"==typeof n&&null!=n),Object.entries(n)))!function(e,n,t,a,r){e.tag(t.no,re.LengthDelimited),e.fork();let i=a;switch(t.K){case a8.INT32:case a8.FIXED32:case a8.UINT32:case a8.SFIXED32:case a8.SINT32:i=Number.parseInt(a);break;case a8.BOOL:c("true"==a||"false"==a),i="true"==a}switch(eu(e,t.K,1,i),t.V.kind){case"scalar":eu(e,t.V.T,2,r);break;case"enum":eu(e,a8.INT32,2,r);break;case"message":c(void 0!==r),e.tag(2,re.LengthDelimited).bytes(r.toBinary(n))}e.join()}(t,a,e,r,i)}}function ec(e,n,t,a){let r=V(t.T,a);t.delimited?e.tag(t.no,re.StartGroup).raw(r.toBinary(n)).tag(t.no,re.EndGroup):e.tag(t.no,re.LengthDelimited).bytes(r.toBinary(n))}function eu(e,n,t,a){c(void 0!==a);let[r,i]=ed(n);e.tag(t,r)[i](a)}function ed(e){let n=re.Varint;switch(e){case a8.BYTES:case a8.STRING:n=re.LengthDelimited;break;case a8.DOUBLE:case a8.FIXED64:case a8.SFIXED64:n=re.Bit64;break;case a8.FIXED32:case a8.SFIXED32:case a8.FLOAT:n=re.Bit32}return[n,a8[e].toLowerCase()]}function em(e){if(void 0===e)return e;if(j(e))return e.clone();if(e instanceof Uint8Array){let n=new Uint8Array(e.byteLength);return n.set(e),n}return e}function ep(e){return e instanceof Uint8Array?e:new Uint8Array(e)}class ef{constructor(e,n){this._fields=e,this._normalizer=n}findJsonName(e){if(!this.jsonNames){let e={};for(let n of this.list())e[n.jsonName]=e[n.name]=n;this.jsonNames=e}return this.jsonNames[e]}find(e){if(!this.numbers){let e={};for(let n of this.list())e[n.no]=n;this.numbers=e}return this.numbers[e]}list(){return this.all||(this.all=this._normalizer(this._fields)),this.all}byNumber(){return this.numbersAsc||(this.numbersAsc=this.list().concat().sort((e,n)=>e.no-n.no)),this.numbersAsc}byMember(){if(!this.members){let e;this.members=[];let n=this.members;for(let t of this.list())t.oneof?t.oneof!==e&&(e=t.oneof,n.push(e)):n.push(t)}return this.members}}function eg(e,n){let t=eh(e);return n?t:eE(e_(t))}let eT=eh;function eh(e){let n=!1,t=[];for(let a=0;a<e.length;a++){let r=e.charAt(a);switch(r){case"_":n=!0;break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":t.push(r),n=!1;break;default:n&&(n=!1,r=r.toUpperCase()),t.push(r)}}return t.join("")}let ek=new Set(["constructor","toString","toJSON","valueOf"]),ev=new Set(["getType","clone","equals","fromBinary","fromJson","fromJsonString","toBinary","toJson","toJsonString","toObject"]),ey=e=>`${e}$`,e_=e=>ev.has(e)?ey(e):e,eE=e=>ek.has(e)?ey(e):e;class eb{constructor(e){this.kind="oneof",this.repeated=!1,this.packed=!1,this.opt=!1,this.req=!1,this.default=void 0,this.fields=[],this.name=e,this.localName=eg(e,!1)}addField(e){c(e.oneof===this,`field ${e.name} not one of ${this.name}`),this.fields.push(e)}findField(e){if(!this._lookup){this._lookup=Object.create(null);for(let e=0;e<this.fields.length;e++)this._lookup[this.fields[e].localName]=this.fields[e]}return this._lookup[e]}}let eS=(a5=e=>new ef(e,e=>(function(e,n){var t,a,r,i,o,s;let l,c=[];for(let u of"function"==typeof e?e():e){if(u.localName=eg(u.name,void 0!==u.oneof),u.jsonName=null!=(t=u.jsonName)?t:eT(u.name),u.repeated=null!=(a=u.repeated)&&a,"scalar"==u.kind&&(u.L=null!=(r=u.L)?r:a7.BIGINT),u.delimited=null!=(i=u.delimited)&&i,u.req=null!=(o=u.req)&&o,u.opt=null!=(s=u.opt)&&s,void 0===u.packed&&(n?u.packed="enum"==u.kind||"scalar"==u.kind&&u.T!=a8.BYTES&&u.T!=a8.STRING:u.packed=!1),void 0!==u.oneof){let e="string"==typeof u.oneof?u.oneof:u.oneof.name;l&&l.name==e||(l=new eb(e)),u.oneof=l,l.addField(u)}c.push(u)}return c})(e,!0)),a6=e=>{for(let n of e.getType().fields.byMember()){if(n.opt)continue;let t=n.localName;if(n.repeated){e[t]=[];continue}switch(n.kind){case"oneof":e[t]={case:void 0};break;case"enum":e[t]=0;break;case"map":e[t]={};break;case"scalar":e[t]=N(n.T,n.L)}}},{syntax:"proto3",json:{makeReadOptions:function(e){return e?Object.assign(Object.assign({},H),e):H},makeWriteOptions:function(e){return e?Object.assign(Object.assign({},G),e):G},readMessage(e,n,t,a){if(null==n||Array.isArray(n)||"object"!=typeof n)throw Error(`cannot decode message ${e.typeName} from JSON: ${Y(n)}`);a=null!=a?a:new e;let r=new Map,i=t.typeRegistry;for(let[o,s]of Object.entries(n)){let n=e.fields.findJsonName(o);if(n){if(n.oneof){if(null===s&&"scalar"==n.kind)continue;let t=r.get(n.oneof);if(void 0!==t)throw Error(`cannot decode message ${e.typeName} from JSON: multiple keys for oneof "${n.oneof.name}" present: "${t}", "${o}"`);r.set(n.oneof,o)}q(a,s,n,t,e)}else{let n=!1;if((null==i?void 0:i.findExtension)&&o.startsWith("[")&&o.endsWith("]")){let r=i.findExtension(o.substring(1,o.length-1));if(r&&r.extendee.typeName==e.typeName){n=!0;let[e,i]=M(r);q(e,s,r.field,t,r),function(e,n,t,a){D(n,e);let r=n.runtime.bin.makeReadOptions(a),i=n.runtime.bin.makeWriteOptions(a);if(U(e,n)){let t=e.getType().runtime.bin.listUnknownFields(e).filter(e=>e.no!=n.field.no);for(let n of(e.getType().runtime.bin.discardUnknownFields(e),t))e.getType().runtime.bin.onUnknownField(e,n.no,n.wireType,n.data)}let o=i.writerFactory(),s=n.field;s.opt||s.repeated||"enum"!=s.kind&&"scalar"!=s.kind||(s=Object.assign(Object.assign({},n.field),{opt:!0})),n.runtime.bin.writeField(s,t,o,i);let l=r.readerFactory(o.finish());for(;l.pos<l.len;){let[n,t]=l.tag(),a=l.skip(t,n);e.getType().runtime.bin.onUnknownField(e,n,t,a)}}(a,r,i(),t)}}if(!n&&!t.ignoreUnknownFields)throw Error(`cannot decode message ${e.typeName} from JSON: key "${o}" is unknown`)}}return a},writeMessage(e,n){let t,a=e.getType(),r={};try{for(t of a.fields.byNumber()){if(!F(t,e)){var i;if(t.req)throw"required field not set";if(!n.emitDefaultValues||!((i=t).repeated||"map"==i.kind||!i.oneof&&"message"!=i.kind&&!i.opt&&!i.req))continue}let a=t.oneof?e[t.oneof.localName].value:e[t.localName],o=Q(t,a,n);void 0!==o&&(r[n.useProtoFieldName?t.name:t.jsonName]=o)}let o=n.typeRegistry;if(null==o?void 0:o.findExtensionFor)for(let t of a.runtime.bin.listUnknownFields(e)){let i=o.findExtensionFor(a.typeName,t.no);if(i&&U(e,i)){let t=function(e,n,t){D(n,e);let a=n.runtime.bin.makeReadOptions(t),r=function(e,n){if(!n.repeated&&("enum"==n.kind||"scalar"==n.kind)){for(let t=e.length-1;t>=0;--t)if(e[t].no==n.no)return[e[t]];return[]}return e.filter(e=>e.no===n.no)}(e.getType().runtime.bin.listUnknownFields(e),n.field),[i,o]=M(n);for(let e of r)n.runtime.bin.readField(i,a.readerFactory(e.data),n.field,e.wireType,a);return o()}(e,i,n),a=Q(i.field,t,n);void 0!==a&&(r[i.field.jsonName]=a)}}}catch(r){let e=t?`cannot encode field ${a.typeName}.${t.name} to JSON`:`cannot encode message ${a.typeName} to JSON`,n=r instanceof Error?r.message:String(r);throw Error(e+(n.length>0?`: ${n}`:""))}return r},readScalar:(e,n,t)=>W(e,n,null!=t?t:a7.BIGINT,!0),writeScalar(e,n,t){if(void 0!==n&&(t||O(e,n)))return z(e,n)},debug:Y},bin:{makeReadOptions:function(e){return e?Object.assign(Object.assign({},et),e):et},makeWriteOptions:function(e){return e?Object.assign(Object.assign({},ea),e):ea},listUnknownFields(e){var n;return null!=(n=e[en])?n:[]},discardUnknownFields(e){delete e[en]},writeUnknownFields(e,n){let t=e[en];if(t)for(let e of t)n.tag(e.no,e.wireType).raw(e.data)},onUnknownField(e,n,t,a){Array.isArray(e[en])||(e[en]=[]),e[en].push({no:n,wireType:t,data:a})},readMessage(e,n,t,a,r){let i,o,s=e.getType(),l=r?n.len:n.pos+t;for(;n.pos<l&&([i,o]=n.tag(),!0!==r||o!=re.EndGroup);){let t=s.fields.find(i);if(!t){let t=n.skip(o,i);a.readUnknownFields&&this.onUnknownField(e,i,o,t);continue}er(e,n,t,o,a)}if(r&&(o!=re.EndGroup||i!==t))throw Error("invalid end group tag")},readField:er,writeMessage(e,n,t){let a=e.getType();for(let r of a.fields.byNumber()){if(!F(r,e)){if(r.req)throw Error(`cannot encode field ${a.typeName}.${r.name} to binary: required field not set`);continue}let i=r.oneof?e[r.oneof.localName].value:e[r.localName];el(r,i,n,t)}return t.writeUnknownFields&&this.writeUnknownFields(e,n),n},writeField(e,n,t,a){void 0!==n&&el(e,n,t,a)}},util:Object.assign(Object.assign({},{setEnumType:f,initPartial(e,n){if(void 0!==e)for(let t of n.getType().fields.byMember()){let a=t.localName;if(null!=e[a])switch(t.kind){case"oneof":let r=e[a].case;if(void 0===r)continue;let i=t.findField(r),o=e[a].value;i&&"message"==i.kind&&!j(o,i.T)?o=new i.T(o):i&&"scalar"===i.kind&&i.T===a8.BYTES&&(o=ep(o)),n[a]={case:r,value:o};break;case"scalar":case"enum":let s=e[a];t.T===a8.BYTES&&(s=t.repeated?s.map(ep):ep(s)),n[a]=s;break;case"map":switch(t.V.kind){case"scalar":case"enum":if(t.V.T===a8.BYTES)for(let[t,r]of Object.entries(e[a]))n[a][t]=ep(r);else Object.assign(n[a],e[a]);break;case"message":let l=t.V.T;for(let t of Object.keys(e[a])){let r=e[a][t];l.fieldWrapper||(r=new l(r)),n[a][t]=r}}break;case"message":let c=t.T;if(t.repeated)n[a]=e[a].map(e=>j(e,c)?e:new c(e));else{let t=e[a];c.fieldWrapper?"google.protobuf.BytesValue"===c.typeName?n[a]=ep(t):n[a]=t:n[a]=j(t,c)?t:new c(t)}}}},equals:(e,n,t)=>n===t||!!n&&!!t&&e.fields.byMember().every(e=>{let a=n[e.localName],r=t[e.localName];if(e.repeated){if(a.length!==r.length)return!1;switch(e.kind){case"message":return a.every((n,t)=>e.T.equals(n,r[t]));case"scalar":return a.every((n,t)=>P(e.T,n,r[t]));case"enum":return a.every((e,n)=>P(a8.INT32,e,r[n]))}throw Error(`repeated cannot contain ${e.kind}`)}switch(e.kind){case"message":let i=a,o=r;return e.T.fieldWrapper&&(void 0===i||j(i)||(i=e.T.fieldWrapper.wrapField(i)),void 0===o||j(o)||(o=e.T.fieldWrapper.wrapField(o))),e.T.equals(i,o);case"enum":return P(a8.INT32,a,r);case"scalar":return P(e.T,a,r);case"oneof":if(a.case!==r.case)return!1;let s=e.findField(a.case);if(void 0===s)return!0;switch(s.kind){case"message":return s.T.equals(a.value,r.value);case"enum":return P(a8.INT32,a.value,r.value);case"scalar":return P(s.T,a.value,r.value)}throw Error(`oneof cannot contain ${s.kind}`);case"map":let l=Object.keys(a).concat(Object.keys(r));switch(e.V.kind){case"message":let c=e.V.T;return l.every(e=>c.equals(a[e],r[e]));case"enum":return l.every(e=>P(a8.INT32,a[e],r[e]));case"scalar":let u=e.V.T;return l.every(e=>P(u,a[e],r[e]))}}}),clone(e){let n=e.getType(),t=new n;for(let a of n.fields.byMember()){let n,r=e[a.localName];if(a.repeated)n=r.map(em);else if("map"==a.kind)for(let[e,i]of(n=t[a.localName],Object.entries(r)))n[e]=em(i);else n="oneof"==a.kind?a.findField(r.case)?{case:r.case,value:em(r.value)}:{case:void 0}:em(r);t[a.localName]=n}for(let a of n.runtime.bin.listUnknownFields(e))n.runtime.bin.onUnknownField(t,a.no,a.wireType,a.data);return t}}),{newFieldList:a5,initFields:a6}),makeMessageType(e,n,t){var a,r;let i,o;return a=this,Object.setPrototypeOf((o=({[i=null!=(r=null==t?void 0:t.localName)?r:e.substring(e.lastIndexOf(".")+1)]:function(e){a.util.initFields(this),a.util.initPartial(e,this)}})[i]).prototype,new h),Object.assign(o,{runtime:a,typeName:e,fields:a.util.newFieldList(n),fromBinary:(e,n)=>new o().fromBinary(e,n),fromJson:(e,n)=>new o().fromJson(e,n),fromJsonString:(e,n)=>new o().fromJsonString(e,n),equals:(e,n)=>a.util.equals(o,e,n)}),o},makeEnum:function(e,n,t){let a={};for(let e of n){let n=T(e);a[n.localName]=n.no,a[n.no]=n.localName}return f(a,e,n,t),a},makeEnumType:g,getEnumType:function(e){let n=e[p];return c(n,"missing enum type on enum object"),n},makeExtension(e,n,t){var a;let r;return a=this,{typeName:e,extendee:n,get field(){if(!r){let n="function"==typeof t?t():t;n.name=e.split(".").pop(),n.jsonName=`[${e}]`,r=a.util.newFieldList([n]).list()[0]}return r},runtime:a}}});class ew extends h{constructor(e){super(),this.seconds=R.zero,this.nanos=0,eS.util.initPartial(e,this)}fromJson(e,n){if("string"!=typeof e)throw Error(`cannot decode google.protobuf.Timestamp from JSON: ${eS.json.debug(e)}`);let t=e.match(/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2}):([0-9]{2})(?:Z|\.([0-9]{3,9})Z|([+-][0-9][0-9]:[0-9][0-9]))$/);if(!t)throw Error("cannot decode google.protobuf.Timestamp from JSON: invalid RFC 3339 string");let a=Date.parse(t[1]+"-"+t[2]+"-"+t[3]+"T"+t[4]+":"+t[5]+":"+t[6]+(t[8]?t[8]:"Z"));if(Number.isNaN(a))throw Error("cannot decode google.protobuf.Timestamp from JSON: invalid RFC 3339 string");if(a<Date.parse("0001-01-01T00:00:00Z")||a>Date.parse("9999-12-31T23:59:59Z"))throw Error("cannot decode message google.protobuf.Timestamp from JSON: must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive");return this.seconds=R.parse(a/1e3),this.nanos=0,t[7]&&(this.nanos=parseInt("1"+t[7]+"0".repeat(9-t[7].length))-1e9),this}toJson(e){let n=1e3*Number(this.seconds);if(n<Date.parse("0001-01-01T00:00:00Z")||n>Date.parse("9999-12-31T23:59:59Z"))throw Error("cannot encode google.protobuf.Timestamp to JSON: must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive");if(this.nanos<0)throw Error("cannot encode google.protobuf.Timestamp to JSON: nanos must not be negative");let t="Z";if(this.nanos>0){let e=(this.nanos+1e9).toString().substring(1);t="000000"===e.substring(3)?"."+e.substring(0,3)+"Z":"000"===e.substring(6)?"."+e.substring(0,6)+"Z":"."+e+"Z"}return new Date(n).toISOString().replace(".000Z",t)}toDate(){return new Date(1e3*Number(this.seconds)+Math.ceil(this.nanos/1e6))}static now(){return ew.fromDate(new Date)}static fromDate(e){let n=e.getTime();return new ew({seconds:R.parse(Math.floor(n/1e3)),nanos:n%1e3*1e6})}static fromBinary(e,n){return new ew().fromBinary(e,n)}static fromJson(e,n){return new ew().fromJson(e,n)}static fromJsonString(e,n){return new ew().fromJsonString(e,n)}static equals(e,n){return eS.util.equals(ew,e,n)}}ew.runtime=eS,ew.typeName="google.protobuf.Timestamp",ew.fields=eS.util.newFieldList(()=>[{no:1,name:"seconds",kind:"scalar",T:3},{no:2,name:"nanos",kind:"scalar",T:5}]);class eI extends h{constructor(e){super(),this.seconds=R.zero,this.nanos=0,eS.util.initPartial(e,this)}fromJson(e,n){if("string"!=typeof e)throw Error(`cannot decode google.protobuf.Duration from JSON: ${eS.json.debug(e)}`);let t=e.match(/^(-?[0-9]+)(?:\.([0-9]+))?s/);if(null===t)throw Error(`cannot decode google.protobuf.Duration from JSON: ${eS.json.debug(e)}`);let a=Number(t[1]);if(a>315576e6||a<-315576e6)throw Error(`cannot decode google.protobuf.Duration from JSON: ${eS.json.debug(e)}`);if(this.seconds=R.parse(a),"string"==typeof t[2]){let e=t[2]+"0".repeat(9-t[2].length);this.nanos=parseInt(e),(a<0||Object.is(a,-0))&&(this.nanos=-this.nanos)}return this}toJson(e){if(Number(this.seconds)>315576e6||-315576e6>Number(this.seconds))throw Error("cannot encode google.protobuf.Duration to JSON: value out of range");let n=this.seconds.toString();if(0!==this.nanos){let e=Math.abs(this.nanos).toString();"000000"===(e="0".repeat(9-e.length)+e).substring(3)?e=e.substring(0,3):"000"===e.substring(6)&&(e=e.substring(0,6)),n+="."+e,this.nanos<0&&0==Number(this.seconds)&&(n="-"+n)}return n+"s"}static fromBinary(e,n){return new eI().fromBinary(e,n)}static fromJson(e,n){return new eI().fromJson(e,n)}static fromJsonString(e,n){return new eI().fromJsonString(e,n)}static equals(e,n){return eS.util.equals(eI,e,n)}}eI.runtime=eS,eI.typeName="google.protobuf.Duration",eI.fields=eS.util.newFieldList(()=>[{no:1,name:"seconds",kind:"scalar",T:3},{no:2,name:"nanos",kind:"scalar",T:5}]);class eA extends h{constructor(e){super(),this.typeUrl="",this.value=new Uint8Array(0),eS.util.initPartial(e,this)}toJson(e){var n;if(""===this.typeUrl)return{};let t=this.typeUrlToName(this.typeUrl),a=null==(n=null==e?void 0:e.typeRegistry)?void 0:n.findMessage(t);if(!a)throw Error(`cannot encode message google.protobuf.Any to JSON: "${this.typeUrl}" is not in the type registry`);let r=a.fromBinary(this.value).toJson(e);return(t.startsWith("google.protobuf.")||null===r||Array.isArray(r)||"object"!=typeof r)&&(r={value:r}),r["@type"]=this.typeUrl,r}fromJson(e,n){var t;let a;if(null===e||Array.isArray(e)||"object"!=typeof e)throw Error(`cannot decode message google.protobuf.Any from JSON: expected object but got ${null===e?"null":Array.isArray(e)?"array":typeof e}`);if(0==Object.keys(e).length)return this;let r=e["@type"];if("string"!=typeof r||""==r)throw Error('cannot decode message google.protobuf.Any from JSON: "@type" is empty');let i=this.typeUrlToName(r),o=null==(t=null==n?void 0:n.typeRegistry)?void 0:t.findMessage(i);if(!o)throw Error(`cannot decode message google.protobuf.Any from JSON: ${r} is not in the type registry`);if(i.startsWith("google.protobuf.")&&Object.prototype.hasOwnProperty.call(e,"value"))a=o.fromJson(e.value,n);else{let t=Object.assign({},e);delete t["@type"],a=o.fromJson(t,n)}return this.packFrom(a),this}packFrom(e){this.value=e.toBinary(),this.typeUrl=this.typeNameToUrl(e.getType().typeName)}unpackTo(e){return!!this.is(e.getType())&&(e.fromBinary(this.value),!0)}unpack(e){if(""===this.typeUrl)return;let n=e.findMessage(this.typeUrlToName(this.typeUrl));if(n)return n.fromBinary(this.value)}is(e){if(""===this.typeUrl)return!1;let n=this.typeUrlToName(this.typeUrl);return n===("string"==typeof e?e:e.typeName)}typeNameToUrl(e){return`type.googleapis.com/${e}`}typeUrlToName(e){if(!e.length)throw Error(`invalid type url: ${e}`);let n=e.lastIndexOf("/"),t=n>=0?e.substring(n+1):e;if(!t.length)throw Error(`invalid type url: ${e}`);return t}static pack(e){let n=new eA;return n.packFrom(e),n}static fromBinary(e,n){return new eA().fromBinary(e,n)}static fromJson(e,n){return new eA().fromJson(e,n)}static fromJsonString(e,n){return new eA().fromJsonString(e,n)}static equals(e,n){return eS.util.equals(eA,e,n)}}eA.runtime=eS,eA.typeName="google.protobuf.Any",eA.fields=eS.util.newFieldList(()=>[{no:1,name:"type_url",kind:"scalar",T:9},{no:2,name:"value",kind:"scalar",T:12}]);let eR=eS.makeEnum("livekit.agent.ChatRole",[{no:0,name:"DEVELOPER"},{no:1,name:"SYSTEM"},{no:2,name:"USER"},{no:3,name:"ASSISTANT"}]),eP=eS.makeMessageType("livekit.agent.MetricsReport",()=>[{no:1,name:"started_speaking_at",kind:"message",T:ew},{no:2,name:"stopped_speaking_at",kind:"message",T:ew},{no:3,name:"transcription_delay",kind:"scalar",T:1,opt:!0},{no:4,name:"end_of_turn_delay",kind:"scalar",T:1,opt:!0},{no:5,name:"on_user_turn_completed_delay",kind:"scalar",T:1,opt:!0},{no:6,name:"llm_node_ttft",kind:"scalar",T:1,opt:!0},{no:7,name:"tts_node_ttfb",kind:"scalar",T:1,opt:!0},{no:8,name:"e2e_latency",kind:"scalar",T:1,opt:!0}]),eN=eS.makeMessageType("livekit.agent.ChatMessage",()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"role",kind:"enum",T:eS.getEnumType(eR)},{no:3,name:"content",kind:"message",T:eO,repeated:!0},{no:4,name:"interrupted",kind:"scalar",T:8},{no:5,name:"transcript_confidence",kind:"scalar",T:1,opt:!0},{no:6,name:"extra",kind:"map",K:9,V:{kind:"scalar",T:9}},{no:7,name:"metrics",kind:"message",T:eP},{no:8,name:"created_at",kind:"message",T:ew}]),eO=eS.makeMessageType("livekit.agent.ChatMessage.ChatContent",()=>[{no:1,name:"text",kind:"scalar",T:9,oneof:"payload"}],{localName:"ChatMessage_ChatContent"}),eM=eS.makeMessageType("livekit.agent.FunctionCall",()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"call_id",kind:"scalar",T:9},{no:3,name:"arguments",kind:"scalar",T:9},{no:4,name:"name",kind:"scalar",T:9},{no:5,name:"created_at",kind:"message",T:ew}]),eC=eS.makeMessageType("livekit.agent.FunctionCallOutput",()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"name",kind:"scalar",T:9},{no:3,name:"call_id",kind:"scalar",T:9},{no:4,name:"output",kind:"scalar",T:9},{no:5,name:"is_error",kind:"scalar",T:8},{no:6,name:"created_at",kind:"message",T:ew}]),eL=eS.makeMessageType("livekit.agent.AgentHandoff",()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"old_agent_id",kind:"scalar",T:9,opt:!0},{no:3,name:"new_agent_id",kind:"scalar",T:9},{no:4,name:"created_at",kind:"message",T:ew}]),ex=(()=>[{no:1,name:"message",kind:"message",T:eN,oneof:"item"},{no:2,name:"function_call",kind:"message",T:eM,oneof:"item"},{no:3,name:"function_call_output",kind:"message",T:eC,oneof:"item"},{no:4,name:"agent_handoff",kind:"message",T:eL,oneof:"item"}],eS.makeMessageType("livekit.TimeSeriesMetric",()=>[{no:1,name:"label",kind:"scalar",T:13},{no:2,name:"participant_identity",kind:"scalar",T:13},{no:3,name:"track_sid",kind:"scalar",T:13},{no:4,name:"samples",kind:"message",T:eU,repeated:!0},{no:5,name:"rid",kind:"scalar",T:13}])),eU=eS.makeMessageType("livekit.MetricSample",()=>[{no:1,name:"timestamp_ms",kind:"scalar",T:3},{no:2,name:"normalized_timestamp",kind:"message",T:ew},{no:3,name:"value",kind:"scalar",T:2}]),eD=eS.makeMessageType("livekit.EventMetric",()=>[{no:1,name:"label",kind:"scalar",T:13},{no:2,name:"participant_identity",kind:"scalar",T:13},{no:3,name:"track_sid",kind:"scalar",T:13},{no:4,name:"start_timestamp_ms",kind:"scalar",T:3},{no:5,name:"end_timestamp_ms",kind:"scalar",T:3,opt:!0},{no:6,name:"normalized_start_timestamp",kind:"message",T:ew},{no:7,name:"normalized_end_timestamp",kind:"message",T:ew,opt:!0},{no:8,name:"metadata",kind:"scalar",T:9},{no:9,name:"rid",kind:"scalar",T:13}]),eF=eS.makeEnum("livekit.AudioCodec",[{no:0,name:"DEFAULT_AC"},{no:1,name:"OPUS"},{no:2,name:"AAC"},{no:3,name:"AC_MP3"}]),eB=eS.makeEnum("livekit.VideoCodec",[{no:0,name:"DEFAULT_VC"},{no:1,name:"H264_BASELINE"},{no:2,name:"H264_MAIN"},{no:3,name:"H264_HIGH"},{no:4,name:"VP8"}]),ej=eS.makeEnum("livekit.ImageCodec",[{no:0,name:"IC_DEFAULT"},{no:1,name:"IC_JPEG"}]),eV=eS.makeEnum("livekit.BackupCodecPolicy",[{no:0,name:"PREFER_REGRESSION"},{no:1,name:"SIMULCAST"},{no:2,name:"REGRESSION"}]),eH=eS.makeEnum("livekit.TrackType",[{no:0,name:"AUDIO"},{no:1,name:"VIDEO"},{no:2,name:"DATA"}]),eG=eS.makeEnum("livekit.TrackSource",[{no:0,name:"UNKNOWN"},{no:1,name:"CAMERA"},{no:2,name:"MICROPHONE"},{no:3,name:"SCREEN_SHARE"},{no:4,name:"SCREEN_SHARE_AUDIO"}]),e$=eS.makeEnum("livekit.VideoQuality",[{no:0,name:"LOW"},{no:1,name:"MEDIUM"},{no:2,name:"HIGH"},{no:3,name:"OFF"}]),eJ=eS.makeEnum("livekit.ConnectionQuality",[{no:0,name:"POOR"},{no:1,name:"GOOD"},{no:2,name:"EXCELLENT"},{no:3,name:"LOST"}]),eY=eS.makeEnum("livekit.ClientConfigSetting",[{no:0,name:"UNSET"},{no:1,name:"DISABLED"},{no:2,name:"ENABLED"}]),eq=eS.makeEnum("livekit.DisconnectReason",[{no:0,name:"UNKNOWN_REASON"},{no:1,name:"CLIENT_INITIATED"},{no:2,name:"DUPLICATE_IDENTITY"},{no:3,name:"SERVER_SHUTDOWN"},{no:4,name:"PARTICIPANT_REMOVED"},{no:5,name:"ROOM_DELETED"},{no:6,name:"STATE_MISMATCH"},{no:7,name:"JOIN_FAILURE"},{no:8,name:"MIGRATION"},{no:9,name:"SIGNAL_CLOSE"},{no:10,name:"ROOM_CLOSED"},{no:11,name:"USER_UNAVAILABLE"},{no:12,name:"USER_REJECTED"},{no:13,name:"SIP_TRUNK_FAILURE"},{no:14,name:"CONNECTION_TIMEOUT"},{no:15,name:"MEDIA_FAILURE"}]),eW=eS.makeEnum("livekit.SubscriptionError",[{no:0,name:"SE_UNKNOWN"},{no:1,name:"SE_CODEC_UNSUPPORTED"},{no:2,name:"SE_TRACK_NOTFOUND"}]),eK=eS.makeEnum("livekit.AudioTrackFeature",[{no:0,name:"TF_STEREO"},{no:1,name:"TF_NO_DTX"},{no:2,name:"TF_AUTO_GAIN_CONTROL"},{no:3,name:"TF_ECHO_CANCELLATION"},{no:4,name:"TF_NOISE_SUPPRESSION"},{no:5,name:"TF_ENHANCED_NOISE_CANCELLATION"},{no:6,name:"TF_PRECONNECT_BUFFER"}]),eQ=(()=>[{no:1,name:"after_id",kind:"scalar",T:9},{no:2,name:"limit",kind:"scalar",T:5}],eS.makeMessageType("livekit.ListUpdate",()=>[{no:1,name:"set",kind:"scalar",T:9,repeated:!0},{no:2,name:"add",kind:"scalar",T:9,repeated:!0},{no:3,name:"remove",kind:"scalar",T:9,repeated:!0},{no:4,name:"clear",kind:"scalar",T:8}])),eX=eS.makeMessageType("livekit.Room",()=>[{no:1,name:"sid",kind:"scalar",T:9},{no:2,name:"name",kind:"scalar",T:9},{no:3,name:"empty_timeout",kind:"scalar",T:13},{no:14,name:"departure_timeout",kind:"scalar",T:13},{no:4,name:"max_participants",kind:"scalar",T:13},{no:5,name:"creation_time",kind:"scalar",T:3},{no:15,name:"creation_time_ms",kind:"scalar",T:3},{no:6,name:"turn_password",kind:"scalar",T:9},{no:7,name:"enabled_codecs",kind:"message",T:ez,repeated:!0},{no:8,name:"metadata",kind:"scalar",T:9},{no:9,name:"num_participants",kind:"scalar",T:13},{no:11,name:"num_publishers",kind:"scalar",T:13},{no:10,name:"active_recording",kind:"scalar",T:8},{no:13,name:"version",kind:"message",T:nd}]),ez=eS.makeMessageType("livekit.Codec",()=>[{no:1,name:"mime",kind:"scalar",T:9},{no:2,name:"fmtp_line",kind:"scalar",T:9}]),eZ=eS.makeMessageType("livekit.ParticipantPermission",()=>[{no:1,name:"can_subscribe",kind:"scalar",T:8},{no:2,name:"can_publish",kind:"scalar",T:8},{no:3,name:"can_publish_data",kind:"scalar",T:8},{no:9,name:"can_publish_sources",kind:"enum",T:eS.getEnumType(eG),repeated:!0},{no:7,name:"hidden",kind:"scalar",T:8},{no:8,name:"recorder",kind:"scalar",T:8},{no:10,name:"can_update_metadata",kind:"scalar",T:8},{no:11,name:"agent",kind:"scalar",T:8},{no:12,name:"can_subscribe_metrics",kind:"scalar",T:8}]),e0=eS.makeMessageType("livekit.ParticipantInfo",()=>[{no:1,name:"sid",kind:"scalar",T:9},{no:2,name:"identity",kind:"scalar",T:9},{no:3,name:"state",kind:"enum",T:eS.getEnumType(e1)},{no:4,name:"tracks",kind:"message",T:e5,repeated:!0},{no:5,name:"metadata",kind:"scalar",T:9},{no:6,name:"joined_at",kind:"scalar",T:3},{no:17,name:"joined_at_ms",kind:"scalar",T:3},{no:9,name:"name",kind:"scalar",T:9},{no:10,name:"version",kind:"scalar",T:13},{no:11,name:"permission",kind:"message",T:eZ},{no:12,name:"region",kind:"scalar",T:9},{no:13,name:"is_publisher",kind:"scalar",T:8},{no:14,name:"kind",kind:"enum",T:eS.getEnumType(e2)},{no:15,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}},{no:16,name:"disconnect_reason",kind:"enum",T:eS.getEnumType(eq)},{no:18,name:"kind_details",kind:"enum",T:eS.getEnumType(e3),repeated:!0},{no:19,name:"data_tracks",kind:"message",T:e6,repeated:!0}]),e1=eS.makeEnum("livekit.ParticipantInfo.State",[{no:0,name:"JOINING"},{no:1,name:"JOINED"},{no:2,name:"ACTIVE"},{no:3,name:"DISCONNECTED"}]),e2=eS.makeEnum("livekit.ParticipantInfo.Kind",[{no:0,name:"STANDARD"},{no:1,name:"INGRESS"},{no:2,name:"EGRESS"},{no:3,name:"SIP"},{no:4,name:"AGENT"},{no:7,name:"CONNECTOR"}]),e3=eS.makeEnum("livekit.ParticipantInfo.KindDetail",[{no:0,name:"CLOUD_AGENT"},{no:1,name:"FORWARDED"},{no:2,name:"CONNECTOR_WHATSAPP"},{no:3,name:"CONNECTOR_TWILIO"}]),e9=eS.makeEnum("livekit.Encryption.Type",[{no:0,name:"NONE"},{no:1,name:"GCM"},{no:2,name:"CUSTOM"}]),e4=eS.makeMessageType("livekit.SimulcastCodecInfo",()=>[{no:1,name:"mime_type",kind:"scalar",T:9},{no:2,name:"mid",kind:"scalar",T:9},{no:3,name:"cid",kind:"scalar",T:9},{no:4,name:"layers",kind:"message",T:e7,repeated:!0},{no:5,name:"video_layer_mode",kind:"enum",T:eS.getEnumType(ne)},{no:6,name:"sdp_cid",kind:"scalar",T:9}]),e5=eS.makeMessageType("livekit.TrackInfo",()=>[{no:1,name:"sid",kind:"scalar",T:9},{no:2,name:"type",kind:"enum",T:eS.getEnumType(eH)},{no:3,name:"name",kind:"scalar",T:9},{no:4,name:"muted",kind:"scalar",T:8},{no:5,name:"width",kind:"scalar",T:13},{no:6,name:"height",kind:"scalar",T:13},{no:7,name:"simulcast",kind:"scalar",T:8},{no:8,name:"disable_dtx",kind:"scalar",T:8},{no:9,name:"source",kind:"enum",T:eS.getEnumType(eG)},{no:10,name:"layers",kind:"message",T:e7,repeated:!0},{no:11,name:"mime_type",kind:"scalar",T:9},{no:12,name:"mid",kind:"scalar",T:9},{no:13,name:"codecs",kind:"message",T:e4,repeated:!0},{no:14,name:"stereo",kind:"scalar",T:8},{no:15,name:"disable_red",kind:"scalar",T:8},{no:16,name:"encryption",kind:"enum",T:eS.getEnumType(e9)},{no:17,name:"stream",kind:"scalar",T:9},{no:18,name:"version",kind:"message",T:nd},{no:19,name:"audio_features",kind:"enum",T:eS.getEnumType(eK),repeated:!0},{no:20,name:"backup_codec_policy",kind:"enum",T:eS.getEnumType(eV)}]),e6=eS.makeMessageType("livekit.DataTrackInfo",()=>[{no:1,name:"pub_handle",kind:"scalar",T:13},{no:2,name:"sid",kind:"scalar",T:9},{no:3,name:"name",kind:"scalar",T:9},{no:4,name:"encryption",kind:"enum",T:eS.getEnumType(e9)}]),e8=eS.makeMessageType("livekit.DataTrackSubscriptionOptions",()=>[{no:1,name:"target_fps",kind:"scalar",T:13,opt:!0}]),e7=eS.makeMessageType("livekit.VideoLayer",()=>[{no:1,name:"quality",kind:"enum",T:eS.getEnumType(e$)},{no:2,name:"width",kind:"scalar",T:13},{no:3,name:"height",kind:"scalar",T:13},{no:4,name:"bitrate",kind:"scalar",T:13},{no:5,name:"ssrc",kind:"scalar",T:13},{no:6,name:"spatial_layer",kind:"scalar",T:5},{no:7,name:"rid",kind:"scalar",T:9}]),ne=eS.makeEnum("livekit.VideoLayer.Mode",[{no:0,name:"MODE_UNUSED"},{no:1,name:"ONE_SPATIAL_LAYER_PER_STREAM"},{no:2,name:"MULTIPLE_SPATIAL_LAYERS_PER_STREAM"},{no:3,name:"ONE_SPATIAL_LAYER_PER_STREAM_INCOMPLETE_RTCP_SR"}]),nn=(()=>[{no:1,name:"encryption_type",kind:"enum",T:eS.getEnumType(e9)},{no:2,name:"iv",kind:"scalar",T:12},{no:3,name:"key_index",kind:"scalar",T:13},{no:4,name:"encrypted_value",kind:"scalar",T:12}],eS.makeMessageType("livekit.SpeakerInfo",()=>[{no:1,name:"sid",kind:"scalar",T:9},{no:2,name:"level",kind:"scalar",T:2},{no:3,name:"active",kind:"scalar",T:8}])),nt=(()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:5,name:"participant_identity",kind:"scalar",T:9},{no:2,name:"payload",kind:"scalar",T:12},{no:3,name:"destination_sids",kind:"scalar",T:9,repeated:!0},{no:6,name:"destination_identities",kind:"scalar",T:9,repeated:!0},{no:4,name:"topic",kind:"scalar",T:9,opt:!0},{no:8,name:"id",kind:"scalar",T:9,opt:!0},{no:9,name:"start_time",kind:"scalar",T:4,opt:!0},{no:10,name:"end_time",kind:"scalar",T:4,opt:!0},{no:11,name:"nonce",kind:"scalar",T:12}],eS.makeMessageType("livekit.TranscriptionSegment",()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"text",kind:"scalar",T:9},{no:3,name:"start_time",kind:"scalar",T:4},{no:4,name:"end_time",kind:"scalar",T:4},{no:5,name:"final",kind:"scalar",T:8},{no:6,name:"language",kind:"scalar",T:9}])),na=(()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"timestamp",kind:"scalar",T:3},{no:3,name:"edit_timestamp",kind:"scalar",T:3,opt:!0},{no:4,name:"message",kind:"scalar",T:9},{no:5,name:"deleted",kind:"scalar",T:8},{no:6,name:"generated",kind:"scalar",T:8}],eS.makeMessageType("livekit.RpcError",()=>[{no:1,name:"code",kind:"scalar",T:13},{no:2,name:"message",kind:"scalar",T:9},{no:3,name:"data",kind:"scalar",T:9}])),nr=eS.makeMessageType("livekit.ParticipantTracks",()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:2,name:"track_sids",kind:"scalar",T:9,repeated:!0}]),ni=eS.makeMessageType("livekit.ServerInfo",()=>[{no:1,name:"edition",kind:"enum",T:eS.getEnumType(no)},{no:2,name:"version",kind:"scalar",T:9},{no:3,name:"protocol",kind:"scalar",T:5},{no:4,name:"region",kind:"scalar",T:9},{no:5,name:"node_id",kind:"scalar",T:9},{no:6,name:"debug_info",kind:"scalar",T:9},{no:7,name:"agent_protocol",kind:"scalar",T:5}]),no=eS.makeEnum("livekit.ServerInfo.Edition",[{no:0,name:"Standard"},{no:1,name:"Cloud"}]),ns=(()=>[{no:1,name:"sdk",kind:"enum",T:eS.getEnumType(ns)},{no:2,name:"version",kind:"scalar",T:9},{no:3,name:"protocol",kind:"scalar",T:5},{no:4,name:"os",kind:"scalar",T:9},{no:5,name:"os_version",kind:"scalar",T:9},{no:6,name:"device_model",kind:"scalar",T:9},{no:7,name:"browser",kind:"scalar",T:9},{no:8,name:"browser_version",kind:"scalar",T:9},{no:9,name:"address",kind:"scalar",T:9},{no:10,name:"network",kind:"scalar",T:9},{no:11,name:"other_sdks",kind:"scalar",T:9}],eS.makeEnum("livekit.ClientInfo.SDK",[{no:0,name:"UNKNOWN"},{no:1,name:"JS"},{no:2,name:"SWIFT"},{no:3,name:"ANDROID"},{no:4,name:"FLUTTER"},{no:5,name:"GO"},{no:6,name:"UNITY"},{no:7,name:"REACT_NATIVE"},{no:8,name:"RUST"},{no:9,name:"PYTHON"},{no:10,name:"CPP"},{no:11,name:"UNITY_WEB"},{no:12,name:"NODE"},{no:13,name:"UNREAL"},{no:14,name:"ESP32"}])),nl=eS.makeMessageType("livekit.ClientConfiguration",()=>[{no:1,name:"video",kind:"message",T:nc},{no:2,name:"screen",kind:"message",T:nc},{no:3,name:"resume_connection",kind:"enum",T:eS.getEnumType(eY)},{no:4,name:"disabled_codecs",kind:"message",T:nu},{no:5,name:"force_relay",kind:"enum",T:eS.getEnumType(eY)}]),nc=eS.makeMessageType("livekit.VideoConfiguration",()=>[{no:1,name:"hardware_encoder",kind:"enum",T:eS.getEnumType(eY)}]),nu=eS.makeMessageType("livekit.DisabledCodecs",()=>[{no:1,name:"codecs",kind:"message",T:ez,repeated:!0},{no:2,name:"publish",kind:"message",T:ez,repeated:!0}]),nd=(()=>[{no:1,name:"start_time",kind:"message",T:ew},{no:2,name:"end_time",kind:"message",T:ew},{no:3,name:"duration",kind:"scalar",T:1},{no:4,name:"start_timestamp",kind:"scalar",T:4},{no:5,name:"end_timestamp",kind:"scalar",T:4},{no:6,name:"rtp_clock_ticks",kind:"scalar",T:4},{no:7,name:"drift_samples",kind:"scalar",T:3},{no:8,name:"drift_ms",kind:"scalar",T:1},{no:9,name:"clock_rate",kind:"scalar",T:1}],eS.makeMessageType("livekit.TimedVersion",()=>[{no:1,name:"unix_micro",kind:"scalar",T:3},{no:2,name:"ticks",kind:"scalar",T:5}])),nm=eS.makeEnum("livekit.DataStream.OperationType",[{no:0,name:"CREATE"},{no:1,name:"UPDATE"},{no:2,name:"DELETE"},{no:3,name:"REACTION"}]),np=eS.makeMessageType("livekit.DataStream.TextHeader",()=>[{no:1,name:"operation_type",kind:"enum",T:eS.getEnumType(nm)},{no:2,name:"version",kind:"scalar",T:5},{no:3,name:"reply_to_stream_id",kind:"scalar",T:9},{no:4,name:"attached_stream_ids",kind:"scalar",T:9,repeated:!0},{no:5,name:"generated",kind:"scalar",T:8}],{localName:"DataStream_TextHeader"}),nf=eS.makeMessageType("livekit.DataStream.ByteHeader",()=>[{no:1,name:"name",kind:"scalar",T:9}],{localName:"DataStream_ByteHeader"}),ng=(()=>[{no:1,name:"stream_id",kind:"scalar",T:9},{no:2,name:"timestamp",kind:"scalar",T:3},{no:3,name:"topic",kind:"scalar",T:9},{no:4,name:"mime_type",kind:"scalar",T:9},{no:5,name:"total_length",kind:"scalar",T:4,opt:!0},{no:7,name:"encryption_type",kind:"enum",T:eS.getEnumType(e9)},{no:8,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}},{no:9,name:"text_header",kind:"message",T:np,oneof:"content_header"},{no:10,name:"byte_header",kind:"message",T:nf,oneof:"content_header"}],eS.makeMessageType("livekit.FilterParams",()=>[{no:1,name:"include_events",kind:"scalar",T:9,repeated:!0},{no:2,name:"exclude_events",kind:"scalar",T:9,repeated:!0}])),nT=eS.makeMessageType("livekit.WebhookConfig",()=>[{no:1,name:"url",kind:"scalar",T:9},{no:2,name:"signing_key",kind:"scalar",T:9},{no:3,name:"filter_params",kind:"message",T:ng}]),nh=eS.makeMessageType("livekit.SubscribedAudioCodec",()=>[{no:1,name:"codec",kind:"scalar",T:9},{no:2,name:"enabled",kind:"scalar",T:8}]),nk=eS.makeEnum("livekit.JobType",[{no:0,name:"JT_ROOM"},{no:1,name:"JT_PUBLISHER"},{no:2,name:"JT_PARTICIPANT"}]),nv=eS.makeEnum("livekit.WorkerStatus",[{no:0,name:"WS_AVAILABLE"},{no:1,name:"WS_FULL"}]),ny=eS.makeEnum("livekit.JobStatus",[{no:0,name:"JS_PENDING"},{no:1,name:"JS_RUNNING"},{no:2,name:"JS_SUCCESS"},{no:3,name:"JS_FAILED"}]),n_=eS.makeMessageType("livekit.Job",()=>[{no:1,name:"id",kind:"scalar",T:9},{no:9,name:"dispatch_id",kind:"scalar",T:9},{no:2,name:"type",kind:"enum",T:eS.getEnumType(nk)},{no:3,name:"room",kind:"message",T:eX},{no:4,name:"participant",kind:"message",T:e0,opt:!0},{no:5,name:"namespace",kind:"scalar",T:9},{no:6,name:"metadata",kind:"scalar",T:9},{no:7,name:"agent_name",kind:"scalar",T:9},{no:8,name:"state",kind:"message",T:nE},{no:10,name:"enable_recording",kind:"scalar",T:8}]),nE=eS.makeMessageType("livekit.JobState",()=>[{no:1,name:"status",kind:"enum",T:eS.getEnumType(ny)},{no:2,name:"error",kind:"scalar",T:9},{no:3,name:"started_at",kind:"scalar",T:3},{no:4,name:"ended_at",kind:"scalar",T:3},{no:5,name:"updated_at",kind:"scalar",T:3},{no:6,name:"participant_identity",kind:"scalar",T:9},{no:7,name:"worker_id",kind:"scalar",T:9},{no:8,name:"agent_id",kind:"scalar",T:9}]),nb=(()=>[{no:1,name:"type",kind:"enum",T:eS.getEnumType(nk)},{no:2,name:"room",kind:"message",T:eX},{no:3,name:"participant",kind:"message",T:e0}],eS.makeMessageType("livekit.RoomAgentDispatch",()=>[{no:1,name:"agent_name",kind:"scalar",T:9},{no:2,name:"metadata",kind:"scalar",T:9}])),nS=(()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"agent_name",kind:"scalar",T:9},{no:3,name:"room",kind:"scalar",T:9},{no:4,name:"metadata",kind:"scalar",T:9},{no:5,name:"state",kind:"message",T:nS}],eS.makeMessageType("livekit.AgentDispatchState",()=>[{no:1,name:"jobs",kind:"message",T:n_,repeated:!0},{no:2,name:"created_at",kind:"scalar",T:3},{no:3,name:"deleted_at",kind:"scalar",T:3}])),nw=eS.makeEnum("livekit.SignalTarget",[{no:0,name:"PUBLISHER"},{no:1,name:"SUBSCRIBER"}]),nI=eS.makeEnum("livekit.StreamState",[{no:0,name:"ACTIVE"},{no:1,name:"PAUSED"}]),nA=eS.makeEnum("livekit.CandidateProtocol",[{no:0,name:"UDP"},{no:1,name:"TCP"},{no:2,name:"TLS"}]),nR=eS.makeMessageType("livekit.SimulcastCodec",()=>[{no:1,name:"codec",kind:"scalar",T:9},{no:2,name:"cid",kind:"scalar",T:9},{no:4,name:"layers",kind:"message",T:e7,repeated:!0},{no:5,name:"video_layer_mode",kind:"enum",T:eS.getEnumType(ne)}]),nP=eS.makeMessageType("livekit.AddTrackRequest",()=>[{no:1,name:"cid",kind:"scalar",T:9},{no:2,name:"name",kind:"scalar",T:9},{no:3,name:"type",kind:"enum",T:eS.getEnumType(eH)},{no:4,name:"width",kind:"scalar",T:13},{no:5,name:"height",kind:"scalar",T:13},{no:6,name:"muted",kind:"scalar",T:8},{no:7,name:"disable_dtx",kind:"scalar",T:8},{no:8,name:"source",kind:"enum",T:eS.getEnumType(eG)},{no:9,name:"layers",kind:"message",T:e7,repeated:!0},{no:10,name:"simulcast_codecs",kind:"message",T:nR,repeated:!0},{no:11,name:"sid",kind:"scalar",T:9},{no:12,name:"stereo",kind:"scalar",T:8},{no:13,name:"disable_red",kind:"scalar",T:8},{no:14,name:"encryption",kind:"enum",T:eS.getEnumType(e9)},{no:15,name:"stream",kind:"scalar",T:9},{no:16,name:"backup_codec_policy",kind:"enum",T:eS.getEnumType(eV)},{no:17,name:"audio_features",kind:"enum",T:eS.getEnumType(eK),repeated:!0}]),nN=eS.makeMessageType("livekit.PublishDataTrackRequest",()=>[{no:1,name:"pub_handle",kind:"scalar",T:13},{no:2,name:"name",kind:"scalar",T:9},{no:3,name:"encryption",kind:"enum",T:eS.getEnumType(e9)}]),nO=eS.makeMessageType("livekit.PublishDataTrackResponse",()=>[{no:1,name:"info",kind:"message",T:e6}]),nM=eS.makeMessageType("livekit.UnpublishDataTrackRequest",()=>[{no:1,name:"pub_handle",kind:"scalar",T:13}]),nC=(()=>[{no:1,name:"info",kind:"message",T:e6}],eS.makeMessageType("livekit.DataTrackSubscriberHandles.PublishedDataTrack",()=>[{no:1,name:"publisher_identity",kind:"scalar",T:9},{no:2,name:"publisher_sid",kind:"scalar",T:9},{no:3,name:"track_sid",kind:"scalar",T:9}],{localName:"DataTrackSubscriberHandles_PublishedDataTrack"})),nL=eS.makeMessageType("livekit.TrickleRequest",()=>[{no:1,name:"candidateInit",kind:"scalar",T:9},{no:2,name:"target",kind:"enum",T:eS.getEnumType(nw)},{no:3,name:"final",kind:"scalar",T:8}]),nx=eS.makeMessageType("livekit.MuteTrackRequest",()=>[{no:1,name:"sid",kind:"scalar",T:9},{no:2,name:"muted",kind:"scalar",T:8}]),nU=(()=>[{no:1,name:"room",kind:"message",T:eX},{no:2,name:"participant",kind:"message",T:e0},{no:3,name:"other_participants",kind:"message",T:e0,repeated:!0},{no:4,name:"server_version",kind:"scalar",T:9},{no:5,name:"ice_servers",kind:"message",T:n$,repeated:!0},{no:6,name:"subscriber_primary",kind:"scalar",T:8},{no:7,name:"alternative_url",kind:"scalar",T:9},{no:8,name:"client_configuration",kind:"message",T:nl},{no:9,name:"server_region",kind:"scalar",T:9},{no:10,name:"ping_timeout",kind:"scalar",T:5},{no:11,name:"ping_interval",kind:"scalar",T:5},{no:12,name:"server_info",kind:"message",T:ni},{no:13,name:"sif_trailer",kind:"scalar",T:12},{no:14,name:"enabled_publish_codecs",kind:"message",T:ez,repeated:!0},{no:15,name:"fast_publish",kind:"scalar",T:8}],eS.makeMessageType("livekit.TrackPublishedResponse",()=>[{no:1,name:"cid",kind:"scalar",T:9},{no:2,name:"track",kind:"message",T:e5}])),nD=(()=>[{no:1,name:"track_sid",kind:"scalar",T:9}],eS.makeMessageType("livekit.SessionDescription",()=>[{no:1,name:"type",kind:"scalar",T:9},{no:2,name:"sdp",kind:"scalar",T:9},{no:3,name:"id",kind:"scalar",T:13},{no:4,name:"mid_to_track_id",kind:"map",K:9,V:{kind:"scalar",T:9}}])),nF=(()=>[{no:1,name:"participants",kind:"message",T:e0,repeated:!0}],eS.makeMessageType("livekit.UpdateSubscription",()=>[{no:1,name:"track_sids",kind:"scalar",T:9,repeated:!0},{no:2,name:"subscribe",kind:"scalar",T:8},{no:3,name:"participant_tracks",kind:"message",T:nr,repeated:!0}])),nB=(()=>[{no:1,name:"updates",kind:"message",T:nB,repeated:!0}],eS.makeMessageType("livekit.UpdateDataSubscription.Update",()=>[{no:1,name:"track_sid",kind:"scalar",T:9},{no:2,name:"subscribe",kind:"scalar",T:8},{no:3,name:"options",kind:"message",T:e8}],{localName:"UpdateDataSubscription_Update"})),nj=(()=>[{no:1,name:"track_sids",kind:"scalar",T:9,repeated:!0},{no:3,name:"disabled",kind:"scalar",T:8},{no:4,name:"quality",kind:"enum",T:eS.getEnumType(e$)},{no:5,name:"width",kind:"scalar",T:13},{no:6,name:"height",kind:"scalar",T:13},{no:7,name:"fps",kind:"scalar",T:13},{no:8,name:"priority",kind:"scalar",T:13}],eS.makeMessageType("livekit.UpdateLocalAudioTrack",()=>[{no:1,name:"track_sid",kind:"scalar",T:9},{no:2,name:"features",kind:"enum",T:eS.getEnumType(eK),repeated:!0}])),nV=eS.makeMessageType("livekit.UpdateLocalVideoTrack",()=>[{no:1,name:"track_sid",kind:"scalar",T:9},{no:2,name:"width",kind:"scalar",T:13},{no:3,name:"height",kind:"scalar",T:13}]),nH=(()=>[{no:1,name:"can_reconnect",kind:"scalar",T:8},{no:2,name:"reason",kind:"enum",T:eS.getEnumType(eq)},{no:3,name:"action",kind:"enum",T:eS.getEnumType(nH)},{no:4,name:"regions",kind:"message",T:nz}],eS.makeEnum("livekit.LeaveRequest.Action",[{no:0,name:"DISCONNECT"},{no:1,name:"RESUME"},{no:2,name:"RECONNECT"}])),nG=(()=>[{no:1,name:"track_sid",kind:"scalar",T:9},{no:2,name:"layers",kind:"message",T:e7,repeated:!0}],eS.makeMessageType("livekit.UpdateParticipantMetadata",()=>[{no:1,name:"metadata",kind:"scalar",T:9},{no:2,name:"name",kind:"scalar",T:9},{no:3,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}},{no:4,name:"request_id",kind:"scalar",T:13}])),n$=eS.makeMessageType("livekit.ICEServer",()=>[{no:1,name:"urls",kind:"scalar",T:9,repeated:!0},{no:2,name:"username",kind:"scalar",T:9},{no:3,name:"credential",kind:"scalar",T:9}]),nJ=(()=>[{no:1,name:"speakers",kind:"message",T:nn,repeated:!0}],eS.makeMessageType("livekit.ConnectionQualityInfo",()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:2,name:"quality",kind:"enum",T:eS.getEnumType(eJ)},{no:3,name:"score",kind:"scalar",T:2}])),nY=(()=>[{no:1,name:"updates",kind:"message",T:nJ,repeated:!0}],eS.makeMessageType("livekit.StreamStateInfo",()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:2,name:"track_sid",kind:"scalar",T:9},{no:3,name:"state",kind:"enum",T:eS.getEnumType(nI)}])),nq=(()=>[{no:1,name:"stream_states",kind:"message",T:nY,repeated:!0}],eS.makeMessageType("livekit.SubscribedQuality",()=>[{no:1,name:"quality",kind:"enum",T:eS.getEnumType(e$)},{no:2,name:"enabled",kind:"scalar",T:8}])),nW=eS.makeMessageType("livekit.SubscribedCodec",()=>[{no:1,name:"codec",kind:"scalar",T:9},{no:2,name:"qualities",kind:"message",T:nq,repeated:!0}]),nK=(()=>[{no:1,name:"track_sid",kind:"scalar",T:9},{no:2,name:"subscribed_qualities",kind:"message",T:nq,repeated:!0},{no:3,name:"subscribed_codecs",kind:"message",T:nW,repeated:!0}],eS.makeMessageType("livekit.TrackPermission",()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:2,name:"all_tracks",kind:"scalar",T:8},{no:3,name:"track_sids",kind:"scalar",T:9,repeated:!0},{no:4,name:"participant_identity",kind:"scalar",T:9}])),nQ=(()=>[{no:1,name:"all_participants",kind:"scalar",T:8},{no:2,name:"track_permissions",kind:"message",T:nK,repeated:!0}],eS.makeMessageType("livekit.DataChannelReceiveState",()=>[{no:1,name:"publisher_sid",kind:"scalar",T:9},{no:2,name:"last_seq",kind:"scalar",T:13}])),nX=eS.makeMessageType("livekit.DataChannelInfo",()=>[{no:1,name:"label",kind:"scalar",T:9},{no:2,name:"id",kind:"scalar",T:13},{no:3,name:"target",kind:"enum",T:eS.getEnumType(nw)}]),nz=(()=>[{no:1,name:"speaker_update",kind:"scalar",T:5,oneof:"scenario"},{no:2,name:"node_failure",kind:"scalar",T:8,oneof:"scenario"},{no:3,name:"migration",kind:"scalar",T:8,oneof:"scenario"},{no:4,name:"server_leave",kind:"scalar",T:8,oneof:"scenario"},{no:5,name:"switch_candidate_protocol",kind:"enum",T:eS.getEnumType(nA),oneof:"scenario"},{no:6,name:"subscriber_bandwidth",kind:"scalar",T:3,oneof:"scenario"},{no:7,name:"disconnect_signal_on_resume",kind:"scalar",T:8,oneof:"scenario"},{no:8,name:"disconnect_signal_on_resume_no_messages",kind:"scalar",T:8,oneof:"scenario"},{no:9,name:"leave_request_full_reconnect",kind:"scalar",T:8,oneof:"scenario"}],eS.makeMessageType("livekit.RegionSettings",()=>[{no:1,name:"regions",kind:"message",T:nZ,repeated:!0}])),nZ=eS.makeMessageType("livekit.RegionInfo",()=>[{no:1,name:"region",kind:"scalar",T:9},{no:2,name:"url",kind:"scalar",T:9},{no:3,name:"distance",kind:"scalar",T:3}]),n0=(()=>[{no:1,name:"track_sid",kind:"scalar",T:9},{no:2,name:"err",kind:"enum",T:eS.getEnumType(eW)}],eS.makeEnum("livekit.RequestResponse.Reason",[{no:0,name:"OK"},{no:1,name:"NOT_FOUND"},{no:2,name:"NOT_ALLOWED"},{no:3,name:"LIMIT_EXCEEDED"},{no:4,name:"QUEUED"},{no:5,name:"UNSUPPORTED_TYPE"},{no:6,name:"UNCLASSIFIED_ERROR"},{no:7,name:"INVALID_HANDLE"},{no:8,name:"INVALID_NAME"},{no:9,name:"DUPLICATE_HANDLE"},{no:10,name:"DUPLICATE_NAME"}])),n1=(()=>[{no:1,name:"track_sid",kind:"scalar",T:9}],eS.makeEnum("livekit.EncodedFileType",[{no:0,name:"DEFAULT_FILETYPE"},{no:1,name:"MP4"},{no:2,name:"OGG"},{no:3,name:"MP3"}])),n2=eS.makeEnum("livekit.SegmentedFileProtocol",[{no:0,name:"DEFAULT_SEGMENTED_FILE_PROTOCOL"},{no:1,name:"HLS_PROTOCOL"}]),n3=eS.makeEnum("livekit.SegmentedFileSuffix",[{no:0,name:"INDEX"},{no:1,name:"TIMESTAMP"}]),n9=eS.makeEnum("livekit.ImageFileSuffix",[{no:0,name:"IMAGE_SUFFIX_INDEX"},{no:1,name:"IMAGE_SUFFIX_TIMESTAMP"},{no:2,name:"IMAGE_SUFFIX_NONE_OVERWRITE"}]),n4=eS.makeEnum("livekit.StreamProtocol",[{no:0,name:"DEFAULT_PROTOCOL"},{no:1,name:"RTMP"},{no:2,name:"SRT"}]),n5=eS.makeEnum("livekit.AudioMixing",[{no:0,name:"DEFAULT_MIXING"},{no:1,name:"DUAL_CHANNEL_AGENT"},{no:2,name:"DUAL_CHANNEL_ALTERNATE"}]),n6=eS.makeEnum("livekit.EncodingOptionsPreset",[{no:0,name:"H264_720P_30"},{no:1,name:"H264_720P_60"},{no:2,name:"H264_1080P_30"},{no:3,name:"H264_1080P_60"},{no:4,name:"PORTRAIT_H264_720P_30"},{no:5,name:"PORTRAIT_H264_720P_60"},{no:6,name:"PORTRAIT_H264_1080P_30"},{no:7,name:"PORTRAIT_H264_1080P_60"}]),n8=eS.makeEnum("livekit.EgressStatus",[{no:0,name:"EGRESS_STARTING"},{no:1,name:"EGRESS_ACTIVE"},{no:2,name:"EGRESS_ENDING"},{no:3,name:"EGRESS_COMPLETE"},{no:4,name:"EGRESS_FAILED"},{no:5,name:"EGRESS_ABORTED"},{no:6,name:"EGRESS_LIMIT_REACHED"}]),n7=eS.makeEnum("livekit.EgressSourceType",[{no:0,name:"EGRESS_SOURCE_TYPE_WEB",localName:"WEB"},{no:1,name:"EGRESS_SOURCE_TYPE_SDK",localName:"SDK"}]),te=eS.makeMessageType("livekit.RoomCompositeEgressRequest",()=>[{no:1,name:"room_name",kind:"scalar",T:9},{no:2,name:"layout",kind:"scalar",T:9},{no:3,name:"audio_only",kind:"scalar",T:8},{no:15,name:"audio_mixing",kind:"enum",T:eS.getEnumType(n5)},{no:4,name:"video_only",kind:"scalar",T:8},{no:5,name:"custom_base_url",kind:"scalar",T:9},{no:6,name:"file",kind:"message",T:ti,oneof:"output"},{no:7,name:"stream",kind:"message",T:tf,oneof:"output"},{no:10,name:"segments",kind:"message",T:to,oneof:"output"},{no:8,name:"preset",kind:"enum",T:eS.getEnumType(n6),oneof:"options"},{no:9,name:"advanced",kind:"message",T:tg,oneof:"options"},{no:11,name:"file_outputs",kind:"message",T:ti,repeated:!0},{no:12,name:"stream_outputs",kind:"message",T:tf,repeated:!0},{no:13,name:"segment_outputs",kind:"message",T:to,repeated:!0},{no:14,name:"image_outputs",kind:"message",T:tl,repeated:!0},{no:16,name:"webhooks",kind:"message",T:nT,repeated:!0}]),tn=eS.makeMessageType("livekit.WebEgressRequest",()=>[{no:1,name:"url",kind:"scalar",T:9},{no:2,name:"audio_only",kind:"scalar",T:8},{no:3,name:"video_only",kind:"scalar",T:8},{no:12,name:"await_start_signal",kind:"scalar",T:8},{no:4,name:"file",kind:"message",T:ti,oneof:"output"},{no:5,name:"stream",kind:"message",T:tf,oneof:"output"},{no:6,name:"segments",kind:"message",T:to,oneof:"output"},{no:7,name:"preset",kind:"enum",T:eS.getEnumType(n6),oneof:"options"},{no:8,name:"advanced",kind:"message",T:tg,oneof:"options"},{no:9,name:"file_outputs",kind:"message",T:ti,repeated:!0},{no:10,name:"stream_outputs",kind:"message",T:tf,repeated:!0},{no:11,name:"segment_outputs",kind:"message",T:to,repeated:!0},{no:13,name:"image_outputs",kind:"message",T:tl,repeated:!0},{no:14,name:"webhooks",kind:"message",T:nT,repeated:!0}]),tt=eS.makeMessageType("livekit.ParticipantEgressRequest",()=>[{no:1,name:"room_name",kind:"scalar",T:9},{no:2,name:"identity",kind:"scalar",T:9},{no:3,name:"screen_share",kind:"scalar",T:8},{no:4,name:"preset",kind:"enum",T:eS.getEnumType(n6),oneof:"options"},{no:5,name:"advanced",kind:"message",T:tg,oneof:"options"},{no:6,name:"file_outputs",kind:"message",T:ti,repeated:!0},{no:7,name:"stream_outputs",kind:"message",T:tf,repeated:!0},{no:8,name:"segment_outputs",kind:"message",T:to,repeated:!0},{no:9,name:"image_outputs",kind:"message",T:tl,repeated:!0},{no:10,name:"webhooks",kind:"message",T:nT,repeated:!0}]),ta=eS.makeMessageType("livekit.TrackCompositeEgressRequest",()=>[{no:1,name:"room_name",kind:"scalar",T:9},{no:2,name:"audio_track_id",kind:"scalar",T:9},{no:3,name:"video_track_id",kind:"scalar",T:9},{no:4,name:"file",kind:"message",T:ti,oneof:"output"},{no:5,name:"stream",kind:"message",T:tf,oneof:"output"},{no:8,name:"segments",kind:"message",T:to,oneof:"output"},{no:6,name:"preset",kind:"enum",T:eS.getEnumType(n6),oneof:"options"},{no:7,name:"advanced",kind:"message",T:tg,oneof:"options"},{no:11,name:"file_outputs",kind:"message",T:ti,repeated:!0},{no:12,name:"stream_outputs",kind:"message",T:tf,repeated:!0},{no:13,name:"segment_outputs",kind:"message",T:to,repeated:!0},{no:14,name:"image_outputs",kind:"message",T:tl,repeated:!0},{no:15,name:"webhooks",kind:"message",T:nT,repeated:!0}]),tr=eS.makeMessageType("livekit.TrackEgressRequest",()=>[{no:1,name:"room_name",kind:"scalar",T:9},{no:2,name:"track_id",kind:"scalar",T:9},{no:3,name:"file",kind:"message",T:ts,oneof:"output"},{no:4,name:"websocket_url",kind:"scalar",T:9,oneof:"output"},{no:5,name:"webhooks",kind:"message",T:nT,repeated:!0}]),ti=eS.makeMessageType("livekit.EncodedFileOutput",()=>[{no:1,name:"file_type",kind:"enum",T:eS.getEnumType(n1)},{no:2,name:"filepath",kind:"scalar",T:9},{no:6,name:"disable_manifest",kind:"scalar",T:8},{no:3,name:"s3",kind:"message",T:tc,oneof:"output"},{no:4,name:"gcp",kind:"message",T:tu,oneof:"output"},{no:5,name:"azure",kind:"message",T:td,oneof:"output"},{no:7,name:"aliOSS",kind:"message",T:tm,oneof:"output"}]),to=eS.makeMessageType("livekit.SegmentedFileOutput",()=>[{no:1,name:"protocol",kind:"enum",T:eS.getEnumType(n2)},{no:2,name:"filename_prefix",kind:"scalar",T:9},{no:3,name:"playlist_name",kind:"scalar",T:9},{no:11,name:"live_playlist_name",kind:"scalar",T:9},{no:4,name:"segment_duration",kind:"scalar",T:13},{no:10,name:"filename_suffix",kind:"enum",T:eS.getEnumType(n3)},{no:8,name:"disable_manifest",kind:"scalar",T:8},{no:5,name:"s3",kind:"message",T:tc,oneof:"output"},{no:6,name:"gcp",kind:"message",T:tu,oneof:"output"},{no:7,name:"azure",kind:"message",T:td,oneof:"output"},{no:9,name:"aliOSS",kind:"message",T:tm,oneof:"output"}]),ts=eS.makeMessageType("livekit.DirectFileOutput",()=>[{no:1,name:"filepath",kind:"scalar",T:9},{no:5,name:"disable_manifest",kind:"scalar",T:8},{no:2,name:"s3",kind:"message",T:tc,oneof:"output"},{no:3,name:"gcp",kind:"message",T:tu,oneof:"output"},{no:4,name:"azure",kind:"message",T:td,oneof:"output"},{no:6,name:"aliOSS",kind:"message",T:tm,oneof:"output"}]),tl=eS.makeMessageType("livekit.ImageOutput",()=>[{no:1,name:"capture_interval",kind:"scalar",T:13},{no:2,name:"width",kind:"scalar",T:5},{no:3,name:"height",kind:"scalar",T:5},{no:4,name:"filename_prefix",kind:"scalar",T:9},{no:5,name:"filename_suffix",kind:"enum",T:eS.getEnumType(n9)},{no:6,name:"image_codec",kind:"enum",T:eS.getEnumType(ej)},{no:7,name:"disable_manifest",kind:"scalar",T:8},{no:8,name:"s3",kind:"message",T:tc,oneof:"output"},{no:9,name:"gcp",kind:"message",T:tu,oneof:"output"},{no:10,name:"azure",kind:"message",T:td,oneof:"output"},{no:11,name:"aliOSS",kind:"message",T:tm,oneof:"output"}]),tc=eS.makeMessageType("livekit.S3Upload",()=>[{no:1,name:"access_key",kind:"scalar",T:9},{no:2,name:"secret",kind:"scalar",T:9},{no:11,name:"session_token",kind:"scalar",T:9},{no:12,name:"assume_role_arn",kind:"scalar",T:9},{no:13,name:"assume_role_external_id",kind:"scalar",T:9},{no:3,name:"region",kind:"scalar",T:9},{no:4,name:"endpoint",kind:"scalar",T:9},{no:5,name:"bucket",kind:"scalar",T:9},{no:6,name:"force_path_style",kind:"scalar",T:8},{no:7,name:"metadata",kind:"map",K:9,V:{kind:"scalar",T:9}},{no:8,name:"tagging",kind:"scalar",T:9},{no:9,name:"content_disposition",kind:"scalar",T:9},{no:10,name:"proxy",kind:"message",T:tp}]),tu=eS.makeMessageType("livekit.GCPUpload",()=>[{no:1,name:"credentials",kind:"scalar",T:9},{no:2,name:"bucket",kind:"scalar",T:9},{no:3,name:"proxy",kind:"message",T:tp}]),td=eS.makeMessageType("livekit.AzureBlobUpload",()=>[{no:1,name:"account_name",kind:"scalar",T:9},{no:2,name:"account_key",kind:"scalar",T:9},{no:3,name:"container_name",kind:"scalar",T:9}]),tm=eS.makeMessageType("livekit.AliOSSUpload",()=>[{no:1,name:"access_key",kind:"scalar",T:9},{no:2,name:"secret",kind:"scalar",T:9},{no:3,name:"region",kind:"scalar",T:9},{no:4,name:"endpoint",kind:"scalar",T:9},{no:5,name:"bucket",kind:"scalar",T:9}]),tp=eS.makeMessageType("livekit.ProxyConfig",()=>[{no:1,name:"url",kind:"scalar",T:9},{no:2,name:"username",kind:"scalar",T:9},{no:3,name:"password",kind:"scalar",T:9}]),tf=eS.makeMessageType("livekit.StreamOutput",()=>[{no:1,name:"protocol",kind:"enum",T:eS.getEnumType(n4)},{no:2,name:"urls",kind:"scalar",T:9,repeated:!0}]),tg=eS.makeMessageType("livekit.EncodingOptions",()=>[{no:1,name:"width",kind:"scalar",T:5},{no:2,name:"height",kind:"scalar",T:5},{no:3,name:"depth",kind:"scalar",T:5},{no:4,name:"framerate",kind:"scalar",T:5},{no:5,name:"audio_codec",kind:"enum",T:eS.getEnumType(eF)},{no:6,name:"audio_bitrate",kind:"scalar",T:5},{no:11,name:"audio_quality",kind:"scalar",T:5},{no:7,name:"audio_frequency",kind:"scalar",T:5},{no:8,name:"video_codec",kind:"enum",T:eS.getEnumType(eB)},{no:9,name:"video_bitrate",kind:"scalar",T:5},{no:12,name:"video_quality",kind:"scalar",T:5},{no:10,name:"key_frame_interval",kind:"scalar",T:1}]),tT=(()=>[{no:1,name:"egress_id",kind:"scalar",T:9},{no:2,name:"room_id",kind:"scalar",T:9},{no:13,name:"room_name",kind:"scalar",T:9},{no:26,name:"source_type",kind:"enum",T:eS.getEnumType(n7)},{no:3,name:"status",kind:"enum",T:eS.getEnumType(n8)},{no:10,name:"started_at",kind:"scalar",T:3},{no:11,name:"ended_at",kind:"scalar",T:3},{no:18,name:"updated_at",kind:"scalar",T:3},{no:21,name:"details",kind:"scalar",T:9},{no:9,name:"error",kind:"scalar",T:9},{no:22,name:"error_code",kind:"scalar",T:5},{no:4,name:"room_composite",kind:"message",T:te,oneof:"request"},{no:14,name:"web",kind:"message",T:tn,oneof:"request"},{no:19,name:"participant",kind:"message",T:tt,oneof:"request"},{no:5,name:"track_composite",kind:"message",T:ta,oneof:"request"},{no:6,name:"track",kind:"message",T:tr,oneof:"request"},{no:7,name:"stream",kind:"message",T:tT,oneof:"result"},{no:8,name:"file",kind:"message",T:tv,oneof:"result"},{no:12,name:"segments",kind:"message",T:ty,oneof:"result"},{no:15,name:"stream_results",kind:"message",T:th,repeated:!0},{no:16,name:"file_results",kind:"message",T:tv,repeated:!0},{no:17,name:"segment_results",kind:"message",T:ty,repeated:!0},{no:20,name:"image_results",kind:"message",T:t_,repeated:!0},{no:23,name:"manifest_location",kind:"scalar",T:9},{no:25,name:"backup_storage_used",kind:"scalar",T:8}],eS.makeMessageType("livekit.StreamInfoList",()=>[{no:1,name:"info",kind:"message",T:th,repeated:!0}])),th=eS.makeMessageType("livekit.StreamInfo",()=>[{no:1,name:"url",kind:"scalar",T:9},{no:2,name:"started_at",kind:"scalar",T:3},{no:3,name:"ended_at",kind:"scalar",T:3},{no:4,name:"duration",kind:"scalar",T:3},{no:5,name:"status",kind:"enum",T:eS.getEnumType(tk)},{no:6,name:"error",kind:"scalar",T:9},{no:7,name:"last_retry_at",kind:"scalar",T:3},{no:8,name:"retries",kind:"scalar",T:13}]),tk=eS.makeEnum("livekit.StreamInfo.Status",[{no:0,name:"ACTIVE"},{no:1,name:"FINISHED"},{no:2,name:"FAILED"}]),tv=eS.makeMessageType("livekit.FileInfo",()=>[{no:1,name:"filename",kind:"scalar",T:9},{no:2,name:"started_at",kind:"scalar",T:3},{no:3,name:"ended_at",kind:"scalar",T:3},{no:6,name:"duration",kind:"scalar",T:3},{no:4,name:"size",kind:"scalar",T:3},{no:5,name:"location",kind:"scalar",T:9}]),ty=eS.makeMessageType("livekit.SegmentsInfo",()=>[{no:1,name:"playlist_name",kind:"scalar",T:9},{no:8,name:"live_playlist_name",kind:"scalar",T:9},{no:2,name:"duration",kind:"scalar",T:3},{no:3,name:"size",kind:"scalar",T:3},{no:4,name:"playlist_location",kind:"scalar",T:9},{no:9,name:"live_playlist_location",kind:"scalar",T:9},{no:5,name:"segment_count",kind:"scalar",T:3},{no:6,name:"started_at",kind:"scalar",T:3},{no:7,name:"ended_at",kind:"scalar",T:3}]),t_=eS.makeMessageType("livekit.ImagesInfo",()=>[{no:4,name:"filename_prefix",kind:"scalar",T:9},{no:1,name:"image_count",kind:"scalar",T:3},{no:2,name:"started_at",kind:"scalar",T:3},{no:3,name:"ended_at",kind:"scalar",T:3}]),tE=eS.makeMessageType("livekit.AutoParticipantEgress",()=>[{no:1,name:"preset",kind:"enum",T:eS.getEnumType(n6),oneof:"options"},{no:2,name:"advanced",kind:"message",T:tg,oneof:"options"},{no:3,name:"file_outputs",kind:"message",T:ti,repeated:!0},{no:4,name:"segment_outputs",kind:"message",T:to,repeated:!0}]),tb=eS.makeMessageType("livekit.AutoTrackEgress",()=>[{no:1,name:"filepath",kind:"scalar",T:9},{no:5,name:"disable_manifest",kind:"scalar",T:8},{no:2,name:"s3",kind:"message",T:tc,oneof:"output"},{no:3,name:"gcp",kind:"message",T:tu,oneof:"output"},{no:4,name:"azure",kind:"message",T:td,oneof:"output"},{no:6,name:"aliOSS",kind:"message",T:tm,oneof:"output"}]),tS=eS.makeEnum("livekit.IngressInput",[{no:0,name:"RTMP_INPUT"},{no:1,name:"WHIP_INPUT"},{no:2,name:"URL_INPUT"}]),tw=eS.makeEnum("livekit.IngressAudioEncodingPreset",[{no:0,name:"OPUS_STEREO_96KBPS"},{no:1,name:"OPUS_MONO_64KBS"}]),tI=eS.makeEnum("livekit.IngressVideoEncodingPreset",[{no:0,name:"H264_720P_30FPS_3_LAYERS"},{no:1,name:"H264_1080P_30FPS_3_LAYERS"},{no:2,name:"H264_540P_25FPS_2_LAYERS"},{no:3,name:"H264_720P_30FPS_1_LAYER"},{no:4,name:"H264_1080P_30FPS_1_LAYER"},{no:5,name:"H264_720P_30FPS_3_LAYERS_HIGH_MOTION"},{no:6,name:"H264_1080P_30FPS_3_LAYERS_HIGH_MOTION"},{no:7,name:"H264_540P_25FPS_2_LAYERS_HIGH_MOTION"},{no:8,name:"H264_720P_30FPS_1_LAYER_HIGH_MOTION"},{no:9,name:"H264_1080P_30FPS_1_LAYER_HIGH_MOTION"}]),tA=eS.makeMessageType("livekit.IngressAudioOptions",()=>[{no:1,name:"name",kind:"scalar",T:9},{no:2,name:"source",kind:"enum",T:eS.getEnumType(eG)},{no:3,name:"preset",kind:"enum",T:eS.getEnumType(tw),oneof:"encoding_options"},{no:4,name:"options",kind:"message",T:tP,oneof:"encoding_options"}]),tR=eS.makeMessageType("livekit.IngressVideoOptions",()=>[{no:1,name:"name",kind:"scalar",T:9},{no:2,name:"source",kind:"enum",T:eS.getEnumType(eG)},{no:3,name:"preset",kind:"enum",T:eS.getEnumType(tI),oneof:"encoding_options"},{no:4,name:"options",kind:"message",T:tN,oneof:"encoding_options"}]),tP=eS.makeMessageType("livekit.IngressAudioEncodingOptions",()=>[{no:1,name:"audio_codec",kind:"enum",T:eS.getEnumType(eF)},{no:2,name:"bitrate",kind:"scalar",T:13},{no:3,name:"disable_dtx",kind:"scalar",T:8},{no:4,name:"channels",kind:"scalar",T:13}]),tN=eS.makeMessageType("livekit.IngressVideoEncodingOptions",()=>[{no:1,name:"video_codec",kind:"enum",T:eS.getEnumType(eB)},{no:2,name:"frame_rate",kind:"scalar",T:1},{no:3,name:"layers",kind:"message",T:e7,repeated:!0}]),tO=(()=>[{no:1,name:"ingress_id",kind:"scalar",T:9},{no:2,name:"name",kind:"scalar",T:9},{no:3,name:"stream_key",kind:"scalar",T:9},{no:4,name:"url",kind:"scalar",T:9},{no:5,name:"input_type",kind:"enum",T:eS.getEnumType(tS)},{no:13,name:"bypass_transcoding",kind:"scalar",T:8},{no:15,name:"enable_transcoding",kind:"scalar",T:8,opt:!0},{no:6,name:"audio",kind:"message",T:tA},{no:7,name:"video",kind:"message",T:tR},{no:8,name:"room_name",kind:"scalar",T:9},{no:9,name:"participant_identity",kind:"scalar",T:9},{no:10,name:"participant_name",kind:"scalar",T:9},{no:14,name:"participant_metadata",kind:"scalar",T:9},{no:11,name:"reusable",kind:"scalar",T:8},{no:12,name:"state",kind:"message",T:tO},{no:16,name:"enabled",kind:"scalar",T:8,opt:!0}],eS.makeMessageType("livekit.IngressState",()=>[{no:1,name:"status",kind:"enum",T:eS.getEnumType(tM)},{no:2,name:"error",kind:"scalar",T:9},{no:3,name:"video",kind:"message",T:tC},{no:4,name:"audio",kind:"message",T:tL},{no:5,name:"room_id",kind:"scalar",T:9},{no:7,name:"started_at",kind:"scalar",T:3},{no:8,name:"ended_at",kind:"scalar",T:3},{no:10,name:"updated_at",kind:"scalar",T:3},{no:9,name:"resource_id",kind:"scalar",T:9},{no:6,name:"tracks",kind:"message",T:e5,repeated:!0}])),tM=eS.makeEnum("livekit.IngressState.Status",[{no:0,name:"ENDPOINT_INACTIVE"},{no:1,name:"ENDPOINT_BUFFERING"},{no:2,name:"ENDPOINT_PUBLISHING"},{no:3,name:"ENDPOINT_ERROR"},{no:4,name:"ENDPOINT_COMPLETE"}]),tC=eS.makeMessageType("livekit.InputVideoState",()=>[{no:1,name:"mime_type",kind:"scalar",T:9},{no:2,name:"average_bitrate",kind:"scalar",T:13},{no:3,name:"width",kind:"scalar",T:13},{no:4,name:"height",kind:"scalar",T:13},{no:5,name:"framerate",kind:"scalar",T:1}]),tL=eS.makeMessageType("livekit.InputAudioState",()=>[{no:1,name:"mime_type",kind:"scalar",T:9},{no:2,name:"average_bitrate",kind:"scalar",T:13},{no:3,name:"channels",kind:"scalar",T:13},{no:4,name:"sample_rate",kind:"scalar",T:13}]),tx=eS.makeMessageType("livekit.RoomEgress",()=>[{no:1,name:"room",kind:"message",T:te},{no:3,name:"participant",kind:"message",T:tE},{no:2,name:"tracks",kind:"message",T:tb}]),tU=eS.makeMessageType("livekit.RoomConfiguration",()=>[{no:1,name:"name",kind:"scalar",T:9},{no:2,name:"empty_timeout",kind:"scalar",T:13},{no:3,name:"departure_timeout",kind:"scalar",T:13},{no:4,name:"max_participants",kind:"scalar",T:13},{no:11,name:"metadata",kind:"scalar",T:9},{no:5,name:"egress",kind:"message",T:tx},{no:7,name:"min_playout_delay",kind:"scalar",T:13},{no:8,name:"max_playout_delay",kind:"scalar",T:13},{no:9,name:"sync_streams",kind:"scalar",T:8},{no:10,name:"agents",kind:"message",T:nb,repeated:!0}]),tD=eS.makeEnum("livekit.SIPStatusCode",[{no:0,name:"SIP_STATUS_UNKNOWN"},{no:100,name:"SIP_STATUS_TRYING"},{no:180,name:"SIP_STATUS_RINGING"},{no:181,name:"SIP_STATUS_CALL_IS_FORWARDED"},{no:182,name:"SIP_STATUS_QUEUED"},{no:183,name:"SIP_STATUS_SESSION_PROGRESS"},{no:199,name:"SIP_STATUS_EARLY_DIALOG_TERMINATED"},{no:200,name:"SIP_STATUS_OK"},{no:202,name:"SIP_STATUS_ACCEPTED"},{no:204,name:"SIP_STATUS_NO_NOTIFICATION"},{no:300,name:"SIP_STATUS_MULTIPLE_CHOICES"},{no:301,name:"SIP_STATUS_MOVED_PERMANENTLY"},{no:302,name:"SIP_STATUS_MOVED_TEMPORARILY"},{no:305,name:"SIP_STATUS_USE_PROXY"},{no:380,name:"SIP_STATUS_ALTERNATIVE_SERVICE"},{no:400,name:"SIP_STATUS_BAD_REQUEST"},{no:401,name:"SIP_STATUS_UNAUTHORIZED"},{no:402,name:"SIP_STATUS_PAYMENT_REQUIRED"},{no:403,name:"SIP_STATUS_FORBIDDEN"},{no:404,name:"SIP_STATUS_NOTFOUND"},{no:405,name:"SIP_STATUS_METHOD_NOT_ALLOWED"},{no:406,name:"SIP_STATUS_NOT_ACCEPTABLE"},{no:407,name:"SIP_STATUS_PROXY_AUTH_REQUIRED"},{no:408,name:"SIP_STATUS_REQUEST_TIMEOUT"},{no:409,name:"SIP_STATUS_CONFLICT"},{no:410,name:"SIP_STATUS_GONE"},{no:411,name:"SIP_STATUS_LENGTH_REQUIRED"},{no:412,name:"SIP_STATUS_CONDITIONAL_REQUEST_FAILED"},{no:413,name:"SIP_STATUS_REQUEST_ENTITY_TOO_LARGE"},{no:414,name:"SIP_STATUS_REQUEST_URI_TOO_LONG"},{no:415,name:"SIP_STATUS_UNSUPPORTED_MEDIA_TYPE"},{no:416,name:"SIP_STATUS_REQUESTED_RANGE_NOT_SATISFIABLE"},{no:417,name:"SIP_STATUS_UNKNOWN_RESOURCE_PRIORITY"},{no:420,name:"SIP_STATUS_BAD_EXTENSION"},{no:421,name:"SIP_STATUS_EXTENSION_REQUIRED"},{no:422,name:"SIP_STATUS_SESSION_INTERVAL_TOO_SMALL"},{no:423,name:"SIP_STATUS_INTERVAL_TOO_BRIEF"},{no:424,name:"SIP_STATUS_BAD_LOCATION_INFORMATION"},{no:425,name:"SIP_STATUS_BAD_ALERT_MESSAGE"},{no:428,name:"SIP_STATUS_USE_IDENTITY_HEADER"},{no:429,name:"SIP_STATUS_PROVIDE_REFERRER_IDENTITY"},{no:430,name:"SIP_STATUS_FLOW_FAILED"},{no:433,name:"SIP_STATUS_ANONYMITY_DISALLOWED"},{no:436,name:"SIP_STATUS_BAD_IDENTITY_INFO"},{no:437,name:"SIP_STATUS_UNSUPPORTED_CERTIFICATE"},{no:438,name:"SIP_STATUS_INVALID_IDENTITY_HEADER"},{no:439,name:"SIP_STATUS_FIRST_HOP_LACKS_OUTBOUND_SUPPORT"},{no:440,name:"SIP_STATUS_MAX_BREADTH_EXCEEDED"},{no:469,name:"SIP_STATUS_BAD_INFO_PACKAGE"},{no:470,name:"SIP_STATUS_CONSENT_NEEDED"},{no:480,name:"SIP_STATUS_TEMPORARILY_UNAVAILABLE"},{no:481,name:"SIP_STATUS_CALL_TRANSACTION_DOES_NOT_EXISTS"},{no:482,name:"SIP_STATUS_LOOP_DETECTED"},{no:483,name:"SIP_STATUS_TOO_MANY_HOPS"},{no:484,name:"SIP_STATUS_ADDRESS_INCOMPLETE"},{no:485,name:"SIP_STATUS_AMBIGUOUS"},{no:486,name:"SIP_STATUS_BUSY_HERE"},{no:487,name:"SIP_STATUS_REQUEST_TERMINATED"},{no:488,name:"SIP_STATUS_NOT_ACCEPTABLE_HERE"},{no:489,name:"SIP_STATUS_BAD_EVENT"},{no:491,name:"SIP_STATUS_REQUEST_PENDING"},{no:493,name:"SIP_STATUS_UNDECIPHERABLE"},{no:494,name:"SIP_STATUS_SECURITY_AGREEMENT_REQUIRED"},{no:500,name:"SIP_STATUS_INTERNAL_SERVER_ERROR"},{no:501,name:"SIP_STATUS_NOT_IMPLEMENTED"},{no:502,name:"SIP_STATUS_BAD_GATEWAY"},{no:503,name:"SIP_STATUS_SERVICE_UNAVAILABLE"},{no:504,name:"SIP_STATUS_GATEWAY_TIMEOUT"},{no:505,name:"SIP_STATUS_VERSION_NOT_SUPPORTED"},{no:513,name:"SIP_STATUS_MESSAGE_TOO_LARGE"},{no:600,name:"SIP_STATUS_GLOBAL_BUSY_EVERYWHERE"},{no:603,name:"SIP_STATUS_GLOBAL_DECLINE"},{no:604,name:"SIP_STATUS_GLOBAL_DOES_NOT_EXIST_ANYWHERE"},{no:606,name:"SIP_STATUS_GLOBAL_NOT_ACCEPTABLE"},{no:607,name:"SIP_STATUS_GLOBAL_UNWANTED"},{no:608,name:"SIP_STATUS_GLOBAL_REJECTED"}]),tF=eS.makeEnum("livekit.SIPTransport",[{no:0,name:"SIP_TRANSPORT_AUTO"},{no:1,name:"SIP_TRANSPORT_UDP"},{no:2,name:"SIP_TRANSPORT_TCP"},{no:3,name:"SIP_TRANSPORT_TLS"}]),tB=eS.makeEnum("livekit.SIPHeaderOptions",[{no:0,name:"SIP_NO_HEADERS"},{no:1,name:"SIP_X_HEADERS"},{no:2,name:"SIP_ALL_HEADERS"}]),tj=eS.makeEnum("livekit.SIPMediaEncryption",[{no:0,name:"SIP_MEDIA_ENCRYPT_DISABLE"},{no:1,name:"SIP_MEDIA_ENCRYPT_ALLOW"},{no:2,name:"SIP_MEDIA_ENCRYPT_REQUIRE"}]),tV=eS.makeEnum("livekit.ProviderType",[{no:0,name:"PROVIDER_TYPE_UNKNOWN",localName:"UNKNOWN"},{no:1,name:"PROVIDER_TYPE_INTERNAL",localName:"INTERNAL"},{no:2,name:"PROVIDER_TYPE_EXTERNAL",localName:"EXTERNAL"}]),tH=(()=>[{no:1,name:"code",kind:"enum",T:eS.getEnumType(tD)},{no:2,name:"status",kind:"scalar",T:9}],eS.makeEnum("livekit.SIPTrunkInfo.TrunkKind",[{no:0,name:"TRUNK_LEGACY"},{no:1,name:"TRUNK_INBOUND"},{no:2,name:"TRUNK_OUTBOUND"}])),tG=(()=>[{no:1,name:"sip_trunk_id",kind:"scalar",T:9},{no:2,name:"name",kind:"scalar",T:9},{no:3,name:"metadata",kind:"scalar",T:9},{no:4,name:"numbers",kind:"scalar",T:9,repeated:!0},{no:5,name:"allowed_addresses",kind:"scalar",T:9,repeated:!0},{no:6,name:"allowed_numbers",kind:"scalar",T:9,repeated:!0},{no:7,name:"auth_username",kind:"scalar",T:9},{no:8,name:"auth_password",kind:"scalar",T:9},{no:9,name:"headers",kind:"map",K:9,V:{kind:"scalar",T:9}},{no:10,name:"headers_to_attributes",kind:"map",K:9,V:{kind:"scalar",T:9}},{no:14,name:"attributes_to_headers",kind:"map",K:9,V:{kind:"scalar",T:9}},{no:15,name:"include_headers",kind:"enum",T:eS.getEnumType(tB)},{no:11,name:"ringing_timeout",kind:"message",T:eI},{no:12,name:"max_call_duration",kind:"message",T:eI},{no:13,name:"krisp_enabled",kind:"scalar",T:8},{no:16,name:"media_encryption",kind:"enum",T:eS.getEnumType(tj)}],eS.makeMessageType("livekit.SIPDispatchRuleDirect",()=>[{no:1,name:"room_name",kind:"scalar",T:9},{no:2,name:"pin",kind:"scalar",T:9}])),t$=eS.makeMessageType("livekit.SIPDispatchRuleIndividual",()=>[{no:1,name:"room_prefix",kind:"scalar",T:9},{no:2,name:"pin",kind:"scalar",T:9}]),tJ=eS.makeMessageType("livekit.SIPDispatchRuleCallee",()=>[{no:1,name:"room_prefix",kind:"scalar",T:9},{no:2,name:"pin",kind:"scalar",T:9},{no:3,name:"randomize",kind:"scalar",T:8}]),tY=eS.makeMessageType("livekit.SIPDispatchRule",()=>[{no:1,name:"dispatch_rule_direct",kind:"message",T:tG,oneof:"rule"},{no:2,name:"dispatch_rule_individual",kind:"message",T:t$,oneof:"rule"},{no:3,name:"dispatch_rule_callee",kind:"message",T:tJ,oneof:"rule"}]);()=>[{no:1,name:"sip_dispatch_rule_id",kind:"scalar",T:9},{no:2,name:"rule",kind:"message",T:tY},{no:3,name:"trunk_ids",kind:"scalar",T:9,repeated:!0},{no:4,name:"hide_phone_number",kind:"scalar",T:8},{no:7,name:"inbound_numbers",kind:"scalar",T:9,repeated:!0},{no:5,name:"name",kind:"scalar",T:9},{no:6,name:"metadata",kind:"scalar",T:9},{no:8,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}},{no:9,name:"room_preset",kind:"scalar",T:9},{no:10,name:"room_config",kind:"message",T:tU},{no:11,name:"krisp_enabled",kind:"scalar",T:8},{no:12,name:"media_encryption",kind:"enum",T:eS.getEnumType(tj)}],e.s(["ParticipantInfo_Kind",()=>e2,"TrackSource",()=>eG],852687);var tq=e.i(856038),tW=e.i(484169);let tK=Math.min,tQ=Math.max,tX=Math.round,tz=Math.floor,tZ=e=>({x:e,y:e}),t0={left:"right",right:"left",bottom:"top",top:"bottom"},t1={start:"end",end:"start"};function t2(e,n){return"function"==typeof e?e(n):e}function t3(e){return e.split("-")[0]}function t9(e){return e.split("-")[1]}function t4(e){return"x"===e?"y":"x"}function t5(e){return"y"===e?"height":"width"}let t6=new Set(["top","bottom"]);function t8(e){return t6.has(t3(e))?"y":"x"}function t7(e){return e.replace(/start|end/g,e=>t1[e])}let ae=["left","right"],an=["right","left"],at=["top","bottom"],aa=["bottom","top"];function ar(e){return e.replace(/left|right|bottom|top/g,e=>t0[e])}function ai(e){let{x:n,y:t,width:a,height:r}=e;return{width:a,height:r,top:t,left:n,right:n+a,bottom:t+r,x:n,y:t}}function ao(e,n,t){let a,{reference:r,floating:i}=e,o=t8(n),s=t4(t8(n)),l=t5(s),c=t3(n),u="y"===o,d=r.x+r.width/2-i.width/2,m=r.y+r.height/2-i.height/2,p=r[l]/2-i[l]/2;switch(c){case"top":a={x:d,y:r.y-i.height};break;case"bottom":a={x:d,y:r.y+r.height};break;case"right":a={x:r.x+r.width,y:m};break;case"left":a={x:r.x-i.width,y:m};break;default:a={x:r.x,y:r.y}}switch(t9(n)){case"start":a[s]-=p*(t&&u?-1:1);break;case"end":a[s]+=p*(t&&u?-1:1)}return a}let as=async(e,n,t)=>{let{placement:a="bottom",strategy:r="absolute",middleware:i=[],platform:o}=t,s=i.filter(Boolean),l=await (null==o.isRTL?void 0:o.isRTL(n)),c=await o.getElementRects({reference:e,floating:n,strategy:r}),{x:u,y:d}=ao(c,a,l),m=a,p={},f=0;for(let t=0;t<s.length;t++){let{name:i,fn:g}=s[t],{x:T,y:h,data:k,reset:v}=await g({x:u,y:d,initialPlacement:a,placement:m,strategy:r,middlewareData:p,rects:c,platform:o,elements:{reference:e,floating:n}});u=T??u,d=h??d,p={...p,[i]:{...p[i],...k}},v&&f<=50&&(f++,"object"==typeof v&&(v.placement&&(m=v.placement),v.rects&&(c=!0===v.rects?await o.getElementRects({reference:e,floating:n,strategy:r}):v.rects),{x:u,y:d}=ao(c,m,l)),t=-1)}return{x:u,y:d,placement:m,strategy:r,middlewareData:p}};async function al(e,n){var t,a;void 0===n&&(n={});let{x:r,y:i,platform:o,rects:s,elements:l,strategy:c}=e,{boundary:u="clippingAncestors",rootBoundary:d="viewport",elementContext:m="floating",altBoundary:p=!1,padding:f=0}=t2(n,e),g="number"!=typeof(a=f)?{top:0,right:0,bottom:0,left:0,...a}:{top:a,right:a,bottom:a,left:a},T=l[p?"floating"===m?"reference":"floating":m],h=ai(await o.getClippingRect({element:null==(t=await (null==o.isElement?void 0:o.isElement(T)))||t?T:T.contextElement||await (null==o.getDocumentElement?void 0:o.getDocumentElement(l.floating)),boundary:u,rootBoundary:d,strategy:c})),k="floating"===m?{x:r,y:i,width:s.floating.width,height:s.floating.height}:s.reference,v=await (null==o.getOffsetParent?void 0:o.getOffsetParent(l.floating)),y=await (null==o.isElement?void 0:o.isElement(v))&&await (null==o.getScale?void 0:o.getScale(v))||{x:1,y:1},_=ai(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:k,offsetParent:v,strategy:c}):k);return{top:(h.top-_.top+g.top)/y.y,bottom:(_.bottom-h.bottom+g.bottom)/y.y,left:(h.left-_.left+g.left)/y.x,right:(_.right-h.right+g.right)/y.x}}let ac=new Set(["left","top"]);async function au(e,n){let{placement:t,platform:a,elements:r}=e,i=await (null==a.isRTL?void 0:a.isRTL(r.floating)),o=t3(t),s=t9(t),l="y"===t8(t),c=ac.has(o)?-1:1,u=i&&l?-1:1,d=t2(n,e),{mainAxis:m,crossAxis:p,alignmentAxis:f}="number"==typeof d?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:d.mainAxis||0,crossAxis:d.crossAxis||0,alignmentAxis:d.alignmentAxis};return s&&"number"==typeof f&&(p="end"===s?-1*f:f),l?{x:p*u,y:m*c}:{x:m*c,y:p*u}}function ad(){return"u">typeof window}function am(e){return ag(e)?(e.nodeName||"").toLowerCase():"#document"}function ap(e){var n;return(null==e||null==(n=e.ownerDocument)?void 0:n.defaultView)||window}function af(e){var n;return null==(n=(ag(e)?e.ownerDocument:e.document)||window.document)?void 0:n.documentElement}function ag(e){return!!ad()&&(e instanceof Node||e instanceof ap(e).Node)}function aT(e){return!!ad()&&(e instanceof Element||e instanceof ap(e).Element)}function ah(e){return!!ad()&&(e instanceof HTMLElement||e instanceof ap(e).HTMLElement)}function ak(e){return!(!ad()||typeof ShadowRoot>"u")&&(e instanceof ShadowRoot||e instanceof ap(e).ShadowRoot)}let av=new Set(["inline","contents"]);function ay(e){let{overflow:n,overflowX:t,overflowY:a,display:r}=aO(e);return/auto|scroll|overlay|hidden|clip/.test(n+a+t)&&!av.has(r)}let a_=new Set(["table","td","th"]),aE=[":popover-open",":modal"];function ab(e){return aE.some(n=>{try{return e.matches(n)}catch{return!1}})}let aS=["transform","translate","scale","rotate","perspective"],aw=["transform","translate","scale","rotate","perspective","filter"],aI=["paint","layout","strict","content"];function aA(e){let n=aR(),t=aT(e)?aO(e):e;return aS.some(e=>!!t[e]&&"none"!==t[e])||!!t.containerType&&"normal"!==t.containerType||!n&&!!t.backdropFilter&&"none"!==t.backdropFilter||!n&&!!t.filter&&"none"!==t.filter||aw.some(e=>(t.willChange||"").includes(e))||aI.some(e=>(t.contain||"").includes(e))}function aR(){return!(typeof CSS>"u")&&!!CSS.supports&&CSS.supports("-webkit-backdrop-filter","none")}let aP=new Set(["html","body","#document"]);function aN(e){return aP.has(am(e))}function aO(e){return ap(e).getComputedStyle(e)}function aM(e){return aT(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function aC(e){if("html"===am(e))return e;let n=e.assignedSlot||e.parentNode||ak(e)&&e.host||af(e);return ak(n)?n.host:n}function aL(e,n,t){var a;void 0===n&&(n=[]),void 0===t&&(t=!0);let r=function e(n){let t=aC(n);return aN(t)?n.ownerDocument?n.ownerDocument.body:n.body:ah(t)&&ay(t)?t:e(t)}(e),i=r===(null==(a=e.ownerDocument)?void 0:a.body),o=ap(r);if(i){let e=ax(o);return n.concat(o,o.visualViewport||[],ay(r)?r:[],e&&t?aL(e):[])}return n.concat(r,aL(r,[],t))}function ax(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function aU(e){let n=aO(e),t=parseFloat(n.width)||0,a=parseFloat(n.height)||0,r=ah(e),i=r?e.offsetWidth:t,o=r?e.offsetHeight:a,s=tX(t)!==i||tX(a)!==o;return s&&(t=i,a=o),{width:t,height:a,$:s}}function aD(e){return aT(e)?e:e.contextElement}function aF(e){let n=aD(e);if(!ah(n))return tZ(1);let t=n.getBoundingClientRect(),{width:a,height:r,$:i}=aU(n),o=(i?tX(t.width):t.width)/a,s=(i?tX(t.height):t.height)/r;return o&&Number.isFinite(o)||(o=1),s&&Number.isFinite(s)||(s=1),{x:o,y:s}}let aB=tZ(0);function aj(e){let n=ap(e);return aR()&&n.visualViewport?{x:n.visualViewport.offsetLeft,y:n.visualViewport.offsetTop}:aB}function aV(e,n,t,a){var r;void 0===n&&(n=!1),void 0===t&&(t=!1);let i=e.getBoundingClientRect(),o=aD(e),s=tZ(1);n&&(a?aT(a)&&(s=aF(a)):s=aF(e));let l=(void 0===(r=t)&&(r=!1),a&&(!r||a===ap(o))&&r)?aj(o):tZ(0),c=(i.left+l.x)/s.x,u=(i.top+l.y)/s.y,d=i.width/s.x,m=i.height/s.y;if(o){let e=ap(o),n=a&&aT(a)?ap(a):a,t=e,r=ax(t);for(;r&&a&&n!==t;){let e=aF(r),n=r.getBoundingClientRect(),a=aO(r),i=n.left+(r.clientLeft+parseFloat(a.paddingLeft))*e.x,o=n.top+(r.clientTop+parseFloat(a.paddingTop))*e.y;c*=e.x,u*=e.y,d*=e.x,m*=e.y,c+=i,u+=o,r=ax(t=ap(r))}}return ai({width:d,height:m,x:c,y:u})}function aH(e,n){let t=aM(e).scrollLeft;return n?n.left+t:aV(af(e)).left+t}function aG(e,n){let t=e.getBoundingClientRect();return{x:t.left+n.scrollLeft-aH(e,t),y:t.top+n.scrollTop}}let a$=new Set(["absolute","fixed"]);function aJ(e,n,t){var a;let r;if("viewport"===n)r=function(e,n){let t=ap(e),a=af(e),r=t.visualViewport,i=a.clientWidth,o=a.clientHeight,s=0,l=0;if(r){i=r.width,o=r.height;let e=aR();(!e||e&&"fixed"===n)&&(s=r.offsetLeft,l=r.offsetTop)}let c=aH(a);if(c<=0){let e=a.ownerDocument,n=e.body,t=getComputedStyle(n),r="CSS1Compat"===e.compatMode&&parseFloat(t.marginLeft)+parseFloat(t.marginRight)||0,o=Math.abs(a.clientWidth-n.clientWidth-r);o<=25&&(i-=o)}else c<=25&&(i+=c);return{width:i,height:o,x:s,y:l}}(e,t);else if("document"===n){let n,t,i,o,s,l,c;a=af(e),n=af(a),t=aM(a),i=a.ownerDocument.body,o=tQ(n.scrollWidth,n.clientWidth,i.scrollWidth,i.clientWidth),s=tQ(n.scrollHeight,n.clientHeight,i.scrollHeight,i.clientHeight),l=-t.scrollLeft+aH(a),c=-t.scrollTop,"rtl"===aO(i).direction&&(l+=tQ(n.clientWidth,i.clientWidth)-o),r={width:o,height:s,x:l,y:c}}else if(aT(n)){let e,a,i,o,s,l;a=(e=aV(n,!0,"fixed"===t)).top+n.clientTop,i=e.left+n.clientLeft,o=ah(n)?aF(n):tZ(1),s=n.clientWidth*o.x,l=n.clientHeight*o.y,r={width:s,height:l,x:i*o.x,y:a*o.y}}else{let t=aj(e);r={x:n.x-t.x,y:n.y-t.y,width:n.width,height:n.height}}return ai(r)}function aY(e){return"static"===aO(e).position}function aq(e,n){if(!ah(e)||"fixed"===aO(e).position)return null;if(n)return n(e);let t=e.offsetParent;return af(e)===t&&(t=t.ownerDocument.body),t}function aW(e,n){var t;let a=ap(e);if(ab(e))return a;if(!ah(e)){let n=aC(e);for(;n&&!aN(n);){if(aT(n)&&!aY(n))return n;n=aC(n)}return a}let r=aq(e,n);for(;r&&(t=r,a_.has(am(t)))&&aY(r);)r=aq(r,n);return r&&aN(r)&&aY(r)&&!aA(r)?a:r||function(e){let n=aC(e);for(;ah(n)&&!aN(n);){if(aA(n))return n;if(ab(n))break;n=aC(n)}return null}(e)||a}let aK=async function(e){let n=this.getOffsetParent||aW,t=this.getDimensions,a=await t(e.floating);return{reference:function(e,n,t){let a=ah(n),r=af(n),i="fixed"===t,o=aV(e,!0,i,n),s={scrollLeft:0,scrollTop:0},l=tZ(0);if(a||!a&&!i)if(("body"!==am(n)||ay(r))&&(s=aM(n)),a){let e=aV(n,!0,i,n);l.x=e.x+n.clientLeft,l.y=e.y+n.clientTop}else r&&(l.x=aH(r));i&&!a&&r&&(l.x=aH(r));let c=!r||a||i?tZ(0):aG(r,s);return{x:o.left+s.scrollLeft-l.x-c.x,y:o.top+s.scrollTop-l.y-c.y,width:o.width,height:o.height}}(e.reference,await n(e.floating),e.strategy),floating:{x:0,y:0,width:a.width,height:a.height}}},aQ={convertOffsetParentRelativeRectToViewportRelativeRect:function(e){let{elements:n,rect:t,offsetParent:a,strategy:r}=e,i="fixed"===r,o=af(a),s=!!n&&ab(n.floating);if(a===o||s&&i)return t;let l={scrollLeft:0,scrollTop:0},c=tZ(1),u=tZ(0),d=ah(a);if((d||!d&&!i)&&(("body"!==am(a)||ay(o))&&(l=aM(a)),ah(a))){let e=aV(a);c=aF(a),u.x=e.x+a.clientLeft,u.y=e.y+a.clientTop}let m=!o||d||i?tZ(0):aG(o,l);return{width:t.width*c.x,height:t.height*c.y,x:t.x*c.x-l.scrollLeft*c.x+u.x+m.x,y:t.y*c.y-l.scrollTop*c.y+u.y+m.y}},getDocumentElement:af,getClippingRect:function(e){let{element:n,boundary:t,rootBoundary:a,strategy:r}=e,i=[..."clippingAncestors"===t?ab(n)?[]:function(e,n){let t=n.get(e);if(t)return t;let a=aL(e,[],!1).filter(e=>aT(e)&&"body"!==am(e)),r=null,i="fixed"===aO(e).position,o=i?aC(e):e;for(;aT(o)&&!aN(o);){let n=aO(o),t=aA(o);t||"fixed"!==n.position||(r=null),(i?!t&&!r:!t&&"static"===n.position&&!!r&&a$.has(r.position)||ay(o)&&!t&&function e(n,t){let a=aC(n);return!(a===t||!aT(a)||aN(a))&&("fixed"===aO(a).position||e(a,t))}(e,o))?a=a.filter(e=>e!==o):r=n,o=aC(o)}return n.set(e,a),a}(n,this._c):[].concat(t),a],o=i[0],s=i.reduce((e,t)=>{let a=aJ(n,t,r);return e.top=tQ(a.top,e.top),e.right=tK(a.right,e.right),e.bottom=tK(a.bottom,e.bottom),e.left=tQ(a.left,e.left),e},aJ(n,o,r));return{width:s.right-s.left,height:s.bottom-s.top,x:s.left,y:s.top}},getOffsetParent:aW,getElementRects:aK,getClientRects:function(e){return Array.from(e.getClientRects())},getDimensions:function(e){let{width:n,height:t}=aU(e);return{width:n,height:t}},getScale:aF,isElement:aT,isRTL:function(e){return"rtl"===aO(e).direction}};function aX(e,n){return e.x===n.x&&e.y===n.y&&e.width===n.width&&e.height===n.height}var az="u">typeof globalThis?globalThis:"u">typeof window?window:e.g;function aZ(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var a0,a1,a2,a3,a9,a4,a5,a6,a8,a7,re,rn,rt={exports:{}},ra=rt.exports;let rr=aZ((rn||(rn=1,la=function(){var e=function(){},n="undefined",t=typeof window!==n&&typeof window.navigator!==n&&/Trident\/|MSIE /.test(window.navigator.userAgent),a=["trace","debug","info","warn","error"],r={},i=null;function o(e,n){var t=e[n];if("function"==typeof t.bind)return t.bind(e);try{return Function.prototype.bind.call(t,e)}catch{return function(){return Function.prototype.apply.apply(t,[e,arguments])}}}function s(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function l(){for(var t=this.getLevel(),r=0;r<a.length;r++){var i=a[r];this[i]=r<t?e:this.methodFactory(i,t,this.name)}if(this.log=this.debug,typeof console===n&&t<this.levels.SILENT)return"No console available for logging"}function c(e){return function(){typeof console!==n&&(l.call(this),this[e].apply(this,arguments))}}function u(a,r,i){var l;return"debug"===(l=a)&&(l="log"),typeof console!==n&&("trace"===l&&t?s:void 0!==console[l]?o(console,l):void 0!==console.log?o(console,"log"):e)||c.apply(this,arguments)}function d(e,t){var o,s,c,d=this,m="loglevel";function p(){var e;if(!(typeof window===n||!m)){try{e=window.localStorage[m]}catch{}if(typeof e===n)try{var t=window.document.cookie,a=encodeURIComponent(m),r=t.indexOf(a+"=");-1!==r&&(e=/^([^;]+)/.exec(t.slice(r+a.length+1))[1])}catch{}return void 0===d.levels[e]&&(e=void 0),e}}function f(e){var n=e;if("string"==typeof n&&void 0!==d.levels[n.toUpperCase()]&&(n=d.levels[n.toUpperCase()]),"number"==typeof n&&n>=0&&n<=d.levels.SILENT)return n;throw TypeError("log.setLevel() called with invalid level: "+e)}"string"==typeof e?m+=":"+e:"symbol"==typeof e&&(m=void 0),d.name=e,d.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},d.methodFactory=t||u,d.getLevel=function(){return c??s??o},d.setLevel=function(e,t){return c=f(e),!1!==t&&function(e){var t=(a[e]||"silent").toUpperCase();if(!(typeof window===n||!m)){try{window.localStorage[m]=t;return}catch{}try{window.document.cookie=encodeURIComponent(m)+"="+t+";"}catch{}}}(c),l.call(d)},d.setDefaultLevel=function(e){s=f(e),p()||d.setLevel(e,!1)},d.resetLevel=function(){c=null,function(){if(!(typeof window===n||!m)){try{window.localStorage.removeItem(m)}catch{}try{window.document.cookie=encodeURIComponent(m)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch{}}}(),l.call(d)},d.enableAll=function(e){d.setLevel(d.levels.TRACE,e)},d.disableAll=function(e){d.setLevel(d.levels.SILENT,e)},d.rebuild=function(){if(i!==d&&(o=f(i.getLevel())),l.call(d),i===d)for(var e in r)r[e].rebuild()},o=f(i?i.getLevel():"WARN");var g=p();null!=g&&(c=f(g)),l.call(d)}(i=new d).getLogger=function(e){if("symbol"!=typeof e&&"string"!=typeof e||""===e)throw TypeError("You must supply a name when creating a logger.");var n=r[e];return n||(n=r[e]=new d(e,i.methodFactory)),n};var m=typeof window!==n?window.log:void 0;return i.noConflict=function(){return typeof window!==n&&window.log===i&&(window.log=m),i},i.getLoggers=function(){return r},i.default=i,i},rt.exports?rt.exports=la():ra.log=la()),rt.exports));var ri=function(e,n){return(ri=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t])})(e,n)};function ro(e,n){if("function"!=typeof n&&null!==n)throw TypeError("Class extends value "+String(n)+" is not a constructor or null");function t(){this.constructor=e}ri(e,n),e.prototype=null===n?Object.create(n):(t.prototype=n.prototype,new t)}function rs(e,n){var t,a,r,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]},o=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return o.next=s(0),o.throw=s(1),o.return=s(2),"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(l){var c=[s,l];if(t)throw TypeError("Generator is already executing.");for(;o&&(o=0,c[0]&&(i=0)),i;)try{if(t=1,a&&(r=2&c[0]?a.return:c[0]?a.throw||((r=a.return)&&r.call(a),0):a.next)&&!(r=r.call(a,c[1])).done)return r;switch(a=0,r&&(c=[2&c[0],r.value]),c[0]){case 0:case 1:r=c;break;case 4:return i.label++,{value:c[1],done:!1};case 5:i.label++,a=c[1],c=[0];continue;case 7:c=i.ops.pop(),i.trys.pop();continue;default:if(!(r=(r=i.trys).length>0&&r[r.length-1])&&(6===c[0]||2===c[0])){i=0;continue}if(3===c[0]&&(!r||c[1]>r[0]&&c[1]<r[3])){i.label=c[1];break}if(6===c[0]&&i.label<r[1]){i.label=r[1],r=c;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(c);break}r[2]&&i.ops.pop(),i.trys.pop();continue}c=n.call(e,i)}catch(e){c=[6,e],a=0}finally{t=r=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}function rl(e){var n="function"==typeof Symbol&&Symbol.iterator,t=n&&e[n],a=0;if(t)return t.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&a>=e.length&&(e=void 0),{value:e&&e[a++],done:!e}}};throw TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")}function rc(e,n){var t="function"==typeof Symbol&&e[Symbol.iterator];if(!t)return e;var a,r,i=t.call(e),o=[];try{for(;(void 0===n||n-- >0)&&!(a=i.next()).done;)o.push(a.value)}catch(e){r={error:e}}finally{try{a&&!a.done&&(t=i.return)&&t.call(i)}finally{if(r)throw r.error}}return o}function ru(e,n,t){if(t||2==arguments.length)for(var a,r=0,i=n.length;r<i;r++)!a&&r in n||(a||(a=Array.prototype.slice.call(n,0,r)),a[r]=n[r]);return e.concat(a||Array.prototype.slice.call(n))}function rd(e){return this instanceof rd?(this.v=e,this):new rd(e)}function rm(e){return"function"==typeof e}function rp(e){var n=e(function(e){Error.call(e),e.stack=Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var rf=rp(function(e){return function(n){e(this),this.message=n?n.length+` errors occurred during unsubscription:
`+n.map(function(e,n){return n+1+") "+e.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=n}});function rg(e,n){if(e){var t=e.indexOf(n);0<=t&&e.splice(t,1)}}var rT=function(){var e;function n(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}return n.prototype.unsubscribe=function(){var e,n,t,a,r;if(!this.closed){this.closed=!0;var i=this._parentage;if(i)if(this._parentage=null,Array.isArray(i))try{for(var o=rl(i),s=o.next();!s.done;s=o.next())s.value.remove(this)}catch(n){e={error:n}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}else i.remove(this);var l=this.initialTeardown;if(rm(l))try{l()}catch(e){r=e instanceof rf?e.errors:[e]}var c=this._finalizers;if(c){this._finalizers=null;try{for(var u=rl(c),d=u.next();!d.done;d=u.next()){var m=d.value;try{rv(m)}catch(e){r=r??[],e instanceof rf?r=ru(ru([],rc(r)),rc(e.errors)):r.push(e)}}}catch(e){t={error:e}}finally{try{d&&!d.done&&(a=u.return)&&a.call(u)}finally{if(t)throw t.error}}}if(r)throw new rf(r)}},n.prototype.add=function(e){var t;if(e&&e!==this)if(this.closed)rv(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!=(t=this._finalizers)?t:[]).push(e)}},n.prototype._hasParent=function(e){var n=this._parentage;return n===e||Array.isArray(n)&&n.includes(e)},n.prototype._addParent=function(e){var n=this._parentage;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e},n.prototype._removeParent=function(e){var n=this._parentage;n===e?this._parentage=null:Array.isArray(n)&&rg(n,e)},n.prototype.remove=function(e){var t=this._finalizers;t&&rg(t,e),e instanceof n&&e._removeParent(this)},(e=new n).closed=!0,n.EMPTY=e,n}(),rh=rT.EMPTY;function rk(e){return e instanceof rT||e&&"closed"in e&&rm(e.remove)&&rm(e.add)&&rm(e.unsubscribe)}function rv(e){rm(e)?e():e.unsubscribe()}var ry=void 0,r_=function(e,n){for(var t=[],a=2;a<arguments.length;a++)t[a-2]=arguments[a];return setTimeout.apply(void 0,ru([e,n],rc(t)))};function rE(e){r_(function(){throw e})}function rb(){}var rS=function(e){function n(n){var t=e.call(this)||this;return t.isStopped=!1,n?(t.destination=n,rk(n)&&n.add(t)):t.destination=rA,t}return ro(n,e),n.create=function(e,n,t){return new rI(e,n,t)},n.prototype.next=function(e){this.isStopped||this._next(e)},n.prototype.error=function(e){this.isStopped||(this.isStopped=!0,this._error(e))},n.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},n.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this),this.destination=null)},n.prototype._next=function(e){this.destination.next(e)},n.prototype._error=function(e){try{this.destination.error(e)}finally{this.unsubscribe()}},n.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},n}(rT),rw=function(){function e(e){this.partialObserver=e}return e.prototype.next=function(e){var n=this.partialObserver;if(n.next)try{n.next(e)}catch(e){rE(e)}},e.prototype.error=function(e){var n=this.partialObserver;if(n.error)try{n.error(e)}catch(e){rE(e)}else rE(e)},e.prototype.complete=function(){var e=this.partialObserver;if(e.complete)try{e.complete()}catch(e){rE(e)}},e}(),rI=function(e){function n(n,t,a){var r=e.call(this)||this;return r.destination=new rw(rm(n)||!n?{next:n??void 0,error:t??void 0,complete:a??void 0}:n),r}return ro(n,e),n}(rS),rA={closed:!0,next:rb,error:function(e){throw e},complete:rb},rR="function"==typeof Symbol&&Symbol.observable||"@@observable";function rP(e){return e}var rN=function(){function e(e){e&&(this._subscribe=e)}return e.prototype.lift=function(n){var t=new e;return t.source=this,t.operator=n,t},e.prototype.subscribe=function(e,n,t){var a,r,i=this,o=!function(e){return e&&e instanceof rS||e&&rm(e.next)&&rm(e.error)&&rm(e.complete)&&rk(e)}(e)?new rI(e,n,t):e;return a=i.operator,r=i.source,o.add(a?a.call(o,r):r?i._subscribe(o):i._trySubscribe(o)),o},e.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(n){e.error(n)}},e.prototype.forEach=function(e,n){var t=this;return new(n=rO(n))(function(n,a){var r=new rI({next:function(n){try{e(n)}catch(e){a(e),r.unsubscribe()}},error:a,complete:n});t.subscribe(r)})},e.prototype._subscribe=function(e){var n;return null==(n=this.source)?void 0:n.subscribe(e)},e.prototype[rR]=function(){return this},e.prototype.pipe=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return(0===e.length?rP:1===e.length?e[0]:function(n){return e.reduce(function(e,n){return n(e)},n)})(this)},e.prototype.toPromise=function(e){var n=this;return new(e=rO(e))(function(e,t){var a;n.subscribe(function(e){return a=e},function(e){return t(e)},function(){return e(a)})})},e.create=function(n){return new e(n)},e}();function rO(e){var n;return null!=(n=e??ry)?n:Promise}function rM(e){return function(n){if(rm(null==n?void 0:n.lift))return n.lift(function(n){try{return e(n,this)}catch(e){this.error(e)}});throw TypeError("Unable to lift unknown Observable type")}}function rC(e,n,t,a,r){return new rL(e,n,t,a,r)}var rL=function(e){function n(n,t,a,r,i,o){var s=e.call(this,n)||this;return s.onFinalize=i,s.shouldUnsubscribe=o,s._next=t?function(e){try{t(e)}catch(e){n.error(e)}}:e.prototype._next,s._error=r?function(e){try{r(e)}catch(e){n.error(e)}finally{this.unsubscribe()}}:e.prototype._error,s._complete=a?function(){try{a()}catch(e){n.error(e)}finally{this.unsubscribe()}}:e.prototype._complete,s}return ro(n,e),n.prototype.unsubscribe=function(){var n;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var t=this.closed;e.prototype.unsubscribe.call(this),t||null==(n=this.onFinalize)||n.call(this)}},n}(rS),rx=rp(function(e){return function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}}),rU=function(e){function n(){var n=e.call(this)||this;return n.closed=!1,n.currentObservers=null,n.observers=[],n.isStopped=!1,n.hasError=!1,n.thrownError=null,n}return ro(n,e),n.prototype.lift=function(e){var n=new rD(this,this);return n.operator=e,n},n.prototype._throwIfClosed=function(){if(this.closed)throw new rx},n.prototype.next=function(e){var n,t;if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));try{for(var a=rl(this.currentObservers),r=a.next();!r.done;r=a.next())r.value.next(e)}catch(e){n={error:e}}finally{try{r&&!r.done&&(t=a.return)&&t.call(a)}finally{if(n)throw n.error}}}},n.prototype.error=function(e){if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=e;for(var n=this.observers;n.length;)n.shift().error(e)}},n.prototype.complete=function(){if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;for(var e=this.observers;e.length;)e.shift().complete()}},n.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(n.prototype,"observed",{get:function(){var e;return(null==(e=this.observers)?void 0:e.length)>0},enumerable:!1,configurable:!0}),n.prototype._trySubscribe=function(n){return this._throwIfClosed(),e.prototype._trySubscribe.call(this,n)},n.prototype._subscribe=function(e){return this._throwIfClosed(),this._checkFinalizedStatuses(e),this._innerSubscribe(e)},n.prototype._innerSubscribe=function(e){var n=this,t=this.hasError,a=this.isStopped,r=this.observers;return t||a?rh:(this.currentObservers=null,r.push(e),new rT(function(){n.currentObservers=null,rg(r,e)}))},n.prototype._checkFinalizedStatuses=function(e){var n=this.hasError,t=this.thrownError,a=this.isStopped;n?e.error(t):a&&e.complete()},n.prototype.asObservable=function(){var e=new rN;return e.source=this,e},n.create=function(e,n){return new rD(e,n)},n}(rN),rD=function(e){function n(n,t){var a=e.call(this)||this;return a.destination=n,a.source=t,a}return ro(n,e),n.prototype.next=function(e){var n,t;null==(t=null==(n=this.destination)?void 0:n.next)||t.call(n,e)},n.prototype.error=function(e){var n,t;null==(t=null==(n=this.destination)?void 0:n.error)||t.call(n,e)},n.prototype.complete=function(){var e,n;null==(n=null==(e=this.destination)?void 0:e.complete)||n.call(e)},n.prototype._subscribe=function(e){var n,t;return null!=(t=null==(n=this.source)?void 0:n.subscribe(e))?t:rh},n}(rU),rF=function(e){function n(n){var t=e.call(this)||this;return t._value=n,t}return ro(n,e),Object.defineProperty(n.prototype,"value",{get:function(){return this.getValue()},enumerable:!1,configurable:!0}),n.prototype._subscribe=function(n){var t=e.prototype._subscribe.call(this,n);return t.closed||n.next(this._value),t},n.prototype.getValue=function(){var e=this.hasError,n=this.thrownError,t=this._value;if(e)throw n;return this._throwIfClosed(),t},n.prototype.next=function(n){e.prototype.next.call(this,this._value=n)},n}(rU),rB=function(){return Date.now()},rj=function(e){function n(n,t){return e.call(this)||this}return ro(n,e),n.prototype.schedule=function(e,n){return this},n}(rT),rV=function(e,n){for(var t=[],a=2;a<arguments.length;a++)t[a-2]=arguments[a];return setInterval.apply(void 0,ru([e,n],rc(t)))},rH=function(e){function n(n,t){var a=e.call(this,n,t)||this;return a.scheduler=n,a.work=t,a.pending=!1,a}return ro(n,e),n.prototype.schedule=function(e,n){if(void 0===n&&(n=0),this.closed)return this;this.state=e;var t,a=this.id,r=this.scheduler;return null!=a&&(this.id=this.recycleAsyncId(r,a,n)),this.pending=!0,this.delay=n,this.id=null!=(t=this.id)?t:this.requestAsyncId(r,this.id,n),this},n.prototype.requestAsyncId=function(e,n,t){return void 0===t&&(t=0),rV(e.flush.bind(e,this),t)},n.prototype.recycleAsyncId=function(e,n,t){if(void 0===t&&(t=0),null!=t&&this.delay===t&&!1===this.pending)return n;null!=n&&clearInterval(n)},n.prototype.execute=function(e,n){if(this.closed)return Error("executing a cancelled action");this.pending=!1;var t=this._execute(e,n);if(t)return t;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},n.prototype._execute=function(e,n){var t,a=!1;try{this.work(e)}catch(e){a=!0,t=e||Error("Scheduled action threw falsy error")}if(a)return this.unsubscribe(),t},n.prototype.unsubscribe=function(){if(!this.closed){var n=this.id,t=this.scheduler,a=t.actions;this.work=this.state=this.scheduler=null,this.pending=!1,rg(a,this),null!=n&&(this.id=this.recycleAsyncId(t,n,null)),this.delay=null,e.prototype.unsubscribe.call(this)}},n}(rj),rG=function(){function e(n,t){void 0===t&&(t=e.now),this.schedulerActionCtor=n,this.now=t}return e.prototype.schedule=function(e,n,t){return void 0===n&&(n=0),new this.schedulerActionCtor(this,e).schedule(t,n)},e.now=rB,e}(),r$=new(function(e){function n(n,t){void 0===t&&(t=rG.now);var a=e.call(this,n,t)||this;return a.actions=[],a._active=!1,a}return ro(n,e),n.prototype.flush=function(e){var n,t=this.actions;if(this._active)return void t.push(e);this._active=!0;do if(n=e.execute(e.state,e.delay))break;while(e=t.shift())if(this._active=!1,n){for(;e=t.shift();)e.unsubscribe();throw n}},n}(rG))(rH);function rJ(e){var n;return(n=e[e.length-1])&&rm(n.schedule)?e.pop():void 0}var rY=function(e){return e&&"number"==typeof e.length&&"function"!=typeof e};function rq(e){return rm(null==e?void 0:e.then)}function rW(e){return Symbol.asyncIterator&&rm(null==e?void 0:e[Symbol.asyncIterator])}function rK(e){return TypeError("You provided "+(null!==e&&"object"==typeof e?"an invalid object":"'"+e+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}var rQ="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator";function rX(e){return rm(null==e?void 0:e[rQ])}function rz(e){return function(e,n,t){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var a,r=t.apply(e,n||[]),i=[];return a=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),o("next"),o("throw"),o("return",function(e){return function(n){return Promise.resolve(n).then(e,c)}}),a[Symbol.asyncIterator]=function(){return this},a;function o(e,n){r[e]&&(a[e]=function(n){return new Promise(function(t,a){i.push([e,n,t,a])>1||s(e,n)})},n&&(a[e]=n(a[e])))}function s(e,n){try{var t;(t=r[e](n)).value instanceof rd?Promise.resolve(t.value.v).then(l,c):u(i[0][2],t)}catch(e){u(i[0][3],e)}}function l(e){s("next",e)}function c(e){s("throw",e)}function u(e,n){e(n),i.shift(),i.length&&s(i[0][0],i[0][1])}}(this,arguments,function(){var n,t,a;return rs(this,function(r){switch(r.label){case 0:n=e.getReader(),r.label=1;case 1:r.trys.push([1,,9,10]),r.label=2;case 2:return[4,rd(n.read())];case 3:return a=(t=r.sent()).value,t.done?[4,rd(void 0)]:[3,5];case 4:return[2,r.sent()];case 5:return[4,rd(a)];case 6:return[4,r.sent()];case 7:return r.sent(),[3,2];case 8:return[3,10];case 9:return n.releaseLock(),[7];case 10:return[2]}})})}function rZ(e){return rm(null==e?void 0:e.getReader)}function r0(e){if(e instanceof rN)return e;if(null!=e){var n,t,a,r;if(rm(e[rR])){return n=e,new rN(function(e){var t=n[rR]();if(rm(t.subscribe))return t.subscribe(e);throw TypeError("Provided object does not correctly implement Symbol.observable")})}if(rY(e)){return t=e,new rN(function(e){for(var n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}if(rq(e)){return a=e,new rN(function(e){a.then(function(n){e.closed||(e.next(n),e.complete())},function(n){return e.error(n)}).then(null,rE)})}if(rW(e))return r1(e);if(rX(e)){return r=e,new rN(function(e){var n,t;try{for(var a=rl(r),i=a.next();!i.done;i=a.next()){var o=i.value;if(e.next(o),e.closed)return}}catch(e){n={error:e}}finally{try{i&&!i.done&&(t=a.return)&&t.call(a)}finally{if(n)throw n.error}}e.complete()})}if(rZ(e))return r1(rz(e))}throw rK(e)}function r1(e){return new rN(function(n){(function(e,n){var t,a,r,i,o,s,l,c;return o=this,s=void 0,l=void 0,c=function(){var o;return rs(this,function(s){switch(s.label){case 0:s.trys.push([0,5,6,11]),t=function(e){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var n,t=e[Symbol.asyncIterator];return t?t.call(e):(e=rl(e),n={},a("next"),a("throw"),a("return"),n[Symbol.asyncIterator]=function(){return this},n);function a(t){n[t]=e[t]&&function(n){return new Promise(function(a,r){var i,o,s;i=a,o=r,s=(n=e[t](n)).done,Promise.resolve(n.value).then(function(e){i({value:e,done:s})},o)})}}}(e),s.label=1;case 1:return[4,t.next()];case 2:if((a=s.sent()).done)return[3,4];if(o=a.value,n.next(o),n.closed)return[2];s.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return r={error:s.sent()},[3,11];case 6:return s.trys.push([6,,9,10]),a&&!a.done&&(i=t.return)?[4,i.call(t)]:[3,8];case 7:s.sent(),s.label=8;case 8:return[3,10];case 9:if(r)throw r.error;return[7];case 10:return[7];case 11:return n.complete(),[2]}})},new(l||(l=Promise))(function(e,n){function t(e){try{r(c.next(e))}catch(e){n(e)}}function a(e){try{r(c.throw(e))}catch(e){n(e)}}function r(n){var r;n.done?e(n.value):((r=n.value)instanceof l?r:new l(function(e){e(r)})).then(t,a)}r((c=c.apply(o,s||[])).next())})})(e,n).catch(function(e){return n.error(e)})})}function r2(e,n,t,a,r){void 0===a&&(a=0),void 0===r&&(r=!1);var i=n.schedule(function(){t(),r?e.add(this.schedule(null,a)):this.unsubscribe()},a);if(e.add(i),!r)return i}function r3(e,n){return void 0===n&&(n=0),rM(function(t,a){t.subscribe(rC(a,function(t){return r2(a,e,function(){return a.next(t)},n)},function(){return r2(a,e,function(){return a.complete()},n)},function(t){return r2(a,e,function(){return a.error(t)},n)}))})}function r9(e,n){return void 0===n&&(n=0),rM(function(t,a){a.add(e.schedule(function(){return t.subscribe(a)},n))})}function r4(e,n){if(!e)throw Error("Iterable cannot be null");return new rN(function(t){r2(t,n,function(){var a=e[Symbol.asyncIterator]();r2(t,n,function(){a.next().then(function(e){e.done?t.complete():t.next(e.value)})},0,!0)})})}function r5(e,n){return n?function(e,n){if(null!=e){if(rm(e[rR]))return r0(e).pipe(r9(n),r3(n));if(rY(e))return new rN(function(t){var a=0;return n.schedule(function(){a===e.length?t.complete():(t.next(e[a++]),t.closed||this.schedule())})});if(rq(e))return r0(e).pipe(r9(n),r3(n));if(rW(e))return r4(e,n);if(rX(e))return new rN(function(t){var a;return r2(t,n,function(){a=e[rQ](),r2(t,n,function(){var e,n,r;try{n=(e=a.next()).value,r=e.done}catch(e){t.error(e);return}r?t.complete():t.next(n)},0,!0)}),function(){return rm(null==a?void 0:a.return)&&a.return()}});if(rZ(e))return r4(rz(e),n)}throw rK(e)}(e,n):r0(e)}function r6(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var t=rJ(e);return r5(e,t)}var r8=rp(function(e){return function(n){void 0===n&&(n=null),e(this),this.message="Timeout has occurred",this.name="TimeoutError",this.info=n}});function r7(e){throw new r8(e)}function ie(e,n){return rM(function(t,a){var r=0;t.subscribe(rC(a,function(t){a.next(e.call(n,t,r++))}))})}var it=Array.isArray;function ia(e,n,t){return void 0===t&&(t=1/0),rm(n)?ia(function(t,a){return ie(function(e,r){return n(t,e,a,r)})(r0(e(t,a)))},t):("number"==typeof n&&(t=n),rM(function(n,a){var r,i,o,s,l,c,u;return r=t,i=[],o=0,s=0,l=!1,c=function(){!l||i.length||o||a.complete()},u=function(n){o++;var t=!1;r0(e(n,s++)).subscribe(rC(a,function(e){a.next(e)},function(){t=!0},void 0,function(){if(t)try{for(o--;i.length&&o<r;)!function(){var e=i.shift();u(e)}();c()}catch(e){a.error(e)}}))},n.subscribe(rC(a,function(e){return o<r?u(e):i.push(e)},function(){l=!0,c()})),function(){}}))}function ir(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return ia(rP,1)(r5(e,rJ(e)))}var ii=["addListener","removeListener"],io=["addEventListener","removeEventListener"],is=["on","off"];function il(e,n){return function(t){return function(a){return e[t](n,a)}}}function ic(e,n){return rM(function(t,a){var r=0;t.subscribe(rC(a,function(t){return e.call(n,t,r++)&&a.next(t)}))})}function iu(e,n){return e===n}function id(e,n){var t;return rM((t=arguments.length>=2,function(a,r){var i=t,o=n,s=0;a.subscribe(rC(r,function(n){var t=s++;o=i?e(o,n,t):(i=!0,n),r.next(o)},void 0))}))}function im(e,n){for(var t=[],a=2;a<arguments.length;a++)t[a-2]=arguments[a];if(!0===n)return void e();if(!1!==n){var r=new rI({next:function(){r.unsubscribe(),e()}});return r0(n.apply(void 0,ru([],rc(t)))).subscribe(r)}}function ip(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var t=rJ(e);return rM(function(n,a){(t?ir(e,n,t):ir(e,n)).subscribe(a)})}function ig(e,n){return rM(function(t,a){var r=null,i=0,o=!1,s=function(){return o&&!r&&a.complete()};t.subscribe(rC(a,function(t){null==r||r.unsubscribe();var o=0,l=i++;r0(e(t,l)).subscribe(r=rC(a,function(e){return a.next(n?n(t,e,l,o++):e)},function(){r=null,s()}))},function(){o=!0,s()}))})}function iT(e){return rM(function(n,t){r0(e).subscribe(rC(t,function(){return t.complete()},rb)),t.closed||n.subscribe(t)})}var ih=Object.defineProperty,ik=Object.defineProperties,iv=Object.getOwnPropertyDescriptors,iy=Object.getOwnPropertySymbols,i_=Object.prototype.hasOwnProperty,iE=Object.prototype.propertyIsEnumerable,ib=(e,n,t)=>n in e?ih(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t,iS=(e,n)=>{for(var t in n||(n={}))i_.call(n,t)&&ib(e,t,n[t]);if(iy)for(var t of iy(n))iE.call(n,t)&&ib(e,t,n[t]);return e},iw=(e,n,t)=>new Promise((a,r)=>{var i=e=>{try{s(t.next(e))}catch(e){r(e)}},o=e=>{try{s(t.throw(e))}catch(e){r(e)}},s=e=>e.done?a(e.value):Promise.resolve(e.value).then(i,o);s((t=t.apply(e,n)).next())});function iI(e){var n,t,a;return!(typeof e>"u")&&(!!(n=e)&&n.hasOwnProperty("participant")&&n.hasOwnProperty("source")&&n.hasOwnProperty("track")&&"u">typeof(null==(t=n.publication)?void 0:t.track)||!!(a=e)&&a.hasOwnProperty("participant")&&a.hasOwnProperty("source")&&a.hasOwnProperty("publication")&&"u">typeof a.publication)}function iA(e){return!!e&&e.hasOwnProperty("participant")&&e.hasOwnProperty("source")&&typeof e.publication>"u"}function iR(e){if("string"==typeof e||"number"==typeof e)return`${e}`;if(iA(e))return`${e.participant.identity}_${e.source}_placeholder`;if(iI(e))return`${e.participant.identity}_${e.publication.source}_${e.publication.trackSid}`;throw Error(`Can't generate a id for the given track reference: ${e}`)}function iP(e,n){return void 0!==e&&void 0!==n&&(iI(e)&&iI(n)?e.publication.trackSid===n.publication.trackSid:iR(e)===iR(n))}function iN(e,n){return!(typeof n>"u")&&(iI(e)?n.some(n=>n.participant.identity===e.participant.identity&&iI(n)&&n.publication.trackSid===e.publication.trackSid):!!iA(e)&&n.some(n=>n.participant.identity===e.participant.identity&&iA(n)&&n.source===e.source))}function iO(){let e=document.createElement("p");e.style.width="100%",e.style.height="200px";let n=document.createElement("div");n.style.position="absolute",n.style.top="0px",n.style.left="0px",n.style.visibility="hidden",n.style.width="200px",n.style.height="150px",n.style.overflow="hidden",n.appendChild(e),document.body.appendChild(n);let t=e.offsetWidth;n.style.overflow="scroll";let a=e.offsetWidth;return t===a&&(a=n.clientWidth),document.body.removeChild(n),t-a}function iM(){return"u">typeof document}var iC="[^\\.\\s@:](?:[^\\s@:]*[^\\s@:\\.])?@[^\\.\\s@]+(?:\\.[^\\.\\s@]+)*";function iL(e,n,t){return function(e,n,t,a){void 0===a&&(a={});let{ancestorScroll:r=!0,ancestorResize:i=!0,elementResize:o="function"==typeof ResizeObserver,layoutShift:s="function"==typeof IntersectionObserver,animationFrame:l=!1}=a,c=aD(e),u=r||i?[...c?aL(c):[],...aL(n)]:[];u.forEach(e=>{r&&e.addEventListener("scroll",t,{passive:!0}),i&&e.addEventListener("resize",t)});let d=c&&s?function(e,n){let t=null,a,r=af(e);function i(){var e;clearTimeout(a),null==(e=t)||e.disconnect(),t=null}return function o(s,l){void 0===s&&(s=!1),void 0===l&&(l=1),i();let c=e.getBoundingClientRect(),{left:u,top:d,width:m,height:p}=c;if(s||n(),!m||!p)return;let f={rootMargin:-tz(d)+"px "+-tz(r.clientWidth-(u+m))+"px "+-tz(r.clientHeight-(d+p))+"px "+-tz(u)+"px",threshold:tQ(0,tK(1,l))||1},g=!0;function T(n){let t=n[0].intersectionRatio;if(t!==l){if(!g)return o();t?o(!1,t):a=setTimeout(()=>{o(!1,1e-7)},1e3)}1!==t||aX(c,e.getBoundingClientRect())||o(),g=!1}try{t=new IntersectionObserver(T,{...f,root:r.ownerDocument})}catch{t=new IntersectionObserver(T,f)}t.observe(e)}(!0),i}(c,t):null,m=-1,p=null;o&&(p=new ResizeObserver(e=>{let[a]=e;a&&a.target===c&&p&&(p.unobserve(n),cancelAnimationFrame(m),m=requestAnimationFrame(()=>{var e;null==(e=p)||e.observe(n)})),t()}),c&&!l&&p.observe(c),p.observe(n));let f,g=l?aV(e):null;return l&&function n(){let a=aV(e);g&&!aX(g,a)&&t(),g=a,f=requestAnimationFrame(n)}(),t(),()=>{var e;u.forEach(e=>{r&&e.removeEventListener("scroll",t),i&&e.removeEventListener("resize",t)}),null==d||d(),null==(e=p)||e.disconnect(),p=null,l&&cancelAnimationFrame(f)}}(e,n,()=>iw(this,null,function*(){var a,r,i;let o,s,l,{x:c,y:u}=yield(i={placement:"top",middleware:[{name:"offset",options:6,async fn(e){var n,t;let{x:a,y:r,placement:i,middlewareData:o}=e,s=await au(e,6);return i===(null==(n=o.offset)?void 0:n.placement)&&null!=(t=o.arrow)&&t.alignmentOffset?{}:{x:a+s.x,y:r+s.y,data:{...s,placement:i}}}},(void 0===a&&(a={}),{name:"flip",options:a,async fn(e){var n,t,r,i,o,s,l,c;let u,d,m,{placement:p,middlewareData:f,rects:g,initialPlacement:T,platform:h,elements:k}=e,{mainAxis:v=!0,crossAxis:y=!0,fallbackPlacements:_,fallbackStrategy:E="bestFit",fallbackAxisSideDirection:b="none",flipAlignment:S=!0,...w}=t2(a,e);if(null!=(n=f.arrow)&&n.alignmentOffset)return{};let I=t3(p),A=t8(T),R=t3(T)===T,P=await (null==h.isRTL?void 0:h.isRTL(k.floating)),N=_||(R||!S?[ar(T)]:(u=ar(T),[t7(T),u,t7(u)])),O="none"!==b;!_&&O&&N.push(...(d=t9(T),m=function(e,n,t){switch(e){case"top":case"bottom":return t?n?an:ae:n?ae:an;case"left":case"right":return n?at:aa;default:return[]}}(t3(T),"start"===b,P),d&&(m=m.map(e=>e+"-"+d),S&&(m=m.concat(m.map(t7)))),m));let M=[T,...N],C=await al(e,w),L=[],x=(null==(t=f.flip)?void 0:t.overflows)||[];if(v&&L.push(C[I]),y){let e,n,t,a,r=(s=p,l=g,void 0===(c=P)&&(c=!1),e=t9(s),t=t5(n=t4(t8(s))),a="x"===n?e===(c?"end":"start")?"right":"left":"start"===e?"bottom":"top",l.reference[t]>l.floating[t]&&(a=ar(a)),[a,ar(a)]);L.push(C[r[0]],C[r[1]])}if(x=[...x,{placement:p,overflows:L}],!L.every(e=>e<=0)){let e=((null==(r=f.flip)?void 0:r.index)||0)+1,n=M[e];if(n&&("alignment"!==y||A===t8(n)||x.every(e=>t8(e.placement)!==A||e.overflows[0]>0)))return{data:{index:e,overflows:x},reset:{placement:n}};let t=null==(i=x.filter(e=>e.overflows[0]<=0).sort((e,n)=>e.overflows[1]-n.overflows[1])[0])?void 0:i.placement;if(!t)switch(E){case"bestFit":{let e=null==(o=x.filter(e=>{if(O){let n=t8(e.placement);return n===A||"y"===n}return!0}).map(e=>[e.placement,e.overflows.filter(e=>e>0).reduce((e,n)=>e+n,0)]).sort((e,n)=>e[1]-n[1])[0])?void 0:o[0];e&&(t=e);break}case"initialPlacement":t=T}if(p!==t)return{reset:{placement:t}}}return{}}}),{name:"shift",options:r={padding:5},async fn(e){let{x:n,y:t,placement:a}=e,{mainAxis:i=!0,crossAxis:o=!1,limiter:s={fn:e=>{let{x:n,y:t}=e;return{x:n,y:t}}},...l}=t2(r,e),c={x:n,y:t},u=await al(e,l),d=t8(t3(a)),m=t4(d),p=c[m],f=c[d];if(i){let e="y"===m?"top":"left",n="y"===m?"bottom":"right",t=p+u[e],a=p-u[n];p=tQ(t,tK(p,a))}if(o){let e="y"===d?"top":"left",n="y"===d?"bottom":"right",t=f+u[e],a=f-u[n];f=tQ(t,tK(f,a))}let g=s.fn({...e,[m]:p,[d]:f});return{...g,data:{x:g.x-n,y:g.y-t,enabled:{[m]:i,[d]:o}}}}}]},o=new Map,l={...(s={platform:aQ,...i}).platform,_c:o},as(e,n,{...s,platform:l}));null==t||t(c,u)}))}function ix(e,n){return!e.contains(n.target)}var iU=()=>{var e;let n,t;return{email:function({exact:e}={}){return e?RegExp(`^${iC}$`):RegExp(iC,"g")}(),url:(e=iS({},e={}),n=RegExp("(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}","g").source,t=`(?:(?:(?:[a-z]+:)?//)?|www\\.)(?:\\S+(?::\\S*)?@)?(?:localhost|${n}|(?:(?:[a-z\\u00a1-\\uffff0-9][-_]*)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-z\\u00a1-\\uffff]{2,}))\\.?)(?::\\d{2,5})?(?:[/?#][^\\s"]*)?`,e.exact?RegExp(`(?:^${t}$)`,"i"):RegExp(t,"ig"))}};function iD(e,n){let t=Object.entries(n).map(([n,t],a)=>Array.from(e.matchAll(t)).map(({index:e,0:t})=>({type:n,weight:a,content:t,index:e??0}))).flat().sort((e,n)=>{let t=e.index-n.index;return 0!==t?t:e.weight-n.weight}).filter(({index:e},n,t)=>{if(0===n)return!0;let a=t[n-1];return a.index+a.content.length<=e}),a=[],r=0;for(let{type:n,content:i,index:o}of t)o>r&&a.push(e.substring(r,o)),a.push({type:n,content:i}),r=o+i.length;return e.length>r&&a.push(e.substring(r)),a}var iF=[tW.RoomEvent.ConnectionStateChanged,tW.RoomEvent.RoomMetadataChanged,tW.RoomEvent.ActiveSpeakersChanged,tW.RoomEvent.ConnectionQualityChanged,tW.RoomEvent.ParticipantConnected,tW.RoomEvent.ParticipantDisconnected,tW.RoomEvent.ParticipantPermissionsChanged,tW.RoomEvent.ParticipantMetadataChanged,tW.RoomEvent.ParticipantNameChanged,tW.RoomEvent.ParticipantAttributesChanged,tW.RoomEvent.TrackMuted,tW.RoomEvent.TrackUnmuted,tW.RoomEvent.TrackPublished,tW.RoomEvent.TrackUnpublished,tW.RoomEvent.TrackStreamStateChanged,tW.RoomEvent.TrackSubscriptionFailed,tW.RoomEvent.TrackSubscriptionPermissionChanged,tW.RoomEvent.TrackSubscriptionStatusChanged,tW.RoomEvent.LocalTrackPublished,tW.RoomEvent.LocalTrackUnpublished],iB=[tW.ParticipantEvent.TrackPublished,tW.ParticipantEvent.TrackUnpublished,tW.ParticipantEvent.TrackMuted,tW.ParticipantEvent.TrackUnmuted,tW.ParticipantEvent.TrackStreamStateChanged,tW.ParticipantEvent.TrackSubscribed,tW.ParticipantEvent.TrackUnsubscribed,tW.ParticipantEvent.TrackSubscriptionPermissionChanged,tW.ParticipantEvent.TrackSubscriptionFailed,tW.ParticipantEvent.LocalTrackPublished,tW.ParticipantEvent.LocalTrackUnpublished],ij=[tW.ParticipantEvent.ConnectionQualityChanged,tW.ParticipantEvent.IsSpeakingChanged,tW.ParticipantEvent.ParticipantMetadataChanged,tW.ParticipantEvent.ParticipantPermissionsChanged,tW.ParticipantEvent.TrackMuted,tW.ParticipantEvent.TrackUnmuted,tW.ParticipantEvent.TrackPublished,tW.ParticipantEvent.TrackUnpublished,tW.ParticipantEvent.TrackStreamStateChanged,tW.ParticipantEvent.TrackSubscriptionFailed,tW.ParticipantEvent.TrackSubscriptionPermissionChanged,tW.ParticipantEvent.TrackSubscriptionStatusChanged,tW.ParticipantEvent.LocalTrackPublished,tW.ParticipantEvent.LocalTrackUnpublished],iV=rr.getLogger("lk-components-js");iV.setDefaultLevel("WARN");var iH=[{columns:1,rows:1},{columns:1,rows:2,orientation:"portrait"},{columns:2,rows:1,orientation:"landscape"},{columns:2,rows:2,minWidth:560},{columns:3,rows:3,minWidth:700},{columns:4,rows:4,minWidth:960},{columns:5,rows:5,minWidth:1100}];function iG(e,n,t,a){if(e.length<1)throw Error("At least one grid layout definition must be provided.");let r=[...e].map(e=>{var n,t;return{name:`${e.columns}x${e.rows}`,columns:e.columns,rows:e.rows,maxTiles:e.columns*e.rows,minWidth:null!=(n=e.minWidth)?n:0,minHeight:null!=(t=e.minHeight)?t:0,orientation:e.orientation}}).sort((e,n)=>e.maxTiles!==n.maxTiles?e.maxTiles-n.maxTiles:0!==e.minWidth||0!==n.minWidth?e.minWidth-n.minWidth:0!==e.minHeight||0!==n.minHeight?e.minHeight-n.minHeight:0);if(t<=0||a<=0)return r[0];let i=0,o=t/a>1?"landscape":"portrait",s=r.find((e,t,a)=>{i=t;let r=-1!==a.findIndex((n,a)=>{let r=!n.orientation||n.orientation===o,i=n.maxTiles===e.maxTiles;return a>t&&i&&r});return e.maxTiles>=n&&!r});if(void 0===s)if(s=r[r.length-1])iV.warn(`No layout found for: participantCount: ${n}, width/height: ${t}/${a} fallback to biggest available layout (${s}).`);else throw Error("No layout or fallback layout found.");if((t<s.minWidth||a<s.minHeight)&&i>0){let e=r[i-1];s=iG(r.slice(0,i),e.maxTiles,t,a)}return s}function i$(){return"u">typeof navigator&&navigator.mediaDevices&&!!navigator.mediaDevices.getDisplayMedia}function iJ(e,n){var t;return ik(iS({},e),iv({receivedAtMediaTimestamp:null!=(t=n.rtpTimestamp)?t:0,receivedAt:n.timestamp}))}function iY(e,n,t){return[...e,...n].reduceRight((e,n)=>(e.find(e=>e.id===n.id)||e.unshift(n),e),[]).slice(0-t)}var iq=((t=iq||{}).AgentState="lk.agent.state",t.PublishOnBehalf="lk.publish_on_behalf",t.TranscriptionFinal="lk.transcription_final",t.TranscriptionSegmentId="lk.segment_id",t.TranscribedTrackId="lk.transcribed_track_id",t),iW=[],iK={showChat:!1,unreadMessages:0,showSettings:!1};function iQ(e){return"object"==typeof e}function iX(e){return Array.isArray(e)&&e.filter(iQ).length>0}function iz(e,n){return n.audioLevel-e.audioLevel}function iZ(e,n){return e.isSpeaking===n.isSpeaking?0:e.isSpeaking?-1:1}function i0(e,n){var t,a,r,i;return void 0!==e.lastSpokeAt||void 0!==n.lastSpokeAt?(null!=(a=null==(t=n.lastSpokeAt)?void 0:t.getTime())?a:0)-(null!=(i=null==(r=e.lastSpokeAt)?void 0:r.getTime())?i:0):0}function i1(e,n){var t,a,r,i;return(null!=(a=null==(t=e.joinedAt)?void 0:t.getTime())?a:0)-(null!=(i=null==(r=n.joinedAt)?void 0:r.getTime())?i:0)}function i2(e){let n,t,a,r,i=[],o=[],s=[],l=[];e.forEach(e=>{e.participant.isLocal&&e.source===tW.Track.Source.Camera?i.push(e):e.source===tW.Track.Source.ScreenShare?o.push(e):e.source===tW.Track.Source.Camera?s.push(e):l.push(e)});return[...i,...(n=[],t=[],o.forEach(e=>{e.participant.isLocal?n.push(e):t.push(e)}),n.sort((e,n)=>i1(e.participant,n.participant)),t.sort((e,n)=>i1(e.participant,n.participant)),[...t,...n]),...(a=[],r=[],s.forEach(e=>{e.participant.isLocal?a.push(e):r.push(e)}),r.sort((e,n)=>{let t;return e.participant.isSpeaking&&n.participant.isSpeaking?iz(e.participant,n.participant):e.participant.isSpeaking!==n.participant.isSpeaking?iZ(e.participant,n.participant):e.participant.lastSpokeAt!==n.participant.lastSpokeAt?i0(e.participant,n.participant):iI(e)!==iI(n)?iI(e)?iI(n)?0:-1:+!!iI(n):e.participant.isCameraEnabled!==n.participant.isCameraEnabled?(t=e.participant.isCameraEnabled)!==n.participant.isCameraEnabled?t?-1:1:0:i1(e.participant,n.participant)}),[...a,...r]),...l]}function i3(e){let n=[...e];n.sort((e,n)=>{if(e.isSpeaking&&n.isSpeaking)return iz(e,n);if(e.isSpeaking!==n.isSpeaking)return iZ(e,n);if(e.lastSpokeAt!==n.lastSpokeAt)return i0(e,n);let t=e.videoTrackPublications.size>0;return t!==n.videoTrackPublications.size>0?t?-1:1:i1(e,n)});let t=n.find(e=>e.isLocal);if(t){let e=n.indexOf(t);e>=0&&(n.splice(e,1),n.length>0?n.splice(0,0,t):n.push(t))}return n}function i9(e,n){return Array(Math.max(e.length,n.length)).fill([]).map((t,a)=>[e[a],n[a]])}function i4(e,n,t){return e.filter(e=>!n.map(e=>t(e)).includes(t(e)))}function i5(e){return e.map(e=>"string"==typeof e||"number"==typeof e?`${e}`:iR(e))}function i6(e,n){let t=n.findIndex(n=>iR(n)===iR(e));if(-1===t)throw Error(`Element not part of the array: ${iR(e)} not in ${i5(n)}`);return t}function i8(e,n){return e.reduce((e,t,a)=>a%n==0?[...e,[t]]:[...e.slice(0,-1),[...e.slice(-1)[0],t]],[])}function i7(e,n,t){var a,r;let i=(a=e,r=n,a.map(e=>r.find(n=>iR(e)===iR(n)||"number"!=typeof e&&iA(e)&&iI(n)&&iA(e)&&iI(n)&&n.participant.identity===e.participant.identity&&n.source===e.source)??e));if(i.length<n.length){let e=i4(n,i,iR);i=[...i,...e]}if(i9(i8(i,t),i8(n,t)).forEach(([e,n],a)=>{if(e&&n){var r;let o={dropped:i4(r=i8(i,t)[a],n,iR),added:i4(n,r,iR)};(0!==o.added.length||0!==o.dropped.length)&&(iV.debug(`Detected visual changes on page: ${a}, current: ${i5(e)}, next: ${i5(n)}`,{changes:o}),o.added.length===o.dropped.length&&i9(o.added,o.dropped).forEach(([e,n])=>{if(e&&n){var t;let a,r;a=i6(e,t=i),r=i6(n,t),t.splice(a,1,n),t.splice(r,1,e),i=t}else throw Error(`For a swap action we need a addition and a removal one is missing: ${e}, ${n}`)}),0===o.added.length&&o.dropped.length>0&&o.dropped.forEach(e=>{var n;let t;t=i6(e,n=i),n.splice(t,1),i=n}),o.added.length>0&&0===o.dropped.length&&o.added.forEach(e=>{i=[...i,e]}))}}),i.length>n.length){let e=i4(i,n,iR);i=i.filter(n=>!e.map(iR).includes(iR(n)))}return i}function oe(e){return`lk-${e}`}function on(e){let n=ot(e),t=of(e.participant).pipe(ie(()=>ot(e)),ip(n));return{className:oe(e.source===tW.Track.Source.Camera||e.source===tW.Track.Source.ScreenShare?"participant-media-video":"participant-media-audio"),trackObserver:t}}function ot(e){if(iI(e))return e.publication;{let{source:n,name:t,participant:a}=e;if(n&&t)return a.getTrackPublications().find(e=>e.source===n&&e.trackName===t);if(t)return a.getTrackPublicationByName(t);if(n)return a.getTrackPublication(n);throw Error("At least one of source and name needs to be defined")}}function oa(e,...n){return new rN(t=>{let a=()=>{t.next(e)};return n.forEach(n=>{e.on(n,a)}),()=>{n.forEach(n=>{e.off(n,a)})}}).pipe(ip(e))}function or(e,n){return new rN(t=>{let a=(...e)=>{t.next(e)};return e.on(n,a),()=>{e.off(n,a)}})}function oi(e){return or(e,tW.RoomEvent.ConnectionStateChanged).pipe(ie(([e])=>e),ip(e.state))}function oo(e){return oa(e,tW.RoomEvent.RoomMetadataChanged,tW.RoomEvent.ConnectionStateChanged).pipe(ie(e=>({name:e.name,metadata:e.metadata})))}function os(e){return or(e,tW.RoomEvent.ActiveSpeakersChanged).pipe(ie(([e])=>e))}function ol(e,n,t=!0){return ir(new rN(a=>{tW.Room.getLocalDevices(e,t).then(e=>{a.next(e),a.complete()}).catch(e=>{null==n||n(e),a.next([]),a.complete()})}),new rN(a=>{var r;let i=()=>iw(this,null,function*(){try{let n=yield tW.Room.getLocalDevices(e,t);a.next(n)}catch(e){null==n||n(e)}});if("u">typeof window){if(!window.isSecureContext)throw Error("Accessing media devices is available only in secure contexts (HTTPS and localhost), in some or all supporting browsers. See: https://developer.mozilla.org/en-US/docs/Web/API/Navigator/mediaDevices");null==(r=null==navigator?void 0:navigator.mediaDevices)||r.addEventListener("devicechange",i)}return()=>{var e;null==(e=null==navigator?void 0:navigator.mediaDevices)||e.removeEventListener("devicechange",i)}}))}function oc(e){return oa(e,tW.RoomEvent.AudioPlaybackStatusChanged).pipe(ie(e=>({canPlayAudio:e.canPlaybackAudio})))}function ou(e){return oa(e,tW.RoomEvent.VideoPlaybackStatusChanged).pipe(ie(e=>({canPlayVideo:e.canPlaybackVideo})))}function od(e,n){return or(e,tW.RoomEvent.ParticipantEncryptionStatusChanged).pipe(ic(([,t])=>(null==n?void 0:n.identity)===(null==t?void 0:t.identity)||!t&&(null==n?void 0:n.identity)===e.localParticipant.identity),ie(([e])=>e),ip(null!=n&&n.isLocal?n.isE2EEEnabled:!!(null!=n&&n.isEncrypted)))}function om(e){return or(e,tW.RoomEvent.RecordingStatusChanged).pipe(ie(([e])=>e),ip(e.isRecording))}function op(e,...n){return new rN(t=>{let a=()=>{t.next(e)};return n.forEach(n=>{e.on(n,a)}),()=>{n.forEach(n=>{e.off(n,a)})}}).pipe(ip(e))}function of(e){return op(e,tW.ParticipantEvent.TrackMuted,tW.ParticipantEvent.TrackUnmuted,tW.ParticipantEvent.ParticipantPermissionsChanged,tW.ParticipantEvent.TrackPublished,tW.ParticipantEvent.TrackUnpublished,tW.ParticipantEvent.LocalTrackPublished,tW.ParticipantEvent.LocalTrackUnpublished,tW.ParticipantEvent.MediaDevicesError,tW.ParticipantEvent.TrackSubscriptionStatusChanged).pipe(ie(e=>{let{isMicrophoneEnabled:n,isCameraEnabled:t,isScreenShareEnabled:a}=e,r=e.getTrackPublication(tW.Track.Source.Microphone);return{isCameraEnabled:t,isMicrophoneEnabled:n,isScreenShareEnabled:a,cameraTrack:e.getTrackPublication(tW.Track.Source.Camera),microphoneTrack:r,participant:e}}))}function og(e){return e?op(e,tW.ParticipantEvent.ParticipantMetadataChanged,tW.ParticipantEvent.ParticipantNameChanged).pipe(ie(({name:e,identity:n,metadata:t})=>({name:e,identity:n,metadata:t})),ip({name:e.name,identity:e.identity,metadata:e.metadata})):void 0}function oT(e,n){return new rN(t=>{let a=(...e)=>{t.next(e)};return e.on(n,a),()=>{e.off(n,a)}})}function oh(e){var n,t,a,r;return op(e.participant,tW.ParticipantEvent.TrackMuted,tW.ParticipantEvent.TrackUnmuted,tW.ParticipantEvent.TrackSubscribed,tW.ParticipantEvent.TrackUnsubscribed,tW.ParticipantEvent.LocalTrackPublished,tW.ParticipantEvent.LocalTrackUnpublished).pipe(ie(n=>{var t,a;let r=null!=(t=e.publication)?t:n.getTrackPublication(e.source);return null==(a=null==r?void 0:r.isMuted)||a}),ip(null==(r=null!=(a=null==(n=e.publication)?void 0:n.isMuted)?a:null==(t=e.participant.getTrackPublication(e.source))?void 0:t.isMuted)||r))}function ok(e){return oT(e,tW.ParticipantEvent.IsSpeakingChanged).pipe(ie(([e])=>e))}function ov(e,n={}){var t;let a,r=new rN(e=>(a=e,()=>o.unsubscribe())).pipe(ip(Array.from(e.remoteParticipants.values()))),i=null!=(t=n.additionalRoomEvents)?t:iF,o=oa(e,...Array.from(new Set([tW.RoomEvent.ParticipantConnected,tW.RoomEvent.ParticipantDisconnected,tW.RoomEvent.ConnectionStateChanged,...i]))).subscribe(e=>null==a?void 0:a.next(Array.from(e.remoteParticipants.values())));return e.remoteParticipants.size>0&&(null==a||a.next(Array.from(e.remoteParticipants.values()))),r}function oy(e,n,t={}){var a;let r=null!=(a=t.additionalEvents)?a:ij;return oa(e,tW.RoomEvent.ParticipantConnected,tW.RoomEvent.ParticipantDisconnected,tW.RoomEvent.ConnectionStateChanged).pipe(ig(e=>{let t=e.getParticipantByIdentity(n);return t?op(t,...r):new rN(e=>e.next(void 0))}),ip(e.getParticipantByIdentity(n)))}function o_(e){return oT(e,tW.ParticipantEvent.ParticipantPermissionsChanged).pipe(ie(()=>e.permissions),ip(e.permissions))}function oE(e,{kind:n,identity:t},a={}){var r;let i=null!=(r=a.additionalEvents)?r:ij,o=e=>{let a=!0;return n&&(a=a&&e.kind===n),t&&(a=a&&e.identity===t),a};return oa(e,tW.RoomEvent.ParticipantConnected,tW.RoomEvent.ParticipantDisconnected,tW.RoomEvent.ConnectionStateChanged).pipe(ig(e=>{let n=Array.from(e.remoteParticipants.values()).find(e=>o(e));return n?op(n,...i):new rN(e=>e.next(void 0))}),ip(Array.from(e.remoteParticipants.values()).find(e=>o(e))))}function ob(e){return typeof e>"u"?new rN:oT(e,tW.ParticipantEvent.AttributesChanged).pipe(ie(([n])=>({changed:n,attributes:e.attributes})),ip({changed:e.attributes,attributes:e.attributes}))}function oS(e,n,t,a,r){let{localParticipant:i}=n,o=(e,n)=>{let t=!1;switch(e){case tW.Track.Source.Camera:t=n.isCameraEnabled;break;case tW.Track.Source.Microphone:t=n.isMicrophoneEnabled;break;case tW.Track.Source.ScreenShare:t=n.isScreenShareEnabled}return t},s=of(i).pipe(ie(n=>o(e,n.participant)),ip(o(e,i))),l=new rU,c=(n,o)=>iw(this,null,function*(){try{switch(o??(o=t),l.next(!0),e){case tW.Track.Source.Camera:return yield i.setCameraEnabled(n??!i.isCameraEnabled,o,a),i.isCameraEnabled;case tW.Track.Source.Microphone:return yield i.setMicrophoneEnabled(n??!i.isMicrophoneEnabled,o,a),i.isMicrophoneEnabled;case tW.Track.Source.ScreenShare:return yield i.setScreenShareEnabled(n??!i.isScreenShareEnabled,o,a),i.isScreenShareEnabled;default:throw TypeError("Tried to toggle unsupported source")}}catch(e){if(r&&e instanceof Error){null==r||r(e);return}throw e}finally{l.next(!1)}});return{className:oe("button"),toggle:c,enabledObserver:s,pendingObserver:l.asObservable()}}function ow(){let e=!1,n=new rU,t=new rU,a=a=>iw(this,null,function*(){t.next(!0),e=a??!e,n.next(e),t.next(!1)});return{className:oe("button"),toggle:a,enabledObserver:n.asObservable(),pendingObserver:t.asObservable()}}function oI(e,n,t){let a=new rF(void 0),r=or(n,tW.RoomEvent.ActiveDeviceChanged).pipe(ic(([n])=>n===e),ie(([e,n])=>(iV.debug("activeDeviceObservable | RoomEvent.ActiveDeviceChanged",{kind:e,deviceId:n}),n))),i=(t,...r)=>iw(this,[t,...r],function*(t,r={}){var i,o,s;if(n){let l,c=(0,tW.getBrowser)();if("audiooutput"===e&&((null==c?void 0:c.name)==="Safari"||(null==c?void 0:c.os)==="iOS"))return void iV.warn("Switching audio output device is not supported on Safari and iOS.");iV.debug(`Switching active device of kind "${e}" with id ${t}.`),yield n.switchActiveDevice(e,t,r.exact);let u=null!=(i=n.getActiveDevice(e))?i:t;u!==t&&"default"!==t&&iV.info(`We tried to select the device with id (${t}), but the browser decided to select the device with id (${u}) instead.`),"audioinput"===e?l=null==(o=n.localParticipant.getTrackPublication(tW.Track.Source.Microphone))?void 0:o.track:"videoinput"===e&&(l=null==(s=n.localParticipant.getTrackPublication(tW.Track.Source.Camera))?void 0:s.track);let d="default"===t&&!l||"default"===t&&(null==l?void 0:l.mediaStreamTrack.label.startsWith("Default"));a.next(d?t:u)}});return{className:oe("media-device-select"),activeDeviceObservable:r,setActiveMediaDevice:i}}function oA(e){return{className:oe("disconnect-button"),disconnect:n=>{e.disconnect(n)}}}function oR(e){return{className:oe("connection-quality"),connectionQualityObserver:oT(e,tW.ParticipantEvent.ConnectionQualityChanged).pipe(ie(([e])=>e),ip(e.connectionQuality))}}function oP(e){let n="track-muted-indicator-camera";switch(e.source){case tW.Track.Source.Camera:n="track-muted-indicator-camera";break;case tW.Track.Source.Microphone:n="track-muted-indicator-microphone"}return{className:oe(n),mediaMutedObserver:oh(e)}}function oN(e){return{className:"lk-participant-name",infoObserver:og(e)}}function oO(){return{className:oe("participant-tile")}}var oM={CHAT:"lk.chat",TRANSCRIPTION:"lk.transcription"};function oC(e,n){return iw(this,arguments,function*(e,n,t={}){let{reliable:a,destinationIdentities:r,topic:i}=t;yield e.publishData(n,{destinationIdentities:r,topic:i,reliable:a})})}function oL(e,n,t){let a,r=Array.isArray(n)?n:[n];return{messageObservable:or(e,tW.RoomEvent.DataReceived).pipe(ic(([,,,e])=>void 0===n||void 0!==e&&r.includes(e)),ie(([e,n,,a])=>{let r={payload:e,topic:a,from:n};return null==t||t(r),r})),isSendingObservable:new rN(e=>{a=e}),send:(n,...t)=>iw(this,[n,...t],function*(n,t={}){a.next(!0);try{yield oC(e.localParticipant,n,iS({topic:r[0]},t))}finally{a.next(!1)}})}}var ox=new WeakMap,oU=e=>JSON.parse(new TextDecoder().decode(e)),oD=e=>new TextEncoder().encode(JSON.stringify(e));function oF(e,n){var t,a,r,i,o,s;let l=new rU,c=null!=(t=null==n?void 0:n.channelTopic)?t:oM.CHAT,u=null!=(a=null==n?void 0:n.channelTopic)?a:"lk-chat-topic",d=!1;ox.has(e)||(d=!0);let m=null!=(r=ox.get(e))?r:new Map,p=null!=(i=m.get(c))?i:new rU;m.set(c,p),ox.set(e,m);let f=null!=(o=null==n?void 0:n.messageDecoder)?o:oU;if(d){e.registerTextStreamHandler(c,(n,t)=>iw(this,null,function*(){let{id:a,timestamp:r}=n.info;r5(n).pipe(id((e,n)=>e+n),ie(n=>({id:a,timestamp:r,message:n,from:e.getParticipantByIdentity(t.identity),type:"chatMessage"}))).subscribe({next:e=>p.next(e)})}));let{messageObservable:n}=oL(e,[u]);n.pipe(ie(e=>{let n=f(e.payload);return!0==n.ignoreLegacy?void 0:ik(iS({},n),iv({type:"chatMessage",from:e.from}))}),ic(e=>!!e),iT(l)).subscribe(p)}let g=p.pipe(id((e,n)=>{if("id"in n&&e.find(e=>{var t,a;return(null==(t=e.from)?void 0:t.identity)===(null==(a=n.from)?void 0:a.identity)&&e.id===n.id})){let t=e.findIndex(e=>e.id===n.id);if(t>-1){let a=e[t];e[t]=ik(iS({},n),iv({timestamp:a.timestamp,editTimestamp:n.timestamp}))}return[...e]}return[...e,n]},[]),iT(l)),T=new rF(!1),h=null!=(s=null==n?void 0:n.messageEncoder)?s:oD,k=(n,t)=>iw(this,null,function*(){var a,r,i;t||(t={}),null!=t.topic||(t.topic=c),T.next(!0);try{let o,s,l,c,d,m,f={id:(yield e.localParticipant.sendText(n,t)).id,timestamp:Date.now(),message:n},g=(o=iS({},f),s={attachedFiles:t.attachments},ik(o,iv(s))),T=(l=iS({},g),c={type:"chatMessage",from:e.localParticipant,attributes:t.attributes},ik(l,iv(c)));p.next(T);let k=h((d=iS({},f),m={ignoreLegacy:(null==(a=e.serverInfo)?void 0:a.edition)===1||!!(null!=(r=e.serverInfo)&&r.version)&&(0,tW.compareVersions)(null==(i=e.serverInfo)?void 0:i.version,"1.8.2")>0},ik(d,iv(m))));try{yield oC(e.localParticipant,k,{reliable:!0,topic:u})}catch(e){iV.info("could not send message in legacy chat format",e)}return T}finally{T.next(!1)}});return e.once(tW.RoomEvent.Disconnected,function(){l.next(),l.complete(),p.complete(),ox.delete(e),e.unregisterTextStreamHandler(c)}),{messageObservable:g,isSendingObservable:T,send:k}}function oB(){let e=e=>iw(this,null,function*(){iV.info("Start Audio for room: ",e),yield e.startAudio()});return{className:oe("start-audio-button"),roomAudioPlaybackAllowedObservable:oc,handleStartAudioPlayback:e}}function oj(){let e=e=>iw(this,null,function*(){iV.info("Start Video for room: ",e),yield e.startVideo()});return{className:oe("start-audio-button"),roomVideoPlaybackAllowedObservable:ou,handleStartVideoPlayback:e}}function oV(){return{className:[oe("button"),oe("chat-toggle")].join(" ")}}function oH(){return{className:[oe("button"),oe("focus-toggle-button")].join(" ")}}function oG(){return{className:"lk-clear-pin-button lk-button"}}function o$(){return{className:"lk-room-container"}}function oJ(e,n,t=!0){let a=[e.localParticipant,...Array.from(e.remoteParticipants.values())],r=[];return a.forEach(e=>{n.forEach(n=>{let a=Array.from(e.trackPublications.values()).filter(e=>e.source===n&&(!t||e.track)).map(n=>({participant:e,publication:n,source:n.source}));r.push(...a)})}),{trackReferences:r,participants:a}}function oY(e,n,t=!1){let{sources:a,kind:r,name:i}=n;return Array.from(e.trackPublications.values()).filter(e=>(!a||a.includes(e.source))&&(!r||e.kind===r)&&(!i||e.trackName===i)&&(!t||e.track)).map(n=>({participant:e,publication:n,source:n.source}))}function oq(e,n,t){var a,r;let i=null!=(a=t.additionalRoomEvents)?a:iF,o=null==(r=t.onlySubscribed)||r;return oa(e,...Array.from(new Set([tW.RoomEvent.ParticipantConnected,tW.RoomEvent.ParticipantDisconnected,tW.RoomEvent.ConnectionStateChanged,tW.RoomEvent.LocalTrackPublished,tW.RoomEvent.LocalTrackUnpublished,tW.RoomEvent.TrackPublished,tW.RoomEvent.TrackUnpublished,tW.RoomEvent.TrackSubscriptionStatusChanged,...i]).values())).pipe(ie(e=>{let t=oJ(e,n,o);return iV.debug(`TrackReference[] was updated. (length ${t.trackReferences.length})`,t),t}),ip(oJ(e,n,o)))}function oW(e,n){return op(e,...iB).pipe(ie(e=>{let t=oY(e,n);return iV.debug(`TrackReference[] was updated. (length ${t.length})`,t),t}),ip(oY(e,n)))}function oK(e,n){return new rN(t=>{let a=(...e)=>{t.next(e)};return e.on(n,a),()=>{e.off(n,a)}})}function oQ(e){return oK(e,tW.TrackEvent.TranscriptionReceived)}function oX(e){return oK(e,tW.TrackEvent.TimeSyncUpdate).pipe(ie(([e])=>e))}function oz(e,n=1e3){var t,a;if(null===e)return r6(!1);let r=(function e(n,t,a,r){if(rm(a)&&(r=a,a=void 0),r){return e(n,t,a).pipe((i=r,ie(function(e){return it(e)?i.apply(void 0,ru([],rc(e))):i(e)})))}var i,o,s,l,c=rc(rm((o=n).addEventListener)&&rm(o.removeEventListener)?io.map(function(e){return function(r){return n[e](t,r,a)}}):rm((s=n).addListener)&&rm(s.removeListener)?ii.map(il(n,t)):rm((l=n).on)&&rm(l.off)?is.map(il(n,t)):[],2),u=c[0],d=c[1];if(!u&&rY(n))return ia(function(n){return e(n,t,a)})(r0(n));if(!u)throw TypeError("Invalid event target");return new rN(function(e){var n=function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];return e.next(1<n.length?n:n[0])};return u(n),function(){return d(n)}})})(e,"mousemove",{passive:!0}).pipe(ie(()=>!0)),i=r.pipe(function(e,n){var t=e instanceof Date&&!isNaN(e)?{first:e}:"number"==typeof e?{each:e}:e,a=t.first,r=t.each,i=t.with,o=void 0===i?r7:i,s=t.scheduler,l=void 0===s?r$:s,c=t.meta,u=void 0===c?null:c;if(null==a&&null==r)throw TypeError("No timeout provided.");return rM(function(e,n){var t,i,s=null,c=0,d=function(e){i=r2(n,l,function(){try{t.unsubscribe(),r0(o({meta:u,lastValue:s,seen:c})).subscribe(n)}catch(e){n.error(e)}},e)};t=e.subscribe(rC(n,function(e){null==i||i.unsubscribe(),c++,n.next(s=e),r>0&&d(r)},void 0,void 0,function(){null!=i&&i.closed||null==i||i.unsubscribe(),s=null})),c||d(null!=a?"number"==typeof a?a:a-l.now():r)})}({each:n,with:()=>ir(r6(!1),i.pipe(rM(function(e,n){var t=!1,a=rC(n,function(){null==a||a.unsubscribe(),t=!0},rb);r0(r).subscribe(a),e.subscribe(rC(n,function(e){return t&&n.next(e)}))})))}),(void 0===a&&(a=rP),t=t??iu,rM(function(e,n){var r,i=!0;e.subscribe(rC(n,function(e){var o=a(e);(i||!t(r,o))&&(i=!1,r=o,n.next(e))}))})));return i}var{load:oZ,save:o0}=(lr="lk-user-choices",{load:()=>(function(e){if(typeof localStorage>"u")return void iV.error("Local storage is not available.");try{let n=localStorage.getItem(e);if(!n)return void iV.warn(`Item with key ${e} does not exist in local storage.`);return JSON.parse(n)}catch(e){iV.error(`Error getting item from local storage: ${e}`);return}})(lr),save:e=>(function(e,n){if(typeof localStorage>"u")return void iV.error("Local storage is not available.");try{if(n){let t=Object.fromEntries(Object.entries(n).filter(([,e])=>""!==e));localStorage.setItem(e,JSON.stringify(t))}}catch(e){iV.error(`Error setting item to local storage: ${e}`)}})(lr,e)});function o1(e,n=!1){!0!==n&&o0(e)}function o2(e,n=!1){var t,a,r,i,o;let s={videoEnabled:null==(t=null==e?void 0:e.videoEnabled)||t,audioEnabled:null==(a=null==e?void 0:e.audioEnabled)||a,videoDeviceId:null!=(r=null==e?void 0:e.videoDeviceId)?r:"default",audioDeviceId:null!=(i=null==e?void 0:e.audioDeviceId)?i:"default",username:null!=(o=null==e?void 0:e.username)?o:""};if(n)return s;{let e=oZ();return iS(iS({},s),e??{})}}var o3=null,o9=null,o4=0;function o5(){return o3||(o3=new Map),o3}function o6(e,n){var t,a,r,i,o,s,l,c,u,d,m;let p,f,g=(o9||(o9=new WeakMap),(f=(p=o9).get(e))||(f=`room_${o4++}`,p.set(e,f)),`${f}:${n}`),T=o5(),h=T.get(g);if(h)return h;let k=new rU,v=[],y="lk.segment_id",_=k.pipe((a=rm(t={subscribe:()=>{e.registerTextStreamHandler(n,(e,n)=>iw(this,null,function*(){var t;let a=r5(e).pipe(id((e,n)=>e+n,"")),r=!!(null!=(t=e.info.attributes)&&t[y]);a.subscribe(t=>{let a=v.findIndex(n=>{var t,a;return n.streamInfo.id===e.info.id||r&&(null==(t=n.streamInfo.attributes)?void 0:t[y])===(null==(a=e.info.attributes)?void 0:a[y])});-1!==a?v[a]=ik(iS({},v[a]),iv({text:t})):v.push({text:t,participantInfo:n,streamInfo:e.info}),k.next([...v])})}))},finalize:()=>{e.unregisterTextStreamHandler(n)}})?{next:t,error:void 0,complete:void 0}:t)?rM(function(e,n){null==(t=a.subscribe)||t.call(a);var t,r=!0;e.subscribe(rC(n,function(e){var t;null==(t=a.next)||t.call(a,e),n.next(e)},function(){var e;r=!1,null==(e=a.complete)||e.call(a),n.complete()},function(e){var t;r=!1,null==(t=a.error)||t.call(a,e),n.error(e)},function(){var e,n;r&&(null==(e=a.unsubscribe)||e.call(a)),null==(n=a.finalize)||n.call(a)}))}):rP,(void 0===r&&(r={}),o=void 0===(i=r.connector)?function(){return new rU}:i,l=void 0===(s=r.resetOnError)||s,u=void 0===(c=r.resetOnComplete)||c,m=void 0===(d=r.resetOnRefCountZero)||d,function(e){var n,t,a,r=0,i=!1,s=!1,c=function(){null==t||t.unsubscribe(),t=void 0},d=function(){c(),n=a=void 0,i=s=!1},p=function(){var e=n;d(),null==e||e.unsubscribe()};return rM(function(e,f){r++,s||i||c();var g=a=a??o();f.add(function(){0!=--r||s||i||(t=im(p,m))}),g.subscribe(f),!n&&r>0&&(n=new rI({next:function(e){return g.next(e)},error:function(e){s=!0,c(),t=im(d,l,e),g.error(e)},complete:function(){i=!0,c(),t=im(d,u),g.complete()}}),r0(e).subscribe(n))})(e)}));return T.set(g,_),e.on(tW.RoomEvent.Disconnected,()=>{o5().delete(g),v=[],k.next([])}),_}function o8(e,n){if("show_chat"===n.msg)return{...e,showChat:!0,unreadMessages:0};if("hide_chat"===n.msg)return{...e,showChat:!1};if("toggle_chat"!==n.msg)return"unread_msg"===n.msg?{...e,unreadMessages:n.count}:"toggle_settings"===n.msg?{...e,showSettings:!e.showSettings}:{...e};{let n={...e,showChat:!e.showChat};return!0===n.showChat&&(n.unreadMessages=0),n}}function o7(e,n){return"set_pin"===n.msg?[n.trackReference]:"clear_pin"===n.msg?[]:{...e}}let se=tq.createContext(void 0);function sn(){let e=tq.useContext(se);if(!e)throw Error("Tried to access LayoutContext context outside a LayoutContextProvider provider.");return e}function st(e){let n=si();if(e??(e=n),!e)throw Error("Tried to access LayoutContext context outside a LayoutContextProvider provider.");return e}function sa(){let[e,n]=tq.useReducer(o7,iW),[t,a]=tq.useReducer(o8,iK);return{pin:{dispatch:n,state:e},widget:{dispatch:a,state:t}}}function sr(e){let[n,t]=tq.useReducer(o7,iW),[a,r]=tq.useReducer(o8,iK);return e??{pin:{dispatch:t,state:n},widget:{dispatch:r,state:a}}}function si(){return tq.useContext(se)}let so=tq.createContext(void 0);function ss(){return tq.useContext(so)}function sl(e){let n=ss(),t=e??n;if(!t)throw Error("No TrackRef, make sure you are inside a TrackRefContext or pass the TrackRef explicitly");return t}let sc=tq.createContext(void 0);function su(){return tq.useContext(sc)}function sd(e){let n=su(),t=ss(),a=e??n??(null==t?void 0:t.participant);if(!a)throw Error("No participant provided, make sure you are inside a participant context or pass the participant explicitly");return a}let sm=tq.createContext(void 0);function sp(){let e=tq.useContext(sm);if(!e)throw Error("tried to access room context outside of livekit room component");return e}function sf(){return tq.useContext(sm)}function sg(e){let n=sf(),t=e??n;if(!t)throw Error("No room provided, make sure you are inside a Room context or pass the room explicitly");return t}let sT=tq.createContext(void 0);function sh(){return tq.useContext(sT)}function sk(e){let n=sh(),t=e??n;if(!t)throw Error("No session provided, make sure you are inside a Session context or pass the session explicitly");return t}let sv=tq.createContext(void 0);function sy(e){let n=tq.useContext(sv);if(!0===e){if(n)return n;throw Error("tried to access feature context, but none is present")}return n}function s_(){for(var e,n,t=0,a="",r=arguments.length;t<r;t++)(e=arguments[t])&&(n=function e(n){var t,a,r="";if("string"==typeof n||"number"==typeof n)r+=n;else if("object"==typeof n)if(Array.isArray(n)){var i=n.length;for(t=0;t<i;t++)n[t]&&(a=e(n[t]))&&(r&&(r+=" "),r+=a)}else for(a in n)n[a]&&(r&&(r+=" "),r+=a);return r}(e))&&(a&&(a+=" "),a+=n);return a}function sE(...e){let n={...e[0]};for(let t=1;t<e.length;t++){let a=e[t];for(let e in a){let t=n[e],r=a[e];"function"==typeof t&&"function"==typeof r&&"o"===e[0]&&"n"===e[1]&&e.charCodeAt(2)>=65&&90>=e.charCodeAt(2)?n[e]=function(...e){return(...n)=>{for(let t of e)if("function"==typeof t)try{t(...n)}catch(e){console.error(e)}}}(t,r):("className"===e||"UNSAFE_className"===e)&&"string"==typeof t&&"string"==typeof r?n[e]=s_(t,r):n[e]=void 0!==r?r:t}}return n}function sb(e){return void 0!==e}function sS(...e){return sE(...e.filter(sb))}function sw(e,n,t){return tq.Children.map(e,a=>tq.isValidElement(a)&&tq.Children.only(e)?(a.props.className&&(n??(n={}),n.className=s_(a.props.className,n.className),n.style={...a.props.style,...n.style}),tq.cloneElement(a,{...n,key:t})):a)}function sI(e){var n,t;if("u">typeof window&&"u">typeof k.default&&((null==(n=null==k.default?void 0:k.default.env)?void 0:n.NODE_ENV)==="dev"||(null==(t=null==k.default?void 0:k.default.env)?void 0:t.NODE_ENV)==="development")){let e=document.querySelector(".lk-room-container");e&&!getComputedStyle(e).getPropertyValue("--lk-has-imported-styles")&&iV.warn("It looks like you're not using the `@livekit/components-styles package`. To render the UI with the default styling, please import it in your layout or page.")}}function sA(e,n){return"processor"===e&&n&&"object"==typeof n&&"name"in n?n.name:"e2ee"===e&&n?"e2ee-enabled":n}e.s(["$",()=>o1,"A",()=>i7,"B",()=>su,"C",()=>og,"D",()=>oO,"E",()=>ov,"F",()=>st,"G",()=>iH,"H",()=>oy,"I",()=>oE,"J",()=>oo,"K",()=>os,"L",()=>sv,"M",()=>i3,"N",()=>oB,"O",()=>oj,"P",()=>oV,"Q",()=>oP,"R",()=>sm,"S",()=>oS,"T",()=>ow,"U",()=>iQ,"V",()=>oq,"W",()=>iX,"X",()=>ot,"Y",()=>on,"Z",()=>oF,"_",()=>o2,"a",()=>sn,"a0",()=>od,"a1",()=>iI,"a2",()=>oW,"a3",()=>oX,"a4",()=>oQ,"a5",()=>iY,"a6",()=>iJ,"a7",()=>ob,"a8",()=>iq,"a9",()=>om,"aa",()=>o6,"ab",()=>oM,"ac",()=>sh,"ad",()=>sk,"ae",()=>ss,"af",()=>se,"ag",()=>oN,"ah",()=>az,"ai",()=>aZ,"aj",()=>sc,"ak",()=>so,"al",()=>sy,"am",()=>oz,"an",()=>iO,"ao",()=>sr,"ap",()=>iD,"aq",()=>iU,"ar",()=>sT,"as",()=>iL,"at",()=>ix,"au",()=>i$,"av",()=>sa,"aw",()=>iP,"ax",()=>iM,"b",()=>oG,"c",()=>sd,"d",()=>oR,"e",()=>oi,"f",()=>sp,"g",()=>oL,"h",()=>oA,"i",()=>sl,"j",()=>si,"k",()=>oH,"l",()=>iV,"m",()=>iN,"n",()=>iG,"o",()=>oh,"p",()=>iR,"q",()=>ok,"r",()=>oc,"s",()=>o$,"t",()=>of,"u",()=>sg,"v",()=>o_,"w",()=>sf,"x",()=>ol,"y",()=>oI,"z",()=>i2],305288);let sR={connect:!0,audio:!1,video:!1},sP=tq.forwardRef(function(e,n){let{room:t,htmlProps:a}=function(e){let{token:n,serverUrl:t,options:a,room:r,connectOptions:i,connect:o,audio:s,video:l,screen:c,onConnected:u,onDisconnected:d,onError:m,onMediaDeviceFailure:p,onEncryptionError:f,simulateParticipants:g,...T}={...sR,...e};a&&r&&iV.warn("when using a manually created room, the options object will be ignored. set the desired options directly when creating the room instead.");let[h,k]=tq.useState(),v=tq.useRef(o);tq.useEffect(()=>{k(r??new tW.Room(a))},[r,JSON.stringify(a,sA)]);let y=tq.useMemo(()=>{let{className:e}=o$();return sE(T,{className:e})},[T]);return tq.useEffect(()=>{if(!h)return;let e=()=>{let e=h.localParticipant;iV.debug("trying to publish local tracks"),Promise.all([e.setMicrophoneEnabled(!!s,"boolean"!=typeof s?s:void 0),e.setCameraEnabled(!!l,"boolean"!=typeof l?l:void 0),e.setScreenShareEnabled(!!c,"boolean"!=typeof c?c:void 0)]).catch(e=>{iV.warn(e),null==m||m(e)})},n=(e,n)=>{let t=tW.MediaDeviceFailure.getFailure(e);null==p||p(t,n)},t=e=>{null==f||f(e)},a=e=>{null==d||d(e)},r=()=>{null==u||u()};return h.on(tW.RoomEvent.SignalConnected,e).on(tW.RoomEvent.MediaDevicesError,n).on(tW.RoomEvent.EncryptionError,t).on(tW.RoomEvent.Disconnected,a).on(tW.RoomEvent.Connected,r),()=>{h.off(tW.RoomEvent.SignalConnected,e).off(tW.RoomEvent.MediaDevicesError,n).off(tW.RoomEvent.EncryptionError,t).off(tW.RoomEvent.Disconnected,a).off(tW.RoomEvent.Connected,r)}},[h,s,l,c,m,f,p,u,d]),tq.useEffect(()=>{if(h){if(g)return void h.simulateParticipants({participants:{count:g},publish:{audio:!0,useRealTracks:!0}});if(o){if(v.current=!0,iV.debug("connecting"),!n)return void iV.debug("no token yet");if(!t){iV.warn("no livekit url provided"),null==m||m(Error("no livekit url provided"));return}h.connect(t,n,i).catch(e=>{iV.warn(e),!0===v.current&&(null==m||m(e))})}else iV.debug("disconnecting because connect is false"),v.current=!1,h.disconnect()}},[o,n,JSON.stringify(i),h,m,t,g]),tq.useEffect(()=>{if(h)return()=>{iV.info("disconnecting on onmount"),h.disconnect()}},[h]),{room:h,htmlProps:y}}(e);return tq.createElement("div",{ref:n,...a},t&&tq.createElement(sm.Provider,{value:t},tq.createElement(sv.Provider,{value:e.featureFlags},e.children)))});e.s(["L",()=>sP,"a",()=>sS,"c",()=>sw,"m",()=>sE,"r",()=>sA,"w",()=>sI],525665);let sN=e=>{let t,a,r,[i,o]=tq.useState({width:0,height:0});tq.useLayoutEffect(()=>{if(e.current){let{width:n,height:t}=e.current.getBoundingClientRect();o({width:n,height:t})}},[e.current]);let s=tq.useCallback(e=>o(e.contentRect),[]);return a=n||(n=function(){let e=!1,n=[],t=new Map;if(typeof window>"u")return;let a=new ResizeObserver((a,r)=>{n=n.concat(a),e||window.requestAnimationFrame(()=>{let a=new Set;for(let e=0;e<n.length;e++){if(a.has(n[e].target))continue;a.add(n[e].target);let i=t.get(n[e].target);null==i||i.forEach(t=>t(n[e],r))}n=[],e=!1}),e=!0});return{observer:a,subscribe(e,n){a.observe(e);let r=t.get(e)??[];r.push(n),t.set(e,r)},unsubscribe(e,n){let r=t.get(e)??[];if(1===r.length){a.unobserve(e),t.delete(e);return}let i=r.indexOf(n);-1!==i&&r.splice(i,1),t.set(e,r)}}}()),t=tq.useRef(s),tq.useEffect(()=>{t.current=s}),r=t,tq.useLayoutEffect(()=>{let n=!1,t=e.current;if(t)return null==a||a.subscribe(t,i),()=>{n=!0,null==a||a.unsubscribe(t,i)};function i(e,t){n||r.current(e,t)}},[e.current,a,r]),null==a||a.observer,i};function sO(e,n,t=!0){let[a,r]=tq.useState(n);return tq.useEffect(()=>{if(t&&r(n),typeof window>"u"||!e)return;let a=e.subscribe(r);return()=>a.unsubscribe()},[e,t]),a}function sM(e){let n=e=>"u">typeof window&&window.matchMedia(e).matches,[t,a]=tq.useState(n(e));function r(){a(n(e))}return tq.useEffect(()=>{let n=window.matchMedia(e);return r(),n.addListener?n.addListener(r):n.addEventListener("change",r),()=>{n.removeListener?n.removeListener(r):n.removeEventListener("change",r)}},[e]),t}function sC(e){let{state:n,dispatch:t}=sn().pin;return{buttonProps:tq.useMemo(()=>{let{className:a}=oG();return sE(e,{className:a,disabled:!(null!=n&&n.length),onClick:()=>{t&&t({msg:"clear_pin"})}})},[e,t,n])}}function sL(e={}){let n=sd(e.participant),{className:t,connectionQualityObserver:a}=tq.useMemo(()=>oR(n),[n]);return{className:t,quality:sO(a,n.connectionQuality)}}function sx(e){let n=sg(e);return sO(tq.useMemo(()=>oi(n),[n]),n.state)}function sU(e,n){let t="function"==typeof e?e:n,a="string"==typeof e?e:void 0,r=sp(),{send:i,messageObservable:o,isSendingObservable:s}=tq.useMemo(()=>oL(r,a,t),[r,a,t]);return{message:sO(o,void 0),send:i,isSending:sO(s,!1)}}function sD(e){let n=sp(),t=sx(n);return{buttonProps:tq.useMemo(()=>{let{className:a,disconnect:r}=oA(n);return sE(e,{className:a,onClick:()=>r(e.stopTracks??!0),disabled:t===tW.ConnectionState.Disconnected})},[n,e,t])}}function sF({trackRef:e,props:n}){let t=sl(e),a=si(),{className:r}=tq.useMemo(()=>oH(),[]),i=tq.useMemo(()=>iN(t,null==a?void 0:a.pin.state),[t,null==a?void 0:a.pin.state]);return{mergedProps:tq.useMemo(()=>sE(n,{className:r,onClick:e=>{var r,o,s,l,c;null==(r=n.onClick)||r.call(n,e),i?null==(s=null==a?void 0:(o=a.pin).dispatch)||s.call(o,{msg:"clear_pin"}):null==(c=null==a?void 0:(l=a.pin).dispatch)||c.call(l,{msg:"set_pin",trackReference:t})}}),[n,r,t,i,null==a?void 0:a.pin]),inFocus:i}}function sB(e,n,t={}){let a=t.gridLayouts??iH,{width:r,height:i}=sN(e),o=iG(a,n,r,i);return tq.useEffect(()=>{e.current&&o&&(e.current.style.setProperty("--lk-col-count",null==o?void 0:o.columns.toString()),e.current.style.setProperty("--lk-row-count",null==o?void 0:o.rows.toString()))},[e,o]),{layout:o,containerWidth:r,containerHeight:i}}function sj(e,n={}){var t,a;let r=sd("string"==typeof e?n.participant:e.participant),i="string"==typeof e?{participant:r,source:e}:e,[o,s]=tq.useState(!!(null!=(t=i.publication)&&t.isMuted||null!=(a=r.getTrackPublication(i.source))&&a.isMuted));return tq.useEffect(()=>{let e=oh(i).subscribe(s);return()=>e.unsubscribe()},[iR(i)]),o}function sV(e){let n=sd(e);return sO(tq.useMemo(()=>ok(n),[n]),n.isSpeaking)}function sH(e={}){let n=sg(e.room),[t,a]=tq.useState(n.localParticipant),[r,i]=tq.useState(t.isMicrophoneEnabled),[o,s]=tq.useState(t.isCameraEnabled),[l,c]=tq.useState(t.isScreenShareEnabled),[u,d]=tq.useState(t.lastMicrophoneError),[m,p]=tq.useState(t.lastCameraError),[f,g]=tq.useState(void 0),[T,h]=tq.useState(void 0),k=e=>{s(e.isCameraEnabled),i(e.isMicrophoneEnabled),c(e.isScreenShareEnabled),h(e.cameraTrack),g(e.microphoneTrack),d(e.participant.lastMicrophoneError),p(e.participant.lastCameraError),a(e.participant)};return tq.useEffect(()=>{let e=of(n.localParticipant).subscribe(k);return()=>e.unsubscribe()},[n]),{isMicrophoneEnabled:r,isScreenShareEnabled:l,isCameraEnabled:o,microphoneTrack:f,cameraTrack:T,lastMicrophoneError:u,lastCameraError:m,localParticipant:t}}function sG(){let e=sp();return sO(tq.useMemo(()=>o_(e.localParticipant),[e]),e.localParticipant.permissions)}function s$({kind:e,room:n,track:t,requestPermissions:a,onError:r}){let i=sf(),o=tq.useMemo(()=>n??i??new tW.Room,[n,i]),s=sO(tq.useMemo(()=>ol(e,r,a),[e,a,r]),[]),[l,c]=tq.useState((null==o?void 0:o.getActiveDevice(e))??"default"),{className:u,activeDeviceObservable:d,setActiveMediaDevice:m}=tq.useMemo(()=>oI(e,o),[e,o,t]);return tq.useEffect(()=>{let e=d.subscribe(e=>{e&&(iV.info("setCurrentDeviceId",e),c(e))});return()=>{null==e||e.unsubscribe()}},[d]),{devices:s,className:u,activeDeviceId:l,setActiveMediaDevice:m}}function sJ({kind:e,onError:n}){return sO(tq.useMemo(()=>ol(e,n),[e,n]),[])}function sY(e,n,t={}){let a=tq.useRef([]),r=tq.useRef(-1),i=n!==r.current,o="function"==typeof t.customSortFunction?t.customSortFunction(e):i2(e),s=[...o];if(!1===i)try{s=i7(a.current,o,n)}catch(e){iV.error("Error while running updatePages(): ",e)}return i?a.current=o:a.current=s,r.current=n,s}function sq(e,n){let[t,a]=tq.useState(1),r=Math.max(Math.ceil(n.length/e),1);t>r&&a(r);let i=t*e,o=i-e,s=e=>{a(n=>"next"===e?n===r?n:n+1:1===n?n:n-1)},l=sY(n,e).slice(o,i);return{totalPageCount:r,nextPage:()=>s("next"),prevPage:()=>s("previous"),setPage:e=>{e>r?a(r):e<1?a(1):a(e)},firstItemIndex:o,lastItemIndex:i,tracks:l,currentPage:t}}function sW({trackRef:e,onParticipantClick:n,disableSpeakingIndicator:t,htmlProps:a}){let r=sl(e),i=tq.useMemo(()=>{let{className:e}=oO();return sE(a,{className:e,onClick:e=>{var t;if(null==(t=a.onClick)||t.call(a,e),"function"==typeof n){let e=r.publication??r.participant.getTrackPublication(r.source);n({participant:r.participant,track:e})}}})},[a,n,r.publication,r.source,r.participant]),o=r.participant.getTrackPublication(tW.Track.Source.Microphone),s=tq.useMemo(()=>({participant:r.participant,source:tW.Track.Source.Microphone,publication:o}),[o,r.participant]),l=sj(r),c=sj(s),u=sV(r.participant),d=function(e){if(e.publication instanceof tW.LocalTrackPublication){let n=e.publication.track;if(n){let{facingMode:e}=(0,tW.facingModeFromLocalTrack)(n);return e}}return"undefined"}(r);return{elementProps:{"data-lk-audio-muted":c,"data-lk-video-muted":l,"data-lk-speaking":!0!==t&&u,"data-lk-local-participant":r.participant.isLocal,"data-lk-source":r.source,"data-lk-facing-mode":d,...i}}}function sK(e={}){let n=sg(e.room),[t,a]=tq.useState([]);return tq.useEffect(()=>{let t=ov(n,{additionalRoomEvents:e.updateOnlyOn}).subscribe(a);return()=>t.unsubscribe()},[n,JSON.stringify(e.updateOnlyOn)]),t}function sQ(e={}){let n=sK(e),{localParticipant:t}=sH(e);return tq.useMemo(()=>[t,...n],[t,n])}function sX(e){return e=st(e),tq.useMemo(()=>(null==e?void 0:e.pin.state)!==void 0&&e.pin.state.length>=1?e.pin.state:[],[e.pin.state])}function sz(e,n={}){let t=sp(),[a]=tq.useState(n.updateOnlyOn),r=tq.useMemo(()=>"string"==typeof e?oy(t,e,{additionalEvents:a}):oE(t,e,{additionalEvents:a}),[t,JSON.stringify(e),a]),[i,o]=tq.useState({p:void 0});return tq.useEffect(()=>{let e=r.subscribe(e=>o({p:e}));return()=>e.unsubscribe()},[r]),i.p}function sZ(e={}){let n=sg(e.room),{name:t,metadata:a}=sO(tq.useMemo(()=>oo(n),[n]),{name:n.name,metadata:n.metadata});return{name:t,metadata:a}}function s0(e){let n=sg(null==e?void 0:e.room);return sO(tq.useMemo(()=>os(n),[n]),n.activeSpeakers)}function s1({room:e,props:n}){let t=sg(e),{className:a,roomAudioPlaybackAllowedObservable:r,handleStartAudioPlayback:i}=tq.useMemo(()=>oB(),[]),{canPlayAudio:o}=sO(tq.useMemo(()=>r(t),[t,r]),{canPlayAudio:t.canPlaybackAudio});return{mergedProps:tq.useMemo(()=>sE(n,{className:a,onClick:()=>{i(t)},style:{display:o?"none":"block"}}),[n,a,o,i,t]),canPlayAudio:o}}function s2({room:e,props:n}){let t=sg(e),{className:a,roomVideoPlaybackAllowedObservable:r,handleStartVideoPlayback:i}=tq.useMemo(()=>oj(),[]),{canPlayVideo:o}=sO(tq.useMemo(()=>r(t),[t,r]),{canPlayVideo:t.canPlaybackVideo});return{mergedProps:tq.useMemo(()=>sE(n,{className:a,onClick:()=>{i(t)},style:{display:o?"none":"block"}}),[n,a,o,i,t]),canPlayVideo:o}}function s3(e,n={}){let t=tq.useRef(null),a=tq.useRef(null),r=n.minSwipeDistance??50,i=e=>{a.current=null,t.current=e.targetTouches[0].clientX},o=e=>{a.current=e.targetTouches[0].clientX},s=tq.useCallback(()=>{if(!t.current||!a.current)return;let e=t.current-a.current,i=e>r,o=e<-r;i&&n.onLeftSwipe&&n.onLeftSwipe(),o&&n.onRightSwipe&&n.onRightSwipe()},[r,n]);tq.useEffect(()=>{let n=e.current;return n&&(n.addEventListener("touchstart",i,{passive:!0}),n.addEventListener("touchmove",o,{passive:!0}),n.addEventListener("touchend",s,{passive:!0})),()=>{n&&(n.removeEventListener("touchstart",i),n.removeEventListener("touchmove",o),n.removeEventListener("touchend",s))}},[e,s])}function s9({props:e}){let{dispatch:n,state:t}=sn().widget,{className:a}=tq.useMemo(()=>oV(),[]);return{mergedProps:tq.useMemo(()=>sE(e,{className:a,onClick:()=>{n&&n({msg:"toggle_chat"})},"aria-pressed":null!=t&&t.showChat?"true":"false","data-lk-unread-msgs":t?t.unreadMessages<10?t.unreadMessages.toFixed(0):"9+":"0"}),[e,a,n,t])}}function s4(e){var n,t;let a=sl(e),{className:r,mediaMutedObserver:i}=tq.useMemo(()=>oP(a),[iR(a)]);return{isMuted:sO(i,!!(null!=(n=a.publication)&&n.isMuted||null!=(t=a.participant.getTrackPublication(a.source))&&t.isMuted)),className:r}}function s5({source:e,onChange:n,initialState:t,captureOptions:a,publishOptions:r,onDeviceError:i,room:o,...s}){var l;let c=sf(),u=tq.useMemo(()=>o??c,[o,c]),d=null==(l=null==u?void 0:u.localParticipant)?void 0:l.getTrackPublication(e),m=tq.useRef(!1),{toggle:p,className:f,pendingObserver:g,enabledObserver:T}=tq.useMemo(()=>u?oS(e,u,a,r,i):ow(),[u,e,JSON.stringify(a),r]),h=sO(g,!1),k=sO(T,t??!!(null!=d&&d.isEnabled));tq.useEffect(()=>{null==n||n(k,m.current),m.current=!1},[k,n]),tq.useEffect(()=>{void 0!==t&&(iV.debug("forcing initial toggle state",e,t),p(t))},[]);let v=tq.useMemo(()=>sE(s,{className:f}),[s,f]),y=tq.useCallback(e=>{var n;m.current=!0,p().catch(()=>m.current=!1),null==(n=s.onClick)||n.call(s,e)},[s,p]);return{toggle:p,enabled:k,pending:h,track:d,buttonProps:{...v,"aria-pressed":k,"data-lk-source":e,"data-lk-enabled":k,disabled:h,onClick:y}}}function s6(e=[tW.Track.Source.Camera,tW.Track.Source.Microphone,tW.Track.Source.ScreenShare,tW.Track.Source.ScreenShareAudio,tW.Track.Source.Unknown],n={}){let t=sg(n.room),[a,r]=tq.useState([]),[i,o]=tq.useState([]),s=tq.useMemo(()=>e.map(e=>iQ(e)?e.source:e),[JSON.stringify(e)]);return tq.useEffect(()=>{let e=oq(t,s,{additionalRoomEvents:n.updateOnlyOn,onlySubscribed:n.onlySubscribed}).subscribe(({trackReferences:e,participants:n})=>{iV.debug("setting track bundles",e,n),r(e),o(n)});return()=>e.unsubscribe()},[t,JSON.stringify(n.onlySubscribed),JSON.stringify(n.updateOnlyOn),JSON.stringify(e)]),tq.useMemo(()=>{if(!iX(e))return a;{let n=function(e,n){let t=new Map;if(iX(e)){let a=e.filter(e=>e.withPlaceholder).map(e=>e.source);n.forEach(e=>{let n=e.getTrackPublications().map(e=>{var n;return null==(n=e.track)?void 0:n.source}).filter(e=>void 0!==e),r=Array.from(function(e,n){let t=new Set(e);for(let e of n)t.delete(e);return t}(new Set(a),new Set(n)));r.length>0&&t.set(e.identity,r)})}return t}(e,i),t=Array.from(a);return i.forEach(e=>{n.has(e.identity)&&(n.get(e.identity)??[]).forEach(n=>{a.find(({participant:t,publication:a})=>e.identity===t.identity&&a.source===n)||(iV.debug(`Add ${n} placeholder for participant ${e.identity}.`),t.push({participant:e,source:n}))})}),t}},[a,i,e])}function s8(e){let n=sg(null==e?void 0:e.room),t=sx(n),a=tq.useMemo(()=>t===tW.ConnectionState.Disconnected,[t]),r=tq.useMemo(()=>oF(n,e),[n,e,a]),i=sO(r.isSendingObservable,!1),o=sO(r.messageObservable,[]);return{send:r.send,chatMessages:o,isSending:i}}function s7(e={}){let[n,t]=tq.useState(o2(e.defaults,e.preventLoad??!1)),a=tq.useCallback(e=>{t(n=>({...n,audioEnabled:e}))},[]),r=tq.useCallback(e=>{t(n=>({...n,videoEnabled:e}))},[]),i=tq.useCallback(e=>{t(n=>({...n,audioDeviceId:e}))},[]),o=tq.useCallback(e=>{t(n=>({...n,videoDeviceId:e}))},[]),s=tq.useCallback(e=>{t(n=>({...n,username:e}))},[]);return tq.useEffect(()=>{o1(n,e.preventSave??!1)},[n,e.preventSave]),{userChoices:n,saveAudioInputEnabled:a,saveVideoInputEnabled:r,saveAudioInputDeviceId:i,saveVideoInputDeviceId:o,saveUsername:s}}function le(e,n={}){let t=sd(e),a=sg(n.room);return sO(tq.useMemo(()=>od(a,t),[a,t]),t.isLocal?t.isE2EEEnabled:!!(null!=t&&t.isEncrypted))}let ln={bands:5,loPass:100,hiPass:600,updateInterval:32,analyserOptions:{fftSize:2048}};function lt(e,n={}){var t;let a=e instanceof tW.Track?e:null==(t=null==e?void 0:e.publication)?void 0:t.track,r={...ln,...n},[i,o]=tq.useState(Array(r.bands).fill(0));return tq.useEffect(()=>{if(!a||!(null!=a&&a.mediaStream))return void o(e=>e.slice().fill(0));let{analyser:e,cleanup:t}=(0,tW.createAudioAnalyser)(a,r.analyserOptions),i=new Float32Array(e.frequencyBinCount),s=setInterval(()=>{e.getFloatFrequencyData(i);let t=new Float32Array(i.length);for(let e=0;e<i.length;e++)t[e]=i[e];let a=(t=t.slice(n.loPass,n.hiPass)).map(e=>e===-1/0?0:Math.sqrt(1- -1*Math.max(-100,Math.min(-10,e))/100)),s=Math.ceil(a.length/r.bands),l=[];for(let e=0;e<r.bands;e++){let n=a.slice(e*s,(e+1)*s).reduce((e,n)=>e+=n,0);l.push(n/s)}o(l)},r.updateInterval);return()=>{t(),clearInterval(s)}},[a,null==a?void 0:a.mediaStream,JSON.stringify(n)]),i}iq.AgentState;var la,lr,li,lo={exports:{}};!function(){if(li)return lo.exports;li=1;var e,n="object"==typeof Reflect?Reflect:null,t=n&&"function"==typeof n.apply?n.apply:function(e,n,t){return Function.prototype.apply.call(e,n,t)};e=n&&"function"==typeof n.ownKeys?n.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var a=Number.isNaN||function(e){return e!=e};function r(){r.init.call(this)}lo.exports=r,lo.exports.once=function(e,n){return new Promise(function(t,a){var r,i,o;function s(t){e.removeListener(n,l),a(t)}function l(){"function"==typeof e.removeListener&&e.removeListener("error",s),t([].slice.call(arguments))}f(e,n,l,{once:!0}),"error"!==n&&(r=e,i=s,o={once:!0},"function"==typeof r.on&&f(r,"error",i,o))})},r.EventEmitter=r,r.prototype._events=void 0,r.prototype._eventsCount=0,r.prototype._maxListeners=void 0;var i=10;function o(e){if("function"!=typeof e)throw TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function s(e){return void 0===e._maxListeners?r.defaultMaxListeners:e._maxListeners}function l(e,n,t,a){var r,i,l;if(o(t),void 0===(i=e._events)?(i=e._events=Object.create(null),e._eventsCount=0):(void 0!==i.newListener&&(e.emit("newListener",n,t.listener?t.listener:t),i=e._events),l=i[n]),void 0===l)l=i[n]=t,++e._eventsCount;else if("function"==typeof l?l=i[n]=a?[t,l]:[l,t]:a?l.unshift(t):l.push(t),(r=s(e))>0&&l.length>r&&!l.warned){l.warned=!0;var c=Error("Possible EventEmitter memory leak detected. "+l.length+" "+String(n)+" listeners added. Use emitter.setMaxListeners() to increase limit");c.name="MaxListenersExceededWarning",c.emitter=e,c.type=n,c.count=l.length,console&&console.warn&&console.warn(c)}return e}function c(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0==arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function u(e,n,t){var a={fired:!1,wrapFn:void 0,target:e,type:n,listener:t},r=c.bind(a);return r.listener=t,a.wrapFn=r,r}function d(e,n,t){var a=e._events;if(void 0===a)return[];var r=a[n];return void 0===r?[]:"function"==typeof r?t?[r.listener||r]:[r]:t?function(e){for(var n=Array(e.length),t=0;t<n.length;++t)n[t]=e[t].listener||e[t];return n}(r):p(r,r.length)}function m(e){var n=this._events;if(void 0!==n){var t=n[e];if("function"==typeof t)return 1;if(void 0!==t)return t.length}return 0}function p(e,n){for(var t=Array(n),a=0;a<n;++a)t[a]=e[a];return t}function f(e,n,t,a){if("function"==typeof e.on)a.once?e.once(n,t):e.on(n,t);else if("function"==typeof e.addEventListener)e.addEventListener(n,function r(i){a.once&&e.removeEventListener(n,r),t(i)});else throw TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e)}Object.defineProperty(r,"defaultMaxListeners",{enumerable:!0,get:function(){return i},set:function(e){if("number"!=typeof e||e<0||a(e))throw RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");i=e}}),r.init=function(){(void 0===this._events||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},r.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||a(e))throw RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},r.prototype.getMaxListeners=function(){return s(this)},r.prototype.emit=function(e){for(var n=[],a=1;a<arguments.length;a++)n.push(arguments[a]);var r="error"===e,i=this._events;if(void 0!==i)r=r&&void 0===i.error;else if(!r)return!1;if(r){if(n.length>0&&(o=n[0]),o instanceof Error)throw o;var o,s=Error("Unhandled error."+(o?" ("+o.message+")":""));throw s.context=o,s}var l=i[e];if(void 0===l)return!1;if("function"==typeof l)t(l,this,n);else for(var c=l.length,u=p(l,c),a=0;a<c;++a)t(u[a],this,n);return!0},r.prototype.addListener=function(e,n){return l(this,e,n,!1)},r.prototype.on=r.prototype.addListener,r.prototype.prependListener=function(e,n){return l(this,e,n,!0)},r.prototype.once=function(e,n){return o(n),this.on(e,u(this,e,n)),this},r.prototype.prependOnceListener=function(e,n){return o(n),this.prependListener(e,u(this,e,n)),this},r.prototype.removeListener=function(e,n){var t,a,r,i,s;if(o(n),void 0===(a=this._events)||void 0===(t=a[e]))return this;if(t===n||t.listener===n)0==--this._eventsCount?this._events=Object.create(null):(delete a[e],a.removeListener&&this.emit("removeListener",e,t.listener||n));else if("function"!=typeof t){for(r=-1,i=t.length-1;i>=0;i--)if(t[i]===n||t[i].listener===n){s=t[i].listener,r=i;break}if(r<0)return this;0===r?t.shift():function(e,n){for(;n+1<e.length;n++)e[n]=e[n+1];e.pop()}(t,r),1===t.length&&(a[e]=t[0]),void 0!==a.removeListener&&this.emit("removeListener",e,s||n)}return this},r.prototype.off=r.prototype.removeListener,r.prototype.removeAllListeners=function(e){var n,t,a;if(void 0===(t=this._events))return this;if(void 0===t.removeListener)return 0==arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==t[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete t[e]),this;if(0==arguments.length){var r,i=Object.keys(t);for(a=0;a<i.length;++a)"removeListener"!==(r=i[a])&&this.removeAllListeners(r);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(n=t[e]))this.removeListener(e,n);else if(void 0!==n)for(a=n.length-1;a>=0;a--)this.removeListener(e,n[a]);return this},r.prototype.listeners=function(e){return d(this,e,!0)},r.prototype.rawListeners=function(e){return d(this,e,!1)},r.listenerCount=function(e,n){return"function"==typeof e.listenerCount?e.listenerCount(n):m.call(e,n)},r.prototype.listenerCount=m,r.prototype.eventNames=function(){return this._eventsCount>0?e(this._events):[]},lo.exports}();var ls=((a=ls||{}).CameraChanged="cameraChanged",a.MicrophoneChanged="microphoneChanged",a.StateChanged="stateChanged",a),ll=((r=ll||{}).ConnectionStateChanged="connectionStateChanged",r.MediaDevicesError="mediaDevicesError",r.EncryptionError="encryptionError",r),lc=((i=lc||{}).MessageReceived="messageReceived",i);e.s(["A",()=>sG,"B",()=>sX,"C",()=>sH,"E",()=>sU,"H",()=>sV,"K",()=>sQ,"L",()=>sz,"M",()=>sK,"O",()=>s0,"a",()=>sx,"b",()=>s9,"c",()=>sD,"d",()=>sF,"e",()=>s$,"f",()=>s1,"g",()=>s2,"h",()=>s5,"i",()=>sL,"j",()=>sO,"k",()=>s4,"l",()=>sW,"m",()=>le,"n",()=>sB,"o",()=>sq,"p",()=>s3,"q",()=>sN,"r",()=>sY,"s",()=>lt,"t",()=>s6,"u",()=>sC,"v",()=>sZ,"w",()=>s8,"x",()=>s7,"y",()=>sJ,"z",()=>sM],249437),e.s(["useLocalParticipant",()=>sH],93336),e.s(["useLocalParticipantPermissions",()=>sG],305407)},882234,692948,e=>{"use strict";e.s(["isParticipantLoggedIn",()=>u,"useIsLocalParticipantLoggedIn",()=>c],882234);var n=e.i(50389),t=e.i(93336),a=e.i(89085),r=e.i(188014);e.s(["getParticipantRole",()=>l,"useLivekitRole",()=>s],692948);var i=e.i(305407),o=e.i(325320);let s=()=>{let e,t=(0,n.c)(4),{token:r}=(0,o.useLivestreamContext)(),s=(0,i.useLocalParticipantPermissions)(),l=r?.role===a.LivekitRole.HOST,c=!l&&s?.canPublish,u=!l&&!c;return t[0]!==c||t[1]!==l||t[2]!==u?(e={isHost:l,isCoHost:c,isViewer:u},t[0]=c,t[1]=l,t[2]=u,t[3]=e):e=t[3],e},l=e=>{let n=(0,r.safeParseParticipantMetadata)(e);return n?.role||a.LivekitRole.VIEWER},c=()=>{let e,a=(0,n.c)(4),{isHost:r,isCoHost:i}=s(),{localParticipant:o}=(0,t.useLocalParticipant)(),l=o.identity;return a[0]!==l||a[1]!==i||a[2]!==r?(e=r||i||l.includes("-viewer-"),a[0]=l,a[1]=i,a[2]=r,a[3]=e):e=a[3],e},u=e=>{let n=(0,r.safeParseParticipantMetadata)(e);return n?.role===a.LivekitRole.HOST||n?.role===a.LivekitRole.CO_HOST||e.identity.includes("-viewer-")}},396693,e=>{"use strict";let n="/livestreams/pepe-placeholder.png",t=["ipfs.io","cf-ipfs.com","pump.mypinata.cloud"];e.s(["IPFS_PREFIX",0,"https://ipfs.io/ipfs/","PEPE_PLACEHOLDER",0,n,"cleanImageUri",0,(e,a)=>e?(e=>{try{let n=new URL(e);return t.includes(n.hostname)&&n.pathname.startsWith("/ipfs/")&&n.pathname.length>6}catch(e){return!1}})(e)?(!(e=e.includes("https://cf-ipfs.com/ipfs/")?e.replace(/https:\/\/cf-ipfs\.com\/ipfs\//,"https://ipfs.io/ipfs/"):e.replace(/https:\/\/[^/]+\/ipfs\//,a)).startsWith(a)&&e.includes("ipfs/")&&(e=a+e.substring(e.indexOf("ipfs/")+5)),e):(e=>{try{let n=new URL(e);return"https:"===n.protocol}catch(e){return!1}})(e)?e:n:n])},182251,339269,188014,202565,e=>{"use strict";e.s(["useLivestreamDataStore",()=>k],182251);var n=e.i(78436);e.s(["isHostOrCoHost",()=>h,"isLivestreamEqual",()=>T],202565);var t=e.i(89085);e.s(["buildEnrichedParticipant",()=>m,"getParticipantAddress",()=>p,"getParticipantDisplayName",()=>f,"isTrackActive",()=>g,"safeParseParticipantMetadata",()=>d],188014);var a=e.i(852687);e.i(484169);var r=e.i(882234),i=e.i(692948);e.s(["getParticipantMetadata",()=>u,"useLocalParticipantMetadata",()=>c],339269);var o=e.i(50389),s=e.i(93336),l=e.i(396693);let c=()=>{let e,n=(0,o.c)(2),{localParticipant:t}=(0,s.useLocalParticipant)();return n[0]!==t?(e=u(t),n[0]=t,n[1]=e):e=n[1],e},u=e=>{let n=d(e),a=!!n?.invited_to_stage,r=!!n?.screen_share_request_timestamp,i=!!n?.hand_raised,o=n?.role||t.LivekitRole.VIEWER,s=n?.username;return{isScreenShareRequested:r,isHandRaised:i,isInvited:a,role:o,avatarUrl:n?.avatar_image||l.PEPE_PLACEHOLDER,username:s}},d=e=>{try{if(!e?.metadata)return null;let n=JSON.parse(e.metadata);return{...n,avatar_image:n.avatar_image||l.PEPE_PLACEHOLDER}}catch{return null}},m=({participant:e,localParticipant:n})=>{let{isHandRaised:t,isScreenShareRequested:a,isInvited:o,username:s}=u(e),l=!!n&&e?.identity===n?.identity;return{identity:e.identity,displayName:f(e),participant:e,isCurrentUser:l,isHandRaised:t,isScreenShareRequested:a,isInvited:o,isLoggedIn:(0,r.isParticipantLoggedIn)(e),role:(0,i.getParticipantRole)(e),username:s,avatarUrl:u(e).avatarUrl}},p=e=>e.split("-")[0]||e,f=(e,n)=>{let t,r=d(e);return t=e.kind===a.ParticipantInfo_Kind.AGENT?e.identity.slice(e.identity.length-6,e.identity.length):e.kind===a.ParticipantInfo_Kind.INGRESS?r?.username||e.identity.split("-")[0].slice(0,6)||"Unknown":e.name||r?.username||e.identity.split("-")[0].slice(0,6)||"Unknown",n?`${t} (screensharing)`:t},g=e=>!!e?.publication?.track&&!e.publication.track.isMuted,T=(e,n)=>e===n||!!e&&!!n&&["id","mintId","creatorAddress","streamStartTimestamp","streamEndTimestamp","isLive","downrankScore","title"].every(t=>e[t]===n[t]);function h(e){return!!e&&(!!e&&d(e)?.role===t.LivekitRole.HOST||!!e&&d(e)?.role===t.LivekitRole.CO_HOST)}let k=(0,n.create)((e,n)=>({livestreamsByMintId:{},getLivestream:e=>n().livestreamsByMintId[e]??null,setLivestream:(t,a)=>{(({get:e,set:n,key:t,next:a,equals:r})=>{let i=e()[t];(r?r(i,a):Object.is(i,a))||n(e=>({...e,[t]:a}))})({get:n,set:e,key:"livestreamsByMintId",next:{...n().livestreamsByMintId,[t]:a},equals:(e,n)=>!!T(e[t]??null,n[t]??null)&&Object.keys(e).length===Object.keys(n).length})},clearLivestream:n=>e(e=>{let{[n]:t,...a}=e.livestreamsByMintId;return{livestreamsByMintId:a}})}))},392230,212761,e=>{"use strict";e.s(["LivestreamDataSync",()=>u],392230);var n=e.i(50389),t=e.i(470049),a=e.i(182251),r=e.i(54567),i=e.i(690877),o=e.i(759622);let s="get-livestream",l=({mintId:e,enabled:n,onSuccess:t,refetchInterval:a,refetchIntervalInBackground:l,refetchOnWindowFocus:c})=>{let u=(0,o.useApiClient)();return(0,i.useQuery)({queryKey:[s,e],queryFn:async()=>{r.logger.debug("[useGetLivestream] Attempting to fetch livestream data",{mintId:e});let n=new URLSearchParams;n.set("mintId",e);try{let e=await u.get(`livestream?${n.toString()}`).json();return t?.(e),e}catch(t){let n=t instanceof Error?t.message:String(t);throw r.logger.error("[useGetLivestream] Fetch failed",{mintId:e,error:n}),t}},enabled:n,refetchOnWindowFocus:c??!1,refetchInterval:a,refetchIntervalInBackground:l})};e.s(["GET_LIVESTREAM_QUERY_KEY",0,s,"useGetLivestream",0,l],212761);var c=e.i(325320);let u=e=>{let i,o,s,u=(0,n.c)(11),{isLive:d,shouldGetLivestreamData:m,shouldGetCoinInfo:p,initialBanExpiry:f,initialLivestream:g,setIsBanned:T}=e,{mintId:h,isDisconnected:k}=(0,c.useLivestreamContext)(),v=!!k&&5e3,y=d&&(k||!g)&&m;u[0]!==h||u[1]!==v||u[2]!==y?(i={mintId:h,refetchInterval:v,refetchIntervalInBackground:!1,refetchOnWindowFocus:!0,enabled:y},u[0]=h,u[1]=v,u[2]=y,u[3]=i):i=u[3],(e=>{let t,i,o,s,c=(0,n.c)(17),{mintId:u,enabled:d,refetchInterval:m,refetchIntervalInBackground:p,refetchOnWindowFocus:f}=e,g=void 0===d||d,{getLivestream:T,setLivestream:h}=(0,a.useLivestreamDataStore)();c[0]!==T||c[1]!==u?(t=T(u),c[0]=T,c[1]=u,c[2]=t):t=c[2];let k=t;c[3]!==u||c[4]!==h?(i=e=>{let n=!e||e?.isLive===!1,t=e?.isLive===!0;n?h(u,null):t&&h(u,e),r.logger.debug("[useLivestreamData] Query response",{mintId:u,action:n?"clear":t?"update":"keep",isLive:e?.isLive})},c[3]=u,c[4]=h,c[5]=i):i=c[5],c[6]!==g||c[7]!==u||c[8]!==m||c[9]!==p||c[10]!==f||c[11]!==i?(o={mintId:u,enabled:g,refetchInterval:m,refetchIntervalInBackground:p,refetchOnWindowFocus:f,onSuccess:i},c[6]=g,c[7]=u,c[8]=m,c[9]=p,c[10]=f,c[11]=i,c[12]=o):o=c[12];let{isLoading:v,error:y}=l(o);return c[13]!==y||c[14]!==v||c[15]!==k?(s={livestream:k,isLoading:v,error:y},c[13]=y,c[14]=v,c[15]=k,c[16]=s):s=c[16]})(i),u[4]!==h||u[5]!==T?(o=e=>{let n=Date.now(),t=e?.livestream_ban_expiry,a=!!t&&t>n;r.logger.debug("[LivestreamProvider] useLivestreamCoinInfo onSuccess",{mintId:h,dataExists:!!e,calculatedIsBanned:a}),T(a)},u[4]=h,u[5]=T,u[6]=o):o=u[6];let _=d&&void 0===f&&p;return u[7]!==h||u[8]!==o||u[9]!==_?(s={mintId:h,onSuccess:o,enabled:_},u[7]=h,u[8]=o,u[9]=_,u[10]=s):s=u[10],(0,t.useLivestreamCoinInfo)(s),null}},921753,e=>{"use strict";var n=e.i(690877),t=e.i(759622),a=e.i(54567);let r="is-creator";e.s(["IS_CREATOR_QUERY_KEY",0,r,"useIsApprovedCreator",0,({mintId:e,enabled:i,onSuccess:o,walletAddress:s})=>{let l=(0,t.useApiClient)();return(0,n.useQuery)({queryKey:[r,e,s],queryFn:async()=>{let n=new URLSearchParams;n.set("mintId",e);try{let e=await l.get(`livestream/is-approved-creator?${n.toString()}`).json();return o?.(e),e}catch(t){let n=t instanceof Error?t.message:String(t);throw a.logger.error("[useIsApprovedCreator] Fetch failed",{mintId:e,error:n}),t}},enabled:i,select:e=>e.isApprovedCreator,refetchOnWindowFocus:!1})}])},275762,e=>{"use strict";e.s(["useLivestream",()=>r]);var n=e.i(856038),t=e.i(182251),a=e.i(202565);let r=e=>{let r=(0,t.useLivestreamDataStore)(n=>n.livestreamsByMintId[e]??null),i=(0,n.useRef)(r);return(0,a.isLivestreamEqual)(i.current,r)||(i.current=r),i.current}},928785,264552,26454,565813,912585,751973,380075,298180,600963,550118,18671,571054,e=>{"use strict";e.s(["BLOCK_REASON_MESSAGES",0,{rate_limit:"message moderated",too_many_identical_10s:"message moderated",too_many_identical_lastN:"message moderated",too_many_consecutive:"message moderated"},"BUILD_HISTORY_LIMIT",0,200,"LAST_N_MESSAGES_COUNT",0,10,"MAX_CONSECUTIVE_IDENTICAL",0,3,"MAX_IDENTICAL_IN_10S",0,2,"MAX_IDENTICAL_IN_LAST_N",0,4,"MIN_TEXT_LENGTH_FOR_DUPLICATE_CHECK",0,4,"ONE_SECOND_MS",0,1e3,"PER_USER_RATE_LIMIT_PER_SEC",0,2,"TEN_SECONDS_MS",0,1e4],928785);var n,t,a,r,i=e.i(50389),o=e.i(690877),s=e.i(812768),l=e.i(759622),c=e.i(867175),u=e.i(54567);let d="get-banned-users";function m(e,n){if(n instanceof s.HTTPError){let e=n.response.status;if(401===e||403===e)return!1}return e<3}e.s(["GET_BANNED_USERS_QUERY_KEY",0,d,"useGetBannedUsers",0,(e,n)=>{let t,a,r,s,p=(0,i.c)(11);p[0]!==n?(t=void 0===n?{}:n,p[0]=n,p[1]=t):t=p[1];let{enabled:f}=t,{user:g}=(0,c.useLivestreamUserContext)(),T=(0,l.useLivechatApiClient)();p[2]!==e?(a=[d,e],p[2]=e,p[3]=a):a=p[3],p[4]!==T||p[5]!==e?(r=async()=>{if(!e)return u.logger.debug("[useGetBannedUsers] Skipping fetch: roomId is missing"),[];u.logger.debug(`[useGetBannedUsers] Fetching banned users for room: ${e}`);try{let n=await T.get(`chat/moderation/rooms/${e}/bans`).json();return u.logger.debug(`[useGetBannedUsers] Fetched ${n.length} banned users for room: ${e}`),n}catch(t){let n=t instanceof Error?t.message:String(t);throw u.logger.error(`[useGetBannedUsers] Failed to fetch banned users for room: ${e}`,{error:n}),t}},p[4]=T,p[5]=e,p[6]=r):r=p[6];let h=!!e&&!!g?.address&&(void 0===f||f);return p[7]!==a||p[8]!==r||p[9]!==h?(s={queryKey:a,queryFn:r,enabled:h,staleTime:6e4,refetchOnWindowFocus:!1,retry:m},p[7]=a,p[8]=r,p[9]=h,p[10]=s):s=p[10],(0,o.useQuery)(s)}],264552);var p=e.i(78436);let f=(0,p.create)((e,n)=>({roomModeratorsByRoom:{},setModerators:(n,t)=>e(e=>({roomModeratorsByRoom:{...e.roomModeratorsByRoom,[n]:new Set(t.map(e=>e.toLowerCase()))}})),addModerator:(n,t)=>e(e=>{let a=new Set(e.roomModeratorsByRoom[n]||new Set);return a.add(t.toLowerCase()),{roomModeratorsByRoom:{...e.roomModeratorsByRoom,[n]:a}}}),removeModerator:(n,t)=>e(e=>{let a=new Set(e.roomModeratorsByRoom[n]||new Set);return a.delete(t.toLowerCase()),{roomModeratorsByRoom:{...e.roomModeratorsByRoom,[n]:a}}}),isRoomModerator:(e,t)=>{let a=n().roomModeratorsByRoom[e];return!!a&&a.has(t.toLowerCase())},clearModerators:n=>e(e=>{if(n){let{[n]:t,...a}=e.roomModeratorsByRoom;return{roomModeratorsByRoom:a}}return{roomModeratorsByRoom:{}}})}));e.s(["selectIsRoomModerator",0,(e,n)=>t=>{if(!n)return!1;let a=t.roomModeratorsByRoom[e];return!!(a&&a.has(n.toLowerCase()))},"useRoomModeratorsStore",0,f],26454);let g="get-room-moderators";function T(e){return e.userAddress}function h(e,n){return(!(n instanceof s.HTTPError)||401!==n.response.status)&&e<3}e.s(["GET_ROOM_MODERATORS_QUERY_KEY",0,g,"useGetRoomModerators",0,(e,n)=>{let t,a,r,d,m=(0,i.c)(11);m[0]!==n?(t=void 0===n?{}:n,m[0]=n,m[1]=t):t=m[1];let{enabled:p}=t,{user:k}=(0,c.useLivestreamUserContext)(),v=(0,l.useLivechatApiClient)();m[2]!==e?(a=[g,e],m[2]=e,m[3]=a):a=m[3],m[4]!==v||m[5]!==e?(r=async()=>{if(!e)return u.logger.debug("[useGetRoomModerators] Skipping fetch: roomId is missing"),[];u.logger.debug(`[useGetRoomModerators] Fetching room moderators for room: ${e}`);try{let n=await v.get(`chat/moderation/rooms/${e}/moderators`).json();return u.logger.debug(`[useGetRoomModerators] Fetched ${n.length} room moderators for room: ${e}`),(0,f.getState().setModerators)(e,n.map(T)),n}catch(t){if(t instanceof s.HTTPError&&401===t.response.status)return[];let n=t instanceof Error?t.message:String(t);throw u.logger.error(`[useGetRoomModerators] Failed to fetch room moderators for room: ${e}`,{error:n}),t}},m[4]=v,m[5]=e,m[6]=r):r=m[6];let y=!!e&&!!k?.address&&(void 0===p||p);return m[7]!==a||m[8]!==r||m[9]!==y?(d={queryKey:a,queryFn:r,enabled:y,staleTime:6e4,refetchOnWindowFocus:!1,retry:h},m[7]=a,m[8]=r,m[9]=y,m[10]=d):d=m[10],(0,o.useQuery)(d)}],565813),e.s(["MAX_HISTORY_PAGES",0,3,"MAX_MESSAGES_IN_MEMORY",0,150,"MESSAGE_PAGE_SIZE",0,50],912585);e.s(["LIVECHAT_MESSAGE_CHAR_LIMIT",0,420,"LIVECHAT_REACTIONS_DISPLAY_LIMIT",0,3,"LIVECHAT_REACTIONS_STORAGE_LIMIT",0,4],751973);var k=((n={}).Add="add",n.Remove="remove",n);e.s(["LivechatReactionAction",()=>k],380075),(t={}).Thumbsup=":thumbsup:",t.Heart=":heart:",t.Joy=":joy:",t.Fire=":fire:",t.Poop=":poop:",t.Thumbsdown=":thumbsdown:";let v="https://pump.mypinata.cloud/ipfs/QmeSzchzEPqCU1jwTnsipwcBAeH7S4bmVvFGfF65iA1BY1";e.s(["DEFAULT_REACTION_AVATAR_URL",0,v,"EMOJI_OPTIONS",0,[{key:":thumbsup:",char:"",label:"thumbs up"},{key:":heart:",char:"",label:"heart"},{key:":joy:",char:"",label:"joy"},{key:":fire:",char:"",label:"fire"},{key:":poop:",char:"",label:"poop"},{key:":thumbsdown:",char:"",label:"thumbs down"}],"REACTION_AVATAR_LIMIT",0,3],298180);let y=(e,n)=>`${e}|${n}`,_=(e,n)=>{let t=n.toLowerCase();for(let[n,a]of e)if(n.toLowerCase()===t)return a};e.s(["buildAddressToAvatarMap",0,e=>{let n=new Map;for(let t of e)t.userAddress&&t.profile_image&&n.set(t.userAddress,t.profile_image);return n},"buildAvatars",0,(e,n,t)=>{let a=[];for(let r of e){if(a.length>=t)break;let e=_(n,r)??v;a.push(e)}return a},"buildReactionKey",0,y,"includesAddressCaseInsensitive",0,(e,n)=>{let t=n.toLowerCase();return e.some(e=>e.toLowerCase()===t)},"selectRecentAddresses",0,e=>{let{recentMap:n,serverRecent:t,emojiKey:a}=e,r=n?.[a];return void 0!==r?r:t?.[a]??[]}],600963);let E=({state:e,args:n,action:t,currentUserAddress:a})=>{let{messageId:r,emojiKey:i,userAddress:o,serverRecent:s,serverRecentAvatarUrls:l,avatarUrl:c}=n,u=e.byMessageId[r]??{counts:{},...S({serverRecent:s,serverRecentAvatarUrls:l})},d=y(r,i),m=b(u.counts,i,t),p=w({recentAddresses:u.recentAddresses,recentAvatarUrls:u.recentAvatarUrls,emojiKey:i,userAddress:o,avatarUrl:c,action:t}),f=P(a,o),g=e.myReactions,T=e.mySelectedByMessage;if(f){let n=N({state:e,key:d,messageId:r,emojiKey:i,action:t});g=n.myReactions,T=n.mySelectedByMessage}let h=0===Object.keys(m).length&&Object.values(p.recentAddresses).every(e=>0===e.length),k=I(m,p.recentAddresses)?R(e.byMessageId,r):A(e.byMessageId,r,m,p.recentAddresses,p.recentAvatarUrls);if(h){if(T[r]){let{[r]:e,...n}=T;T=n}g=O(g,r)}return{byMessageId:k,myReactions:g,mySelectedByMessage:T}},b=(e,n,t)=>{let a=e[n]??0,r=t===k.Add?a+1:Math.max(0,a-1),i={...e};return r>0?i[n]=r:delete i[n],i},S=({serverRecent:e,serverRecentAvatarUrls:n})=>{if(!e)return{recentAddresses:{},recentAvatarUrls:{}};let t=e?Object.entries(e).reduce((e,[n,t])=>{if(!t||0===t.length)return e;let a=t.slice(-4);return a.length>0&&(e[n]=a),e},{}):{},a=(({sanitizedAddresses:e,serverRecentAvatarUrls:n})=>n?Object.entries(e).reduce((e,[t,a])=>{if(!a||0===a.length)return e;let r=n[t]??[];if(!r||0===r.length)return e;let i=Math.max(r.length-a.length,0),o=a.reduce((e,n,t)=>{let a=r[i+t];return n&&a&&(e[n]=a),e},{});return Object.keys(o).length>0&&(e[t]=o),e},{}):{})({sanitizedAddresses:t,serverRecentAvatarUrls:n});return{recentAddresses:t,recentAvatarUrls:a}},w=({recentAddresses:e,recentAvatarUrls:n,emojiKey:t,userAddress:a,avatarUrl:r,action:i})=>{let o=a.toLowerCase(),s=(e[t]??[]).filter(e=>e.toLowerCase()!==o),l=i===k.Add?[...s,a].slice(-4):s.slice(-4),c={...e};c[t]=l;let u=new Set(l.map(e=>e.toLowerCase())),d=n[t]??{},m=Object.entries(d).find(([e])=>e.toLowerCase()===o)?.[1],p={};for(let[e,n]of Object.entries(d))u.has(e.toLowerCase())&&e.toLowerCase()!==o&&(p[e]=n);if(i===k.Add){let e=r??m;e&&(p[a]=e)}if(l.length>0){let e=new Set(l);Object.keys(p).forEach(n=>{e.has(n)||delete p[n]})}let f={...n};return Object.keys(p).length>0?f[t]=p:delete f[t],{recentAddresses:c,recentAvatarUrls:f}},I=(e,n)=>0===Object.keys(e).length&&0===Object.keys(n).length,A=(e,n,t,a,r)=>({...e,[n]:{counts:t,recentAddresses:a,recentAvatarUrls:r}}),R=(e,n)=>{if(!(n in e))return e;let{[n]:t,...a}=e;return a},P=(e,n)=>!!(e&&n&&e.toLowerCase()===n.toLowerCase()),N=({state:e,key:n,messageId:t,emojiKey:a,action:r})=>{var i;let o,s,l=(i=e.myReactions,s=new Set(i),r===k.Add?s.add(n):s.delete(n),s),c=new Set(e.mySelectedByMessage[t]??[]);if(r===k.Add?c.add(a):c.delete(a),0===c.size){let{[t]:n,...a}=e.mySelectedByMessage;o=a}else o={...e.mySelectedByMessage,[t]:c};return{myReactions:l,mySelectedByMessage:o}},O=(e,n)=>{if(0===e.size)return e;let t=new Set,a=`${n}|`;return e.forEach(e=>{e.startsWith(a)||t.add(e)}),t},M=(0,p.create)()((e,n)=>({byMessageId:{},myReactions:new Set,mySelectedByMessage:{},addReaction:(n,t)=>{n.messageId&&n.emojiKey&&n.userAddress&&e(e=>E({state:e,args:n,action:k.Add,currentUserAddress:t}))},removeReaction:(n,t)=>{n.messageId&&n.emojiKey&&n.userAddress&&e(e=>E({state:e,args:n,action:k.Remove,currentUserAddress:t}))},getCounts:e=>n().byMessageId[e]?.counts??{},getRecentAddresses:(e,t)=>(n().byMessageId[e]?.recentAddresses?.[t]??[]).slice(-3),isMyReaction:(e,t)=>n().myReactions.has(y(e,t)),clearRoom:()=>e({byMessageId:{},myReactions:new Set,mySelectedByMessage:{}})}));e.s(["useLivechatReactionsStore",0,M],550118);var C=((a={}).REGULAR="regular",a.SYSTEM="system",a.NOTIFICATION="notification",a),L=((r={}).TOXIC="TOXIC",r.SPAM="SPAM",r.USER_BANNED="USER_BANNED",r);function x(e){let{rawMsg:n,currentUserUsername:t,currentUserAddress:a}=e;return a&&n.userAddress?n.userAddress.toLowerCase()===a.toLowerCase():!!t&&n.username===t}e.s(["DeleteMessageReasonEnum",()=>L,"MessageType",()=>C],18671),e.s(["isOwnChatMessage",()=>x],571054)},325320,480530,721361,66866,942219,408289,985436,958507,474877,750115,619416,855645,701470,e=>{"use strict";e.s(["LivestreamProvider",()=>eP,"useLivestreamContext",()=>eN],325320);var n,t=e.i(541023),a=e.i(50389),r=e.i(8264),i=e.i(606933),o=e.i(856038),s=e.i(787774),l=e.i(392230),c=e.i(113427),u=e.i(921753),d=e.i(275762);e.s(["LivechatProvider",()=>eS,"useLivechat",()=>ew],855645);var m=e.i(41461),p=e.i(928785),f=e.i(264552),g=e.i(565813),T=e.i(912585),h=e.i(550118),k=e.i(380075),v=e.i(54567),y=e.i(761459),_=e.i(18671),E=e.i(571054),b=e.i(396693);let S=({rawMsg:e,currentUserUsername:n,currentUserAddress:t})=>{let a="string"==typeof e.username&&""!==e.username.trim()?e.username.trim():"Unknown User",r=(0,E.isOwnChatMessage)({rawMsg:e,currentUserUsername:n,currentUserAddress:t}),i=e.timestamp&&!isNaN(new Date(e.timestamp).getTime())?new Date(e.timestamp):new Date,o="",s=e.message;"string"==typeof s?o=s:Array.isArray(s)?(v.logger.warn("[mapRawMessageToChatMessage] Message received as array",{messageId:e.id,roomId:e.roomId,username:e.username,messageArray:s}),s.length>0&&(o=String(s[0]||""))):null!=s&&(v.logger.warn("[mapRawMessageToChatMessage] Message received as unexpected type",{messageId:e.id,roomId:e.roomId,username:e.username,messageType:typeof s,messageValue:s}),o=String(s));let l={id:e.id||`fallback-${i.getTime()}-${Math.random()}`,roomId:e.roomId,username:a,message:o,userAddress:e.userAddress||"",profile_image:e.profile_image||b.PEPE_PLACEHOLDER,timestamp:i,messageType:_.MessageType.REGULAR,isOwnMessage:r,isPending:!1,replyToId:e.replyToId,replyPreview:e.replyPreview};e&&e.reactionRecentAddresses&&(l.reactionRecentAddresses=e.reactionRecentAddresses,v.logger.debug("[mapRawMessageToChatMessage] Preserved reactionRecentAddresses",{messageId:l.id,emojis:Object.keys(e.reactionRecentAddresses||{})})),e&&e.reactionRecentAvatarUrls&&(l.reactionRecentAvatarUrls=e.reactionRecentAvatarUrls,v.logger.debug("[mapRawMessageToChatMessage] Preserved reactionRecentAvatarUrls",{messageId:l.id,emojis:Object.keys(e.reactionRecentAvatarUrls||{})}));try{let e=h.useLivechatReactionsStore.getState().byMessageId[l.id??""];if(e&&e.recentAddresses){let n=l.reactionRecentAddresses||{},t={...n};for(let[a,r]of Object.entries(e.recentAddresses)){let e=n[a];Array.isArray(e)&&e.length>0||(t[a]=r)}l.reactionRecentAddresses=t}}catch{}return l},w=e=>[...e].sort((e,n)=>e.timestamp.getTime()-n.timestamp.getTime()),I=e=>e&&0!==e.length?e[0].timestamp.getTime():null;e.s(["getOldestTimestamp",0,I,"getUserColor",0,e=>{let n=0;for(let t=0;t<e.length;t++)n=e.charCodeAt(t)+((n<<5)-n);let t=(0x7fffffff&n)%360;return`hsl(${t}, 70%, 60%)`},"isChatMessage",0,e=>"object"==typeof e&&null!==e&&"userAddress"in e&&"profile_image"in e,"mapRawMessageToChatMessage",0,S,"sortChatMessagesByTimestamp",0,w],480530);var A=e.i(834171);let R=A.z.object({success:A.z.boolean()}),P=A.z.object({success:A.z.boolean(),sessionId:A.z.string().optional()});e.s(["ackSchema",0,R,"viewerHeartbeatAckSchema",0,P],721361);var N=((n=N||{}).JOIN_ROOM="joinRoom",n.LEAVE_ROOM="leaveRoom",n.SEND_MESSAGE="sendMessage",n.SEND_MESSAGE_2="sendMessage2",n.GET_MESSAGE_HISTORY="getMessageHistory",n.PIN_MESSAGE="pinMessage",n.UNPIN_MESSAGE="unpinMessage",n.VIEWER_HEARTBEAT="viewerHeartbeat",n.ADD_REACTION="addReaction",n.REMOVE_REACTION="removeReaction",n);let O=e=>{let n,t,r,i,o,s,l,c,u,d,m=(0,a.c)(28),{socket:p}=e;m[0]!==p?(n=(e,n,t)=>{p&&(v.logger.debug("[useLivechatSocketEmitters] Emitting joinRoom",{roomId:e,username:n}),p.emit("joinRoom",{roomId:e,username:n},e=>{t(e,p.id||"")}))},m[0]=p,m[1]=n):n=m[1];let f=n;m[2]!==p?(t=(e,n)=>{p&&(v.logger.debug("[useLivechatSocketEmitters] Emitting leaveRoom",{roomId:e,username:n}),p.emit("leaveRoom",{roomId:e,username:n}))},m[2]=p,m[3]=t):t=m[3];let g=t;m[4]!==p?(r=(e,n,t,a,r,i)=>{p&&(v.logger.debug("[useLivechatSocketEmitters] Emitting sendMessage",{roomId:e,username:n,messageText:t,replyToId:a,replyPreview:r}),p.emit("sendMessage",{roomId:e,message:t,username:n,replyToId:a,replyPreview:r},i))},m[4]=p,m[5]=r):r=m[5];let T=r;m[6]!==p?(i=(e,n,t,a)=>{p&&(v.logger.debug("[useLivechatSocketEmitters] Emitting getMessageHistory",{roomId:e,beforeTimestamp:n,limit:t}),p.emit("getMessageHistory",{roomId:e,before:n,limit:t},a))},m[6]=p,m[7]=i):i=m[7];let h=i;m[8]!==p?(o=(e,n)=>{p&&(v.logger.debug("[useLivechatSocketEmitters] Emitting pinMessage",{roomId:e,messageId:n}),p.emit("pinMessage",{roomId:e,messageId:n}))},m[8]=p,m[9]=o):o=m[9];let k=o;m[10]!==p?(s=e=>{p&&(v.logger.debug("[useLivechatSocketEmitters] Emitting unpinMessage",{roomId:e}),p.emit("unpinMessage",{roomId:e}))},m[10]=p,m[11]=s):s=m[11];let y=s;m[12]!==p?(l=e=>{if(!p)throw Error("Socket is not connected");return v.logger.debug("[useLivechatSocketEmitters] Emitting viewerHeartbeat",{roomId:e}),new Promise((n,t)=>{p.emit("viewerHeartbeat",{roomId:e},a=>{let r=P.safeParse(a);if(!r.success||!r.data.sessionId)return v.logger.error("[useLivechatSocketEmitters] Failed to parse viewer heartbeat response",{roomId:e,data:a,parsed:r}),t(Error("Failed to parse viewer heartbeat response"));n(r.data)})})},m[12]=p,m[13]=l):l=m[13];let _=l;m[14]!==p?(c=(e,n,t,a)=>{p&&(v.logger.debug("[useLivechatSocketEmitters] Emitting addReaction",{roomId:e,messageId:n,emojiKey:t}),p.emit("addReaction",{roomId:e,messageId:n,emojiKey:t,avatarUrl:a}))},m[14]=p,m[15]=c):c=m[15];let E=c;m[16]!==p?(u=(e,n,t)=>{p&&(v.logger.debug("[useLivechatSocketEmitters] Emitting removeReaction",{roomId:e,messageId:n,emojiKey:t}),p.emit("removeReaction",{roomId:e,messageId:n,emojiKey:t}))},m[16]=p,m[17]=u):u=m[17];let b=u;return m[18]!==E||m[19]!==h||m[20]!==f||m[21]!==g||m[22]!==k||m[23]!==b||m[24]!==T||m[25]!==y||m[26]!==_?(d={emitJoinRoom:f,emitLeaveRoom:g,emitSendMessage:T,emitGetMessageHistory:h,emitPinMessage:k,emitUnpinMessage:y,emitViewerHeartbeat:_,emitAddReaction:E,emitRemoveReaction:b},m[18]=E,m[19]=h,m[20]=f,m[21]=g,m[22]=k,m[23]=b,m[24]=T,m[25]=y,m[26]=_,m[27]=d):d=m[27],d};e.s(["useLivechatSocketEmitters",0,O],66866);let M=async(e,n,t,a,r)=>(v.logger.debug("[useMessagesQuery] Fetching message history",{roomId:n,beforeTimestamp:r}),new Promise(i=>{e(n,r,T.MESSAGE_PAGE_SIZE,e=>{if(!e)return v.logger.warn("[useMessagesQuery] No response received for getMessageHistory",{roomId:n,beforeTimestamp:r}),i({messages:[],nextCursor:null});let o=Array.isArray(e)?e:e?.messages;if(o&&o.length>0){let e=w(o.filter(e=>"string"==typeof e.username&&""!==e.username.trim()).map(e=>S({rawMsg:e,currentUserUsername:t,currentUserAddress:a}))),r=I(e),s=o.length>=T.MESSAGE_PAGE_SIZE;v.logger.debug("[useMessagesQuery] History fetch successful",{roomId:n,count:e.length,hasMore:s,oldestTs:r}),i({messages:e.filter(Boolean),nextCursor:s?r:null})}else v.logger.debug("[useMessagesQuery] History fetch returned no messages",{roomId:n,beforeTimestamp:r}),i({messages:[],nextCursor:null})})})),C=e=>{let n,t,r,i,o,s=(0,a.c)(16),{socket:l,roomId:c,currentUser:u,isEnabled:d}=e;s[0]!==l?(n={socket:l},s[0]=l,s[1]=n):n=s[1];let{emitGetMessageHistory:m}=O(n);s[2]!==c?(t=L(c),s[2]=c,s[3]=t):t=s[3],s[4]!==u?.userAddress||s[5]!==u?.username||s[6]!==m||s[7]!==c?(r=e=>{let{pageParam:n}=e;return c?M(m,c,u?.username,u?.userAddress,n):(v.logger.warn("[useMessagesQuery] Query function skipped, no roomId"),Promise.resolve({messages:[],nextCursor:null}))},s[4]=u?.userAddress,s[5]=u?.username,s[6]=m,s[7]=c,s[8]=r):r=s[8],s[9]!==c?(i=(e,n)=>n.length>=T.MAX_HISTORY_PAGES?void v.logger.debug("[useMessagesQuery] Max history pages reached",{roomId:c,pageCount:n.length,maxPages:T.MAX_HISTORY_PAGES}):e.nextCursor,s[9]=c,s[10]=i):i=s[10];let p=d&&!!c&&!!l;return s[11]!==t||s[12]!==r||s[13]!==i||s[14]!==p?(o={queryKey:t,queryFn:r,initialPageParam:null,getNextPageParam:i,getPreviousPageParam:x,enabled:p,staleTime:1/0,refetchOnWindowFocus:!1,refetchOnMount:!1,maxPages:T.MAX_HISTORY_PAGES},s[11]=t,s[12]=r,s[13]=i,s[14]=p,s[15]=o):o=s[15],(0,y.useInfiniteQuery)(o)},L=e=>["livechat",e,"messages"];function x(){}function U(e){return e.addReaction}function D(e){return e.removeReaction}function F(e){return e.messages}e.s(["getMessagesQueryKey",0,L,"useMessagesQuery",0,C],942219);var B=e.i(465528),j=e.i(203350);let V=(e,{chatId:n,chatType:t,messageId:a,mint:r,context:i})=>{(0,j.recordUserEvent)((0,B.createInteractPinMessage)({chatId:n,chatType:t,messageId:a,actionType:e,mint:r}),i)},H=({mintId:e,status:n,context:t})=>{let a={interactionType:B.InteractionType.VIEWED,chatId:e,chatType:B.ChatType.LIVECHAT,source:B.JoinChatSource.LIVESTREAM,mint:e,status:n};(0,j.recordUserEvent)((0,B.createInteractJoinChat)(a),t)},G=({mintId:e,status:n,context:t})=>{let a={interactionType:B.InteractionType.CLICK,chatId:e,chatType:B.ChatType.LIVECHAT,mint:e,status:n};(0,j.recordUserEvent)((0,B.createInteractLeaveChat)(a),t)},$=({mintId:e,status:n,messageId:t,isReply:a,errorReason:r,context:i})=>{let o={interactionType:B.InteractionType.CLICK,chatId:e,chatType:B.ChatType.LIVECHAT,contentType:B.MessageContentType.TEXT,status:n,messageId:t,mint:e,isReply:a,errorReason:r};(0,j.recordUserEvent)((0,B.createInteractSendMessage)(o),i)};e.s(["trackJoinChat",0,H,"trackLeaveChat",0,G,"trackMessagePin",0,e=>V(B.PinActionType.PIN,e),"trackMessageUnpin",0,e=>V(B.PinActionType.UNPIN,e),"trackSendMessage",0,$],408289);var J=e.i(967388);function Y(e){try{let{name:n,value:t,maxAge:a}=e;v.logger.debug("[useLivechatSocketEvents] Received setCookie event",{name:n,value:t}),document.cookie=`${n}=${t}; Path=/; Max-Age=${a}; SameSite=Lax`}catch(e){v.logger.error("[useLivechatSocketEvents] Error processing setCookie event",{error:e instanceof Error?e.message:String(e)})}}let q=(e,n)=>e&&e.trim().length>0?e:n&&n.trim().length>0?n:null,W=e=>{if("string"!=typeof e)return"";let n=e;return(n=(n=(n=(n=(n=n.replace(/\b((https?:\/\/)?[\w-]+(\.[\w-]+)+(\/[\w\-._~:/?#[\]@!$&'()*+,;=%]*)?)\b/gi," ")).replace(/[\p{Extended_Pictographic}\p{Emoji}]/gu," ")).replace(/[^\p{L}\p{N}\s]/gu," ")).toLowerCase()).replace(/\s+/g," ")).trim()};function K(e){return e.messageType===_.MessageType.REGULAR}function Q(e){return W(e.message||"")}var X=e.i(132838),z=e.i(622493),Z=e.i(867175),ee=e.i(429914),en=e.i(596904),et=e.i(992034);let ea=(0,o.createContext)(void 0),er=()=>{let e=(0,o.useContext)(ea);if(void 0===e)throw Error("useLivechatConnection must be used within a LivechatConnectionProvider");return e},ei=()=>{let{socket:e}=er();return e},eo=e=>{let n,r=(0,a.c)(3),{children:i}=e,s=(()=>{let e,n,t,r,i=(0,a.c)(16),{livechatUrl:s}=(0,et.useLivestreamConfig)(),{socket:l,isConnected:c,isConnecting:u,connectionError:d,retryCount:m,connect:p,disconnect:f,forceReconnect:g}=(()=>{let e,n,t,r,i,s,l=(0,a.c)(13),[c,u]=(0,o.useState)(null),[d,m]=(0,o.useState)(!1),[p,f]=(0,o.useState)(!1),[g,T]=(0,o.useState)(null),[h,k]=(0,o.useState)(0),y=(0,o.useRef)(null),_=(0,o.useRef)(""),E=(0,o.useRef)("");l[0]===Symbol.for("react.memo_cache_sentinel")?(e=(e,n)=>{if(_.current=e,E.current=n,y.current)return void v.logger.warn("[useSocketConnection] Connect skipped (already have socket)",{url:e,socketId:y.current.id});z.metrics.increment("socket.connect_attempt",1,{hasAuthToken:(0,en.hasValidAuthToken)(),authTokenInPayload:!!(0,en.getAuthTokenFromCookies)()}),f(!0),T(null),m(!1);try{let t=(0,ee.io)(e,{path:"/socket.io/",reconnection:!0,reconnectionAttempts:5,reconnectionDelay:1e3,reconnectionDelayMax:3e4,randomizationFactor:.5,timeout:3e4,transports:["websocket"],upgrade:!0,forceNew:!1,auth:e=>{e({origin:n,timestamp:Date.now(),token:(0,en.getAuthTokenFromCookies)()})},withCredentials:!0});y.current=t,u(t),z.metrics.increment("socket.instance_created",1)}catch(n){let e=n instanceof Error?n.message:"Socket initialization failed";z.metrics.increment("socket.connect_error",1),v.logger.error("[useSocketConnection] Socket initialization error",{error:e}),T(e),f(!1),y.current=null,u(null)}},l[0]=e):e=l[0];let b=e;l[1]===Symbol.for("react.memo_cache_sentinel")?(n=()=>{k(0),y.current&&y.current.disconnect(),y.current=null,u(null),m(!1),f(!1),T(null)},l[1]=n):n=l[1];let S=n;l[2]===Symbol.for("react.memo_cache_sentinel")?(t=()=>{z.metrics.increment("socket.force_reconnect_requested"),k(0),S(),setTimeout(()=>{_.current&&E.current&&b(_.current,E.current)},1e3)},l[2]=t):t=l[2];let w=t;return l[3]!==h||l[4]!==c?(r=()=>{if(!c)return;let e=()=>{y.current===c&&(z.metrics.increment("socket.connected",1,{retryCount:h}),v.logger.info("[useSocketConnection] Socket connected",{socketId:c.id}),m(!0),f(!1),T(null),k(0))},n=e=>{if(y.current===c&&(z.metrics.increment("socket.disconnected",1,{reason:e}),v.logger.warn("[useSocketConnection] Socket disconnected",{socketId:c.id,reason:e}),m(!1),f(!1),"io client disconnect"!==e))switch(e){case"transport close":case"transport error":T("Connection lost. Reconnecting...");break;case"io server disconnect":T("Disconnected by server. This may be due to authentication issues."),c.connect();break;default:T(`Disconnected: ${e}`)}},t=e=>{if(y.current===c){let n=e.message||"Connection failed";z.metrics.increment("socket.connection_error",1),v.logger.warn("[useSocketConnection] Connection error (will retry)",{socketId:c.id,error:n}),m(!1),f(!1),T(n.includes("401")||n.includes("403")?"Authentication failed. Please log in again.":n.includes("timeout")?"Connection timeout. Retrying...":"Connection failed. Retrying...")}},a=e=>{y.current===c&&(v.logger.info("[useSocketConnection] Reconnection attempt",{attemptNumber:e}),k(e),f(!0))},r=()=>{y.current===c&&(v.logger.error("[useSocketConnection] Reconnection failed",{maxAttempts:5}),T("Reconnection failed. Please refresh the page."),f(!1),c.disconnect(),y.current=null,u(null))};return c.on("connect",e),c.on("disconnect",n),c.on("connect_error",t),c.io.on("reconnect_attempt",a),c.io.on("reconnect_failed",r),()=>{c.off("connect",e),c.off("disconnect",n),c.off("connect_error",t),c.io.off("reconnect_attempt",a),c.io.off("reconnect_failed",r)}},i=[c,h],l[3]=h,l[4]=c,l[5]=r,l[6]=i):(r=l[5],i=l[6]),(0,o.useEffect)(r,i),l[7]!==g||l[8]!==d||l[9]!==p||l[10]!==h||l[11]!==c?(s={socket:c,isConnected:d,isConnecting:p,connectionError:g,retryCount:h,connect:b,disconnect:S,forceReconnect:w},l[7]=g,l[8]=d,l[9]=p,l[10]=h,l[11]=c,l[12]=s):s=l[12],s})();i[0]!==p||i[1]!==s?(e=()=>{s&&p(s,window.location.origin)},i[0]=p,i[1]=s,i[2]=e):e=i[2];let T=e;i[3]!==f?(n=()=>{f()},i[3]=f,i[4]=n):n=i[4];let h=n;i[5]!==g?(t=()=>{g()},i[5]=g,i[6]=t):t=i[6];let k=t;return i[7]!==T||i[8]!==d||i[9]!==h||i[10]!==k||i[11]!==c||i[12]!==u||i[13]!==m||i[14]!==l?(r={socket:l,isConnected:c,isConnecting:u,connectionError:d,retryCount:m,connect:T,disconnect:h,forceReconnect:k},i[7]=T,i[8]=d,i[9]=h,i[10]=k,i[11]=c,i[12]=u,i[13]=m,i[14]=l,i[15]=r):r=i[15],r})();return r[0]!==i||r[1]!==s?(n=(0,t.jsx)(ea.Provider,{value:s,children:i}),r[0]=i,r[1]=s,r[2]=n):n=r[2],n};e.s(["LivechatConnectionProvider",0,eo,"useLivechatConnectionContext",0,er,"useLivechatSocket",0,ei],985436),e.s(["RoomModerationProvider",()=>eg,"useRoomModerationContext",()=>eT],474877);var es=e.i(86868);let el=()=>!!(0,es.useModeratorStore)(ec);function ec(e){return e.moderator}e.s(["useIsModerator",0,el],958507);var eu=e.i(690877),ed=e.i(812768),em=e.i(759622),ep=e.i(26454);let ef=(0,o.createContext)(void 0),eg=e=>{var n;let r,i,s,l,c,d,m,p,f,T,h=(0,a.c)(33),{children:k,isEnabled:y}=e,_=void 0===y||y,E=el(),{mintId:b}=eN(),{user:S}=(0,Z.useLivestreamUserContext)(),w=_&&!!S?.address;h[0]!==w?(r={enabled:w},h[0]=w,h[1]=r):r=h[1];let{refetch:I}=(n=r,f=(0,es.useModeratorStore)(e=>e.setModerator),T=(0,em.useApiClient)(),(0,eu.useQuery)({queryKey:["is-moderator"],queryFn:async()=>{v.logger.debug("[useIsModeratorQuery] Attempting to fetch moderator details");try{let e=await T.get("human-moderation/is-moderator").json();return v.logger.debug("[useIsModeratorQuery] Fetch successful",{isModerator:e?.isModerator,moderator:e?.moderator}),f(e?.isModerator?e.moderator:null),e}catch(n){if(n instanceof ed.HTTPError&&401===n.response.status)return f(null),null;let e=n instanceof Error?n.message:String(n);throw v.logger.error("[useIsModeratorQuery] Fetch failed",{error:e}),f(null),n}},...n})),A=b??"",R=_&&!!b&&!!S?.address;h[2]!==A||h[3]!==R?(i={mintId:A,enabled:R},h[2]=A,h[3]=R,h[4]=i):i=h[4];let{data:P,refetch:N}=(0,u.useIsApprovedCreator)(i),O=void 0!==P&&P,M=_&&!!b&&!!S?.address;h[5]!==M?(s={enabled:M},h[5]=M,h[6]=s):s=h[6];let{refetch:C}=(0,g.useGetRoomModerators)(b??"",s);h[7]!==b||h[8]!==S?.address?(l=e=>!!S?.address&&!!b&&e.isRoomModerator(b,S?.address),h[7]=b,h[8]=S?.address,h[9]=l):l=h[9];let L=(0,ep.useRoomModeratorsStore)(l),x=!!S?.address&&O,U=E||x,D=U||L;h[10]!==_||h[11]!==b||h[12]!==I||h[13]!==N||h[14]!==C||h[15]!==S?.address?(c=()=>{if(_){if(!S?.address){es.useModeratorStore.getState().setModerator(null),b&&ep.useRoomModeratorsStore.getState().clearModerators(b);return}I(),b&&(N(),C())}},h[10]=_,h[11]=b,h[12]=I,h[13]=N,h[14]=C,h[15]=S?.address,h[16]=c):c=h[16];let F=S?.address;h[17]!==_||h[18]!==b||h[19]!==I||h[20]!==N||h[21]!==C||h[22]!==F?(d=[_,F,b,I,N,C],h[17]=_,h[18]=b,h[19]=I,h[20]=N,h[21]=C,h[22]=F,h[23]=d):d=h[23],(0,o.useEffect)(c,d),h[24]!==U||h[25]!==D||h[26]!==O||h[27]!==E||h[28]!==L?(m={canModerateRoom:D,canManageRoomModerators:U,isRoomModerator:L,isCreator:O,isGlobalModerator:E},h[24]=U,h[25]=D,h[26]=O,h[27]=E,h[28]=L,h[29]=m):m=h[29];let B=m;return h[30]!==k||h[31]!==B?(p=(0,t.jsx)(ef.Provider,{value:B,children:k}),h[30]=k,h[31]=B,h[32]=p):p=h[32],p},eT=()=>{let e=(0,o.useContext)(ef);if(void 0===e)throw Error("useRoomModerationContext must be used within a RoomModerationProvider");return e};var eh=e.i(254667);let ek=(0,o.createContext)({sessionId:void 0}),ev=e=>{let n,r,i,s,l=(0,a.c)(10),{children:c,roomId:u}=e,d=ei(),[m,p]=(0,o.useState)(void 0),f=!!u;l[0]===Symbol.for("react.memo_cache_sentinel")?(n=e=>{p(e?.sessionId)},l[0]=n):n=l[0],l[1]!==u||l[2]!==d||l[3]!==f?(r={enabled:f,roomId:u,socket:d,onSuccess:n},l[1]=u,l[2]=d,l[3]=f,l[4]=r):r=l[4],(e=>{let n,t,r,i,s,l,c,u,d,m,p=(0,a.c)(20);p[0]!==e?({roomId:r,socket:i,onSuccess:n,...t}=e,p[0]=e,p[1]=n,p[2]=t,p[3]=r,p[4]=i):(n=p[1],t=p[2],r=p[3],i=p[4]),p[5]!==i?(s={socket:i},p[5]=i,p[6]=s):s=p[6];let{emitViewerHeartbeat:f}=O(s);p[7]!==r?(l=["livestream-viewer-heartbeat",r],p[7]=r,p[8]=l):l=p[8],p[9]!==f||p[10]!==n||p[11]!==r?(c=async()=>{let e=await f(r);return n(e),e},p[9]=f,p[10]=n,p[11]=r,p[12]=c):c=p[12],p[13]!==t||p[14]!==l||p[15]!==c?(u={queryKey:l,queryFn:c,refetchInterval:6e4,refetchOnWindowFocus:!0,refetchIntervalInBackground:!0,...t},p[13]=t,p[14]=l,p[15]=c,p[16]=u):u=p[16];let g=(0,eu.useQuery)(u);return p[17]!==g.error?(d=()=>{g.error&&eh.logger.error("Failed to send heartbeat",{error:g.error})},m=[g.error],p[17]=g.error,p[18]=d,p[19]=m):(d=p[18],m=p[19]),(0,o.useEffect)(d,m)})(r),l[5]!==m?(i={sessionId:m},l[5]=m,l[6]=i):i=l[6];let g=i;return l[7]!==c||l[8]!==g?(s=(0,t.jsx)(ek.Provider,{value:g,children:c}),l[7]=c,l[8]=g,l[9]=s):s=l[9],s};e.s(["ViewerSessionProvider",0,ev,"useViewerSessionContext",0,()=>(0,o.useContext)(ek)],750115);let ey=(0,e.i(78436).create)((e,n)=>({participantsByRoom:{},bannedUsersByRoom:{},banUser:(n,t)=>e(e=>{let a=new Set(e.bannedUsersByRoom[t]||new Set);return a.add(n),{bannedUsersByRoom:{...e.bannedUsersByRoom,[t]:a}}}),unbanUser:(n,t)=>e(e=>{let a=new Set(e.bannedUsersByRoom[t]||new Set);return a.delete(n),{bannedUsersByRoom:{...e.bannedUsersByRoom,[t]:a}}}),isUserBanned:(e,t)=>{let a=n().bannedUsersByRoom[t];return!!a&&a.has(e)},clearBannedUsers:n=>e(e=>{if(!n)return{bannedUsersByRoom:{}};{let{[n]:t,...a}=e.bannedUsersByRoom;return{bannedUsersByRoom:a}}}),setParticipants:(n,t)=>e(e=>({participantsByRoom:{...e.participantsByRoom,[n]:t}})),addParticipant:(n,t)=>e(e=>{let a=e.participantsByRoom[n]||[];return a.some(e=>e.userAddress===t.userAddress)?e:{participantsByRoom:{...e.participantsByRoom,[n]:[...a,t]}}}),removeParticipant:(n,t)=>e(e=>{let a=e.participantsByRoom[n]||[];return{participantsByRoom:{...e.participantsByRoom,[n]:a.filter(e=>e.userAddress!==t)}}})}));e.s(["useChatParticipantsStore",0,ey],619416);let e_=(0,o.createContext)(void 0),eE=({children:e,roomId:n,readOnly:r=!1,onTrackEvent:l})=>{let{socket:c,isConnected:u,isConnecting:d,connectionError:y,retryCount:E,connect:w,disconnect:I,forceReconnect:A}=er(),{emitJoinRoom:R,emitLeaveRoom:P}=O({socket:c}),N=(0,i.useQueryClient)(),{isCreator:M,isRoomModerator:x}=eT(),j=(0,h.useLivechatReactionsStore)(e=>e.clearRoom),{user:V,authReady:ee}=(0,Z.useLivestreamUserContext)(),[et,ea]=(0,o.useState)(!1),[ei,eo]=(0,o.useState)(null),{isJoined:es,isJoining:el,isLeaving:ec,currentUser:eu,currentRoomId:ed,joinRoom:em,leaveRoom:ef,resetRoomState:eg,setCurrentUser:eh}=(({isConnected:e,emitJoinRoom:n,emitLeaveRoom:t,onJoinSuccess:a,onAuthUpdated:r})=>{let[i,s]=(0,o.useState)(!1),[l,c]=(0,o.useState)(!1),[u,d]=(0,o.useState)(!1),[m,p]=(0,o.useState)(null),[f,g]=(0,o.useState)(null),T=(0,o.useRef)(null),h=(0,o.useRef)({isJoined:!1,currentRoomId:null});h.current={isJoined:i,currentRoomId:f},(0,o.useEffect)(()=>()=>{let{isJoined:e,currentRoomId:n}=h.current;e&&n&&G({mintId:n,status:B.Status.SUCCESS,context:J.LIVECHAT_SOURCE_CONTEXTS.CHAT})},[]);let k=(0,o.useCallback)((e,n,t,i)=>{T.current=i,v.logger.info("[useLivechatRoom] Received auth status from backend",{roomId:e,authenticated:t.authenticated,userAddress:t.userAddress,isCreator:t.isCreator,isRoomModerator:t.isRoomModerator}),H({mintId:e,status:B.Status.SUCCESS,context:J.LIVECHAT_SOURCE_CONTEXTS.CHAT}),r?.({isAuthenticated:!!t.authenticated,userAddress:t.userAddress||"",isCreator:t.isCreator??!1,isRoomModerator:t.isRoomModerator??!1,pinnedMessageId:t.pinnedMessageId}),p({id:i,username:n.username||"",profile_image:n.profile_image||b.PEPE_PLACEHOLDER,userAddress:t.userAddress||""}),g(e),c(!1),s(!0),a?.(e,t.pinnedMessageId)},[r,a]),y=(0,o.useCallback)((t,a)=>{!e||l||u||(c(!0),n(t,a.username||"",(e,n)=>{if(Array.isArray(e)){let r=e.map(e=>S({rawMsg:e,currentUserUsername:a.username}));k(t,a,{authenticated:!1,messages:r},n)}else k(t,a,e,n)}))},[e,l,u,n,k]),_=(0,o.useCallback)(()=>{if(u||!f)return;v.logger.info("[useLivechatRoom] Attempting to leave room",{currentRoomId:f}),d(!0);let e=m?.username||"";h.current={isJoined:!1,currentRoomId:null},g(null),p(null),s(!1),d(!1),r?.({isAuthenticated:!1,userAddress:void 0}),t(f,e),v.logger.info("[useLivechatRoom] Left room",{roomId:f})},[u,f,m,t,r]);return{isJoined:i,isJoining:l,isLeaving:u,currentUser:m,currentRoomId:f,joinRoom:y,leaveRoom:_,resetRoomState:(0,o.useCallback)(()=>{v.logger.debug("[useLivechatRoom] Resetting room state"),s(!1),c(!1),d(!1),p(null),g(null),r?.({isAuthenticated:!1,userAddress:void 0})},[r]),setCurrentUser:p}})({isConnected:u,emitJoinRoom:R,emitLeaveRoom:P,onJoinSuccess:(0,o.useCallback)((e,n)=>{N.invalidateQueries({queryKey:L(e)}),eo(n||null)},[N])}),ek=es&&!!eu?.userAddress,eE=(0,o.useRef)(null),eS=(0,o.useRef)(null),ew=(0,o.useRef)({isJoined:!1,currentRoomId:null,currentUser:null});ew.current={isJoined:es,currentRoomId:ed,currentUser:eu},(0,o.useEffect)(()=>{eE.current!==ed&&((eE.current||ed)&&j(),eE.current=ed??null)},[j,ed]);let[eI,eA]=(0,o.useState)([]),eR=(0,o.useCallback)(e=>{let n={id:`sys-${Date.now()}`,roomId:ed||"system",message:e,timestamp:new Date,messageType:_.MessageType.SYSTEM};eA(e=>[...e,n])},[ed]),{data:eP,fetchNextPage:eN,hasNextPage:eO,isFetchingNextPage:eM}=C({socket:c,roomId:ed,currentUser:eu,isEnabled:u&&es}),{canSend:eC,recordOwnSend:eL}=(e=>{let n,t,r,i,s,l,c,u=(0,a.c)(19),{messages:d,currentUserAddress:m,currentUsername:f}=e;u[0]===Symbol.for("react.memo_cache_sentinel")?(n=[],u[0]=n):n=u[0];let g=(0,o.useRef)(n);if(u[1]!==d){let e=d.filter(K).slice(-p.BUILD_HISTORY_LIMIT);t=e.slice(-p.LAST_N_MESSAGES_COUNT).map(Q),r=new Map;for(let n=Math.max(0,e.length-p.BUILD_HISTORY_LIMIT);n<e.length;n++){let t=e[n],a=W(t.message||"");if(!a)continue;let i=t.timestamp.getTime();r.has(a)||r.set(a,[]),r.get(a).push(i)}u[1]=d,u[2]=t,u[3]=r}else t=u[2],r=u[3];u[4]!==t||u[5]!==r?(i={lastNNormalized:t,perTextTimestamps:r},u[4]=t,u[5]=r,u[6]=i):i=u[6];let{lastNNormalized:T,perTextTimestamps:h}=i;u[7]!==m||u[8]!==f||u[9]!==T||u[10]!==d||u[11]!==h?(s=(e,n)=>{let t=void 0===n?Date.now():n;if(q(m,f)){let e=t-p.ONE_SECOND_MS,n=g.current;for(;n.length>0&&n[0]<e;)n.shift();if(n.length>=p.PER_USER_RATE_LIMIT_PER_SEC)return{allow:!1,reason:"rate_limit"}}let a=W(e||"");if(a.length<=p.MIN_TEXT_LENGTH_FOR_DUPLICATE_CHECK)return{allow:!0};let r=h.get(a)||[],i=t-p.TEN_SECONDS_MS,o=0;for(let e=r.length-1;e>=0&&!(r[e]<i);e--)if(++o>=p.MAX_IDENTICAL_IN_10S)return{allow:!1,reason:"too_many_identical_10s"};let s=0;for(let e=0;e<T.length;e++)if(T[e]===a&&s++,s>=p.MAX_IDENTICAL_IN_LAST_N)return{allow:!1,reason:"too_many_identical_lastN"};let l=0;for(let e=d.length-1;e>=0;e--){let n=d[e];if(n.messageType!==_.MessageType.REGULAR)continue;let t=W(n.message||"");if(t)if(t===a){if(++l>=p.MAX_CONSECUTIVE_IDENTICAL)return{allow:!1,reason:"too_many_consecutive"}}else break}return{allow:!0}},u[7]=m,u[8]=f,u[9]=T,u[10]=d,u[11]=h,u[12]=s):s=u[12];let k=s;u[13]!==m||u[14]!==f?(l=e=>{let n=void 0===e?Date.now():e;if(!q(m,f))return;let t=g.current,a=n-p.ONE_SECOND_MS;for(;t.length>0&&t[0]<a;)t.shift();t.push(n)},u[13]=m,u[14]=f,u[15]=l):l=u[15];let v=l;return u[16]!==k||u[17]!==v?(c={canSend:k,recordOwnSend:v},u[16]=k,u[17]=v,u[18]=c):c=u[18],c})({messages:(0,o.useMemo)(()=>eP?.pages?eP.pages.flatMap(e=>e.messages):[],[eP]),currentUserAddress:eu?.userAddress,currentUsername:eu?.username}),{mutate:ex,isPending:eU}=(e=>{let n,t,r,o,s,l,c=(0,a.c)(23),{socket:u,roomId:d,currentUser:m,addSystemMessage:p}=e,f=(0,i.useQueryClient)();c[0]!==u?(n={socket:u},c[0]=u,c[1]=n):n=c[1];let{emitSendMessage:g}=O(n);return c[2]!==m||c[3]!==g||c[4]!==d||c[5]!==u?(t=e=>{let{messageText:n,replyToId:t,replyPreview:a}=e,r=Date.now();return new Promise((e,i)=>{if(!u||!d||!m)return v.logger.error("[useSendMessageMutation] Mutation failed pre-check",{hasSocket:!!u,roomId:d,hasCurrentUser:!!m}),z.metrics.increment("livechat.send.precheck_failed",1),i(Error("Chat not ready to send message."));g(d,m.username,n,t,a,n=>{n?.error?(v.logger.error("[useSendMessageMutation] Server returned error on send message ack",{error:n.error,roomId:d,username:m.username}),z.metrics.increment("livechat.send.ack_error",1),i(Error(n.error))):(z.metrics.timing("livechat.send.ack_ms",Date.now()-r,{hasId:!!n?.id}),e(n))})})},c[2]=m,c[3]=g,c[4]=d,c[5]=u,c[6]=t):t=c[6],c[7]!==m||c[8]!==f||c[9]!==d?(r=async e=>{let{messageText:n,replyToId:t,replyPreview:a}=e;if(!d||!m)return;let r=L(d);z.metrics.increment("livechat.send.on_mutate"),await f.cancelQueries({queryKey:r});let i=f.getQueryData(r),o=`pending-${Date.now()}-${Math.random()}`;return z.metrics.increment("livechat.send.optimistic_added"),f.setQueryData(r,e=>{if(!e)return{pages:[{messages:[],nextCursor:null}],pageParams:[null]};let r={id:o,roomId:d,username:m.username,message:n,userAddress:m.userAddress||"",profile_image:m.profile_image,timestamp:new Date,messageType:_.MessageType.REGULAR,isOwnMessage:!0,isPending:!0,replyToId:t,replyPreview:a},i=e.pages.map((n,t)=>t===e.pages.length-1?{...n,messages:[...n.messages,r]}:n);return{...e,pages:i}}),{previousMessages:i,tempId:o}},c[7]=m,c[8]=f,c[9]=d,c[10]=r):r=c[10],c[11]!==p||c[12]!==f||c[13]!==d?(o=(e,n,t)=>{if(!d||!t?.tempId)return;$({mintId:d,status:B.Status.ERROR,isReply:!!n.replyToId,errorReason:B.MessageErrorReason.UNKNOWN,context:J.LIVECHAT_SOURCE_CONTEXTS.CHAT_INPUT});let a=L(d);v.logger.error("[useSendMessageMutation] onError triggered",{error:e.message,variables:n,tempId:t.tempId,queryKey:a}),z.metrics.increment("livechat.send.on_error",1),t?.previousMessages?f.setQueryData(a,t.previousMessages):f.setQueryData(a,e=>{if(!e)return e;let n=e.pages.map(e=>({...e,messages:e.messages.filter(e=>e.id!==t.tempId)}));return{...e,pages:n}}),p(`Failed to send message: ${e.message}`)},c[11]=p,c[12]=f,c[13]=d,c[14]=o):o=c[14],c[15]!==f||c[16]!==d?(s=(e,n,t)=>{if(!d||!t?.tempId)return;$({mintId:d,status:B.Status.SUCCESS,messageId:e?.id,isReply:!!n.replyToId,context:J.LIVECHAT_SOURCE_CONTEXTS.CHAT_INPUT});let a=L(d),r=e?.id;z.metrics.increment("livechat.send.on_success",1,{hadId:!!r}),f.setQueryData(a,e=>{if(!e)return e;let n=e.pages.map(e=>({...e,messages:e.messages.map(e=>e.id===t.tempId?{...e,id:r||e.id,isPending:!1}:e)}));return{...e,pages:n}})},c[15]=f,c[16]=d,c[17]=s):s=c[17],c[18]!==t||c[19]!==r||c[20]!==o||c[21]!==s?(l={mutationFn:t,onMutate:r,onError:o,onSuccess:s},c[18]=t,c[19]=r,c[20]=o,c[21]=s,c[22]=l):l=c[22],(0,X.useMutation)(l)})({socket:c,roomId:ed,currentUser:eu,addSystemMessage:eR}),eD=(0,o.useCallback)(e=>{if(r||!ek||!e.messageText.trim())return;let n=eC(e.messageText);if(!n.allow){m.datadogRum.addAction("sendMessage:blocked",{reason:n.reason,roomId:ed,userAddress:eu?.userAddress});let t=p.BLOCK_REASON_MESSAGES[n.reason]||"blocked by client moderation",a=W(e.messageText);v.logger.info("[LivechatProvider] Client-side send blocked",{reason:n.reason,roomId:ed,userAddress:eu?.userAddress,username:eu?.username,messageLength:e.messageText.length,normalizedLength:a.length,isAuthenticated:ek,message:e.messageText}),eR(`Failed to send message: ${t}`);return}eL(),ex(e)},[ex,r,ek,eC,eL,eR,ed,eu?.userAddress,eu?.username]),eF=(0,o.useCallback)(e=>{if("string"==typeof e.username&&""!==e.username.trim()&&es&&e.roomId===ed){let n=S({rawMsg:e,currentUserUsername:eu?.username,currentUserAddress:eu?.userAddress});if(!r&&ek&&eu&&n.isOwnMessage){let e=L(ed),t=N.getQueryData(e);if(t?.pages.flatMap(e=>e.messages).some(e=>e.isPending&&e.isOwnMessage&&e.message===n.message))return}let t=L(ed);N.setQueryData(t,e=>{if(!e||e.pages.some(e=>e.messages.some(e=>e.id===n.id&&n.id)))return e;let t=e.pages.map((t,a)=>a===e.pages.length-1?{...t,messages:[...t.messages,n]}:t);return{...e,pages:t}})}},[es,ed,eu,N,r,ek]),eB=(0,o.useCallback)(e=>{ed&&(ep.useRoomModeratorsStore.getState().addModerator(ed,e.userAddress),N.invalidateQueries({queryKey:[g.GET_ROOM_MODERATORS_QUERY_KEY,ed]}))},[ed,N]),ej=(0,o.useCallback)(e=>{ed&&(ep.useRoomModeratorsStore.getState().removeModerator(ed,e.userAddress),N.invalidateQueries({queryKey:[g.GET_ROOM_MODERATORS_QUERY_KEY,ed]}))},[ed,N]),eV=(0,o.useCallback)(e=>{if(v.logger.debug("[LivechatProvider] Received messageDeleted event",{messageId:e,roomId:ed}),!ed)return void v.logger.warn("[LivechatProvider] No current room ID for message deletion",{messageId:e});let n=L(ed);N.setQueryData(n,n=>{if(!n)return v.logger.debug("[LivechatProvider] No existing data to update for message deletion",{messageId:e,roomId:ed}),n;let t=n.pages.map(n=>({...n,messages:n.messages.filter(n=>n.id!==e)})),a={...n,pages:t};return v.logger.debug("[LivechatProvider] Message removed from cache",{messageId:e,roomId:ed}),a}),N.invalidateQueries({queryKey:n,exact:!0})},[ed,N]),eH=(0,o.useCallback)(e=>{if(v.logger.debug("[LivechatProvider] Received userMessagesWiped event",{userAddress:e.userAddress,roomId:ed}),!ed)return;let n=L(ed);N.setQueryData(n,n=>{if(!n)return n;let t=n.pages.map(n=>({...n,messages:n.messages.filter(n=>n.userAddress!==e.userAddress)}));return{...n,pages:t}}),N.invalidateQueries({queryKey:n,exact:!0})},[ed,N]),eG=(0,o.useCallback)(e=>{eo(e.messageId)},[]),e$=(0,o.useCallback)(()=>{eo(null)},[]),eJ=ey(e=>e.banUser),eY=ey(e=>e.unbanUser);(0,o.useEffect)(()=>{if(!c||!ed)return;let e=e=>{v.logger.debug("[LivechatProvider] Received userBannedInRoom event",{roomId:ed,userAddress:e.userAddress}),eJ(e.userAddress,ed),N.invalidateQueries({queryKey:[f.GET_BANNED_USERS_QUERY_KEY,ed]})},n=e=>{v.logger.debug("[LivechatProvider] Received userUnbannedInRoom event",{roomId:ed,userAddress:e.userAddress}),eY(e.userAddress,ed),N.invalidateQueries({queryKey:[f.GET_BANNED_USERS_QUERY_KEY,ed]})};return c.on("userBannedInRoom",e),c.on("userUnbannedInRoom",n),()=>{c.off("userBannedInRoom",e),c.off("userUnbannedInRoom",n)}},[c,ed,N,eJ,eY]);let eq=(0,o.useCallback)((e,n)=>{eA([]),em(e,n)},[em]);(e=>{let n,t,r,i,s,l,c=(0,a.c)(18),{socket:u,onNewMessage:d,onMessageDeleted:m,onUserMessagesWiped:p,onModeratorAssigned:f,onModeratorUnassigned:g,onMessagePinned:T,onMessageUnpinned:h,onDisconnect:k,onReconnect:y}=e;c[0]!==m||c[1]!==T||c[2]!==h||c[3]!==f||c[4]!==g||c[5]!==d||c[6]!==p||c[7]!==u?(n=()=>{if(!u)return;let e=e=>{v.logger.debug("[useLivechatSocketEvents] Received newMessage event",{id:e?.id,roomId:e?.roomId});try{d(e)}catch(n){v.logger.error("[useLivechatSocketEvents] Error processing newMessage",{id:e?.id,error:n instanceof Error?n.message:String(n)})}e&&e.id&&(v.logger.debug("[useLivechatSocketEvents] Emitting messageReceived ack",{messageId:e.id}),u.emit("messageReceived",{messageId:e.id}))},n=e=>{try{m(e.messageId)}catch(e){v.logger.error("[useLivechatSocketEvents] Error in messageDeleted",{error:e instanceof Error?e.message:String(e)})}},t=e=>{try{T(e)}catch(e){v.logger.error("[useLivechatSocketEvents] Error in messagePinned",{error:e instanceof Error?e.message:String(e)})}},a=()=>{try{h()}catch(e){v.logger.error("[useLivechatSocketEvents] Error in messageUnpinned",{error:e instanceof Error?e.message:String(e)})}},r=e=>{try{p(e)}catch(e){v.logger.error("[useLivechatSocketEvents] Error in userMessagesWiped",{error:e instanceof Error?e.message:String(e)})}},i=e=>{try{f(e)}catch(e){v.logger.error("[useLivechatSocketEvents] Error in roomModeratorAssigned",{error:e instanceof Error?e.message:String(e)})}},o=e=>{try{g(e)}catch(e){v.logger.error("[useLivechatSocketEvents] Error in roomModeratorUnassigned",{error:e instanceof Error?e.message:String(e)})}};return u.on("newMessage",e),u.on("messageDeleted",n),u.on("messagePinned",t),u.on("messageUnpinned",a),u.on("userMessagesWiped",r),u.on("roomModeratorAssigned",i),u.on("roomModeratorUnassigned",o),()=>{u.off("newMessage",e),u.off("messageDeleted",n),u.off("messagePinned",t),u.off("messageUnpinned",a),u.off("userMessagesWiped",r),u.off("roomModeratorAssigned",i),u.off("roomModeratorUnassigned",o)}},t=[u,d,m,p,f,g,T,h],c[0]=m,c[1]=T,c[2]=h,c[3]=f,c[4]=g,c[5]=d,c[6]=p,c[7]=u,c[8]=n,c[9]=t):(n=c[8],t=c[9]),(0,o.useEffect)(n,t),c[10]!==u?(r=()=>{if(u)return u.on("setCookie",Y),()=>{u.off("setCookie",Y)}},i=[u],c[10]=u,c[11]=r,c[12]=i):(r=c[11],i=c[12]),(0,o.useEffect)(r,i),c[13]!==k||c[14]!==y||c[15]!==u?(s=()=>{if(!u)return;let e=e=>{if("io client disconnect"!==e){v.logger.info("[useLivechatSocketEvents] Socket disconnected",{reason:e});try{k()}catch(e){v.logger.error("[useLivechatSocketEvents] Error in disconnect handler",{error:e instanceof Error?e.message:String(e)})}}},n=()=>{v.logger.info("[useLivechatSocketEvents] Socket connected/reconnected");try{y()}catch(e){v.logger.error("[useLivechatSocketEvents] Error in reconnect handler",{error:e instanceof Error?e.message:String(e)})}};return u.on("disconnect",e),u.on("connect",n),()=>{u.off("disconnect",e),u.off("connect",n)}},l=[u,k,y],c[13]=k,c[14]=y,c[15]=u,c[16]=s,c[17]=l):(s=c[16],l=c[17]),(0,o.useEffect)(s,l)})({socket:c,onNewMessage:eF,onMessageDeleted:eV,onUserMessagesWiped:eH,onModeratorAssigned:eB,onModeratorUnassigned:ej,onMessagePinned:eG,onMessageUnpinned:e$,onDisconnect:(0,o.useCallback)(()=>{let{isJoined:e,currentRoomId:n,currentUser:t}=ew.current;e&&n&&t&&(v.logger.info("[LivechatProvider] Socket disconnected, saving room for rejoin",{roomId:n}),eS.current={roomId:n,userDetails:{username:t.username,profile_image:t.profile_image}},eg())},[eg]),onReconnect:(0,o.useCallback)(()=>{if(eS.current){let{roomId:e,userDetails:n}=eS.current;v.logger.info("[LivechatProvider] Rejoining room after reconnect",{roomId:e}),eS.current=null,setTimeout(()=>{eq(e,n)},0)}},[eq])}),(e=>{let n,t,r=(0,a.c)(8),{socket:s,currentRoomId:l,currentUserAddress:c}=e,u=(0,i.useQueryClient)(),d=(0,h.useLivechatReactionsStore)(U),m=(0,h.useLivechatReactionsStore)(D);r[0]!==d||r[1]!==l||r[2]!==c||r[3]!==u||r[4]!==m||r[5]!==s?(n=()=>{if(!s||!l)return;let e=e=>{let n,t;v.logger.debug("[useLivechatReactionsSync] handleMessageReactionUpdated",e);let a=L(l),r=u.getQueryData(a),i=r?.pages.flatMap(F).find(n=>n.id===e.messageId);l&&(n=i?.reactionRecentAddresses,t=i?.reactionRecentAvatarUrls);let o={messageId:e.messageId,emojiKey:e.emojiKey,userAddress:e.userAddress,serverRecent:n,serverRecentAvatarUrls:t,avatarUrl:e.avatarUrl};e.action===k.LivechatReactionAction.Add?d(o,c):m(o,c)};return s.on("messageReactionUpdated",e),()=>{s.off("messageReactionUpdated",e)}},t=[d,l,c,u,m,s],r[0]=d,r[1]=l,r[2]=c,r[3]=u,r[4]=m,r[5]=s,r[6]=n,r[7]=t):(n=r[6],t=r[7]),(0,o.useEffect)(n,t)})({socket:c,currentRoomId:ed,currentUserAddress:eu?.userAddress}),(0,o.useEffect)(()=>(w(),()=>{I()}),[w,I]);let eW=(0,o.useCallback)(()=>{ef(),eA([]),ed&&N.invalidateQueries({queryKey:L(ed)})},[ef,ed,N]),eK=(0,o.useCallback)(e=>{eS.current=null,el&&eg(),es&&eW(),e||(0,en.removeAuthTokenCookie)(),u&&A()},[el,eg,es,eW,u,A]),eQ=(0,o.useCallback)(()=>{ea(e=>!e)},[]),eX=(0,o.useMemo)(()=>{let e=[...eP?.pages?eP.pages.flatMap(e=>e.messages):[],...eI].sort((e,n)=>e.timestamp.getTime()-n.timestamp.getTime());if(e.length>T.MAX_MESSAGES_IN_MEMORY){let n=e.length-T.MAX_MESSAGES_IN_MEMORY;return v.logger.debug("[LivechatProvider] Truncating old messages from memory",{totalMessages:e.length,truncatedCount:n,keptMessages:T.MAX_MESSAGES_IN_MEMORY}),e.slice(-T.MAX_MESSAGES_IN_MEMORY)}return e},[eP,eI]),ez=(0,o.useMemo)(()=>({socket:c,isConnected:u,isConnecting:d,connectionError:y,retryCount:E,forceReconnect:A,isJoined:es,isJoining:el,isLeaving:ec,messages:eX,currentUser:eu,currentRoomId:ed,hasMoreHistory:!!eO,isLoadingHistory:eM,loadOlderMessages:eN,isCollapsed:et,toggleCollapse:eQ,pinnedMessageId:ei,joinRoom:eq,leaveRoom:eW,sendMessage:eD,isSendingMessage:eU,readOnly:r||!ek,setCurrentUser:eh,onTrackEvent:l,isAuthenticated:ek,userAddress:eu?.userAddress,isCreator:M,isRoomModerator:x}),[c,u,d,y,E,A,es,el,ec,eX,eu,ed,eO,eM,et,eq,eW,eD,eN,eQ,ei,eU,r,eh,l,ek,M,x]),eZ=(0,o.useRef)(void 0),e0=(0,o.useRef)(!1);return(0,o.useEffect)(()=>{if(!ee)return;let e=V?.address??void 0,n=eZ.current;if(!e0.current){e0.current=!0,eZ.current=e;return}e!==n&&(eZ.current=e,eK(e))},[ee,V?.address,eK]),(0,t.jsx)(s.AnalyticsProvider,{onTrackEvent:l,children:(0,t.jsx)(ev,{roomId:ed,children:(0,t.jsxs)(e_.Provider,{value:ez,children:[(0,t.jsx)(eb,{roomId:n}),e]})})})},eb=e=>{let n,t=(0,a.c)(2),{roomId:r}=e;return t[0]!==r?(n={roomId:r},t[0]=r,t[1]=n):n=t[1],(e=>{let n,t,r,i,s=(0,a.c)(23),{roomId:l}=e,{isConnected:c,isJoined:u,isJoining:d,joinRoom:m,leaveRoom:p}=ew(),{user:f,authReady:g}=(0,Z.useLivestreamUserContext)(),T=!!f?.address,h=(0,o.useRef)(!1),k=(0,o.useRef)(null);s[0]!==p?(n=()=>()=>{k.current&&(p(),h.current=!1,k.current=null)},t=[p],s[0]=p,s[1]=n,s[2]=t):(n=s[1],t=s[2]),(0,o.useEffect)(n,t),s[3]!==g||s[4]!==c||s[5]!==u||s[6]!==d||s[7]!==T||s[8]!==m||s[9]!==l||s[10]!==f?.address||s[11]!==f?.profile_image||s[12]!==f?.username?(r=()=>{k.current&&k.current!==l&&(h.current=!1,k.current=null),g&&T&&c&&l&&!u&&!d&&!h.current&&(h.current=!0,k.current=l,m(l,{username:f?.username||null,profile_image:f?.profile_image||b.PEPE_PLACEHOLDER,userAddress:f?.address||void 0}))},s[3]=g,s[4]=c,s[5]=u,s[6]=d,s[7]=T,s[8]=m,s[9]=l,s[10]=f?.address,s[11]=f?.profile_image,s[12]=f?.username,s[13]=r):r=s[13],s[14]!==g||s[15]!==c||s[16]!==u||s[17]!==d||s[18]!==T||s[19]!==m||s[20]!==l||s[21]!==f?(i=[g,T,c,l,u,d,m,f],s[14]=g,s[15]=c,s[16]=u,s[17]=d,s[18]=T,s[19]=m,s[20]=l,s[21]=f,s[22]=i):i=s[22],(0,o.useEffect)(r,i)})(n),null},eS=e=>{let n,r,i,o,s,l,c=(0,a.c)(12);c[0]!==e?({isModeratorCheckEnabled:o,roomId:i,children:n,...r}=e,c[0]=e,c[1]=n,c[2]=r,c[3]=i,c[4]=o):(n=c[1],r=c[2],i=c[3],o=c[4]);let u=void 0===o||o;return c[5]!==n||c[6]!==r||c[7]!==i?(s=(0,t.jsx)(eE,{roomId:i,...r,children:n}),c[5]=n,c[6]=r,c[7]=i,c[8]=s):s=c[8],c[9]!==u||c[10]!==s?(l=(0,t.jsx)(eo,{children:(0,t.jsx)(eg,{isEnabled:u,children:s})}),c[9]=u,c[10]=s,c[11]=l):l=c[11],l},ew=()=>{let e=(0,o.useContext)(e_);if(void 0===e)throw Error("useLivechat must be used within a LivechatProvider");return e},eI=(0,o.createContext)(void 0);e.s(["LivekitConnectionContext",0,eI,"useLivekitConnectionContext",0,()=>{let e=(0,o.useContext)(eI);if(!e)throw Error("useLivekitConnectionContext must be used within a LivekitConnectionContext.Provider");return e}],701470);var eA=e.i(182251);let eR=(0,o.createContext)(void 0),eP=e=>{let n,m,p,f,g,T,h,k,y,_,E,b,S,w,I,A,R,P,N,O=(0,a.c)(64),{children:M,mint:C,isMobile:L,onTrackEvent:x,livechatReadOnly:U,viewMode:D,initialLivestream:F,initialBanExpiry:B,isModeratorCheckEnabled:j,isLive:V,shouldGetCoinInfo:H,shouldGetLivestreamData:G}=e,$=void 0===D?"default":D,J=void 0===V||V,Y=void 0===H||H,q=void 0===G||G,[W,K]=(0,o.useState)(null),[Q,X]=(0,o.useState)(!1),[z,ee]=(0,o.useState)(!1),[en,et]=(0,o.useState)(!1),ea=(0,o.useRef)(null),er=void 0!==L?L:en,ei=(0,i.useQueryClient)(),{setLivestream:eo,clearLivestream:es}=(0,eA.useLivestreamDataStore)(),{user:el,authReady:ec}=(0,Z.useLivestreamUserContext)();O[0]!==F||O[1]!==C||O[2]!==eo?(n=()=>{F&&eo(C,F)},m=[F,eo,C],O[0]=F,O[1]=C,O[2]=eo,O[3]=n,O[4]=m):(n=O[3],m=O[4]),(0,o.useEffect)(n,m),O[5]!==B?(f=()=>{ee(!!(B&&B>Date.now()))},p=[B,ee],O[5]=B,O[6]=p,O[7]=f):(p=O[6],f=O[7]),(0,o.useEffect)(f,p);let eu=(0,d.useLivestream)(C);O[8]!==L?(g=()=>{if(void 0!==L)return;let e=()=>et(window.innerWidth<768);return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},T=[L],O[8]=L,O[9]=g,O[10]=T):(g=O[9],T=O[10]),(0,o.useEffect)(g,T),O[11]!==Q||O[12]!==eu?(h=()=>{Q&&eu&&X(!1)},k=[Q,eu,X],O[11]=Q,O[12]=eu,O[13]=h,O[14]=k):(h=O[13],k=O[14]),(0,o.useEffect)(h,k),O[15]!==es||O[16]!==C||O[17]!==ei?(y=e=>{let n=void 0===e?{}:e;v.logger.info("[LivestreamProvider] resetContext called.",{mintId:C}),K(null),X(n?.isDisconnected??!1),n?.isDisconnected&&es(C),ei.invalidateQueries({queryKey:[c.GET_COIN_QUERY_KEY,C]}),ei.invalidateQueries({queryKey:[u.IS_CREATOR_QUERY_KEY,C]})},O[15]=es,O[16]=C,O[17]=ei,O[18]=y):y=O[18];let ed=y,em=(0,o.useRef)(null);O[19]!==ec||O[20]!==ed||O[21]!==el?.address?(_=()=>{if(!ec)return;let e=em.current;e===el?.address||(em.current=el?.address??null,null!==e&&ed({isDisconnected:!el?.address}))},O[19]=ec,O[20]=ed,O[21]=el?.address,O[22]=_):_=O[22];let ep=el?.address;O[23]!==ec||O[24]!==ed||O[25]!==ep?(E=[ec,ep,ed],O[23]=ec,O[24]=ed,O[25]=ep,O[26]=E):E=O[26],(0,o.useEffect)(_,E),v.logger.debug("[LivestreamProvider] Recalculating LivestreamContext value.",{mintId:C}),O[27]!==z||O[28]!==Q||O[29]!==er||O[30]!==C||O[31]!==ed||O[32]!==W||O[33]!==$?(b={mintId:C,token:W,setToken:K,isDisconnected:Q,setIsDisconnected:X,resetContext:ed,isBanned:z,isMobile:er,roomRef:ea,viewMode:$},O[27]=z,O[28]=Q,O[29]=er,O[30]=C,O[31]=ed,O[32]=W,O[33]=$,O[34]=b):b=O[34];let ef=b;O[35]!==er||O[36]!==C||O[37]!==ed||O[38]!==W?(S={mintId:C,token:W,isMobile:er,roomRef:ea,setIsDisconnected:X,resetContext:ed},O[35]=er,O[36]=C,O[37]=ed,O[38]=W,O[39]=S):S=O[39];let eg=S;O[40]!==B||O[41]!==F||O[42]!==J||O[43]!==Y||O[44]!==q?(w=(0,t.jsx)(l.LivestreamDataSync,{isLive:J,shouldGetLivestreamData:q,shouldGetCoinInfo:Y,initialBanExpiry:B,initialLivestream:F,setIsBanned:ee}),O[40]=B,O[41]=F,O[42]=J,O[43]=Y,O[44]=q,O[45]=w):w=O[45];let eT=void 0!==U&&U||!el?.address,eh=J&&(void 0===j||j);return O[46]!==M?(I=(0,t.jsx)(r.Provider,{children:M}),O[46]=M,O[47]=I):I=O[47],O[48]!==C||O[49]!==x||O[50]!==eT||O[51]!==eh||O[52]!==I?(A=(0,t.jsx)(eS,{roomId:C,readOnly:eT,onTrackEvent:x,isModeratorCheckEnabled:eh,children:I}),O[48]=C,O[49]=x,O[50]=eT,O[51]=eh,O[52]=I,O[53]=A):A=O[53],O[54]!==eg||O[55]!==A?(R=(0,t.jsx)(eI.Provider,{value:eg,children:A}),O[54]=eg,O[55]=A,O[56]=R):R=O[56],O[57]!==w||O[58]!==R||O[59]!==ef?(P=(0,t.jsxs)(eR.Provider,{value:ef,children:[w,R]}),O[57]=w,O[58]=R,O[59]=ef,O[60]=P):P=O[60],O[61]!==x||O[62]!==P?(N=(0,t.jsx)(s.AnalyticsProvider,{onTrackEvent:x,children:P}),O[61]=x,O[62]=P,O[63]=N):N=O[63],N};function eN(){let e=(0,o.useContext)(eR);if(void 0===e)throw Error("useLivestreamContext must be used within a LivestreamProvider");return e}},166037,e=>{"use strict";e.s(["Z_INDEXES",0,{ModerationDialog:{content:120,overlay:110},ModerationQueueMedia:{bottomOverlay:20,topOverlay:20,content:10},BlurDialog:{content:30,title:10,footer:10},LiveKitRoom:{noControlsLiveIndicator:10,reactionsViewer:10},MiniView:{content:21,rnd:21},Controls:{bottom:19,top:19},ReactionsPopover:{content:25},Selector:{content:120},ParticipantsDialog:{content:50},AudioInteractionOverlay:{content:40},ParticipantVideoTile:{gradientOverlay:10},MainVideoView:{screenshareVideoTile:10},Tooltip:{content:50},ClipTimelineSlider:{track:10,range:11,slider:12,thumb:13,playbackHandle:14},ClipPreview:{playPauseOverlay:20}}])}]);